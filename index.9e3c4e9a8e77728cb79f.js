!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){if("c3Vid2F5"!==btoa(localStorage.getItem("password"))){var r=prompt("Please enter the password to play the demo.");if("c3Vid2F5"!==btoa(r))throw alert("Sorry, incorrect password"),"Wrong password";localStorage.setItem("password",r)}t(1),t(2),t(3),t(4),t(5),t(6),t(7),t(8),t(9),t(10);const{Elm:o}=t(11),i="#debug"===location.hash,a=o.Main.init({node:document.getElementById("main"),flags:{debug:i}});var s=t(12).keys();s.length||l(),s.map((function(n){var e=new Image;return e.src="img/"+n,e.onload=c,console.log("loading",e.src),e}));var u=0;function c(){++u===s.length&&l()}function l(){a.ports.loaded.send(!0),console.log("loaded")}document.addEventListener("keydown",(function(n){a.ports.keyPress.send(n.key)," "!=n.key&&"Backspace"!==n.key||"INPUT"!=n.target.tagName&&n.preventDefault()}))},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){!function(n){"use strict";function e(n,e,t){return t.a=n,t.f=e,t}function t(n){return e(2,n,(function(e){return function(t){return n(e,t)}}))}function r(n){return e(3,n,(function(e){return function(t){return function(r){return n(e,t,r)}}}))}function o(n){return e(4,n,(function(e){return function(t){return function(r){return function(o){return n(e,t,r,o)}}}}))}function i(n){return e(5,n,(function(e){return function(t){return function(r){return function(o){return function(i){return n(e,t,r,o,i)}}}}}))}function a(n,e,t){return 2===n.a?n.f(e,t):n(e)(t)}function s(n,e,t,r){return 3===n.a?n.f(e,t,r):n(e)(t)(r)}function u(n,e,t,r,o){return 4===n.a?n.f(e,t,r,o):n(e)(t)(r)(o)}function c(n,e,t,r,o,i){return 5===n.a?n.f(e,t,r,o,i):n(e)(t)(r)(o)(i)}console.warn("Compiled in DEV mode. Follow the advice at https://elm-lang.org/0.19.0/optimize for better performance and smaller assets.");var l=r((function(n,e,t){for(var r=Array(n),o=0;n>o;o++)r[o]=t(e+o);return r})),h=t((function(n,e){for(var t=Array(n),r=0;n>r&&e.b;r++)t[r]=e.a,e=e.b;return t.length=r,Y(t,e)})),f=t((function(n,e){return e[n]})),d=r((function(n,e,t){for(var r=t.length-1;r>=0;r--)e=a(n,t[r],e);return e})),g={$:"[]"};function _(n,e){return{$:"::",a:n,b:e}}var p=t(_);function m(n){for(var e=g,t=n.length;t--;)e=_(n[t],e);return e}function E(n){for(var e=[];n.b;n=n.b)e.push(n.a);return e}var b=r((function(n,e,t){for(var r=[];e.b&&t.b;e=e.b,t=t.b)r.push(a(n,e.a,t.a));return m(r)})),I=t((function(n,e){return m(E(e).sort((function(e,t){return P(n(e),n(t))})))})),y=t((function(n,e){return console.log(n+": "+R(e)),e}));function R(n){return function n(e,t){if("function"==typeof t)return N(e,"<function>");if("boolean"==typeof t)return O(e,t?"True":"False");if("number"==typeof t)return function(n,e){return n?"[95m"+e+"[0m":e}(e,t+"");if(t instanceof String)return function(n,e){return n?"[92m"+e+"[0m":e}(e,"'"+T(t,!0)+"'");if("string"==typeof t)return S(e,'"'+T(t,!1)+'"');if("object"==typeof t&&"$"in t){var r=t.$;if("number"==typeof r)return N(e,"<internals>");if("#"===r[0]){var o=[];for(var i in t)"$"!==i&&o.push(n(e,t[i]));return"("+o.join(",")+")"}if("Set_elm_builtin"===r)return O(e,"Set")+v(e,".fromList")+" "+n(e,Ge(t));if("RBNode_elm_builtin"===r||"RBEmpty_elm_builtin"===r)return O(e,"Dict")+v(e,".fromList")+" "+n(e,Be(t));if("Array_elm_builtin"===r)return O(e,"Array")+v(e,".fromList")+" "+n(e,Ye(t));if("::"===r||"[]"===r){for(o="[",t.b&&(o+=n(e,t.a),t=t.b);t.b;t=t.b)o+=","+n(e,t.a);return o+"]"}for(var a in o="",t)if("$"!==a){var s=n(e,t[a]),u=s[0];o+=" "+("{"===u||"("===u||"["===u||"<"===u||'"'===u||0>s.indexOf(" ")?s:"("+s+")")}return O(e,r)+o}if("function"==typeof DataView&&t instanceof DataView)return S(e,"<"+t.byteLength+" bytes>");if("undefined"!=typeof File&&t instanceof File)return N(e,"<"+t.name+">");if("object"==typeof t){for(var c in o=[],t){var l="_"===c[0]?c.slice(1):c;o.push(v(e,l)+" = "+n(e,t[c]))}return 0===o.length?"{}":"{ "+o.join(", ")+" }"}return N(e,"<internals>")}(!1,n)}function T(n,e){var t=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return e?t.replace(/\'/g,"\\'"):t.replace(/\"/g,'\\"')}function O(n,e){return n?"[96m"+e+"[0m":e}function S(n,e){return n?"[93m"+e+"[0m":e}function v(n,e){return n?"[37m"+e+"[0m":e}function N(n,e){return n?"[36m"+e+"[0m":e}function A(n,e,t,r,o){switch(n){case 0:throw Error('What node should I take over? In JavaScript I need something like:\n\n    Elm.Main.init({\n        node: document.getElementById("elm-node")\n    })\n\nYou need to do this with any Browser.sandbox or Browser.element program.');case 1:throw Error("Browser.application programs cannot handle URLs like this:\n\n    "+document.location.href+"\n\nWhat is the root? The root of your file system? Try looking at this program with `elm reactor` or some other server.");case 2:throw Error("Problem with the flags given to your Elm program on initialization.\n\n"+e);case 3:throw Error("There can only be one port named `"+e+"`, but your program has multiple.");case 4:throw Error("Trying to send an unexpected type of value through port `"+e+"`:\n"+t);case 5:throw Error('Trying to use `(==)` on functions.\nThere is no way to know if functions are "the same" in the Elm sense.\nRead more about this at https://package.elm-lang.org/packages/elm/core/latest/Basics#== which describes why it is this way and what the better version will look like.');case 6:throw Error("Your page is loading multiple Elm scripts with a module named "+e+". Maybe a duplicate script is getting loaded accidentally? If not, rename one of them so I know which is which!");case 8:var i=r;throw Error("TODO in module `"+e+"` "+w(t)+"\n\n"+i);case 9:var a=r;throw i=o,Error("TODO in module `"+e+"` from the `case` expression "+w(t)+"\n\nIt received the following value:\n\n    "+R(a).replace("\n","\n    ")+"\n\nBut the branch that handles it says:\n\n    "+i.replace("\n","\n    "));case 10:throw Error("Bug in https://github.com/elm/virtual-dom/issues");case 11:throw Error("Cannot perform mod 0. Division by zero error.")}}function w(n){return n.start.line===n.end.line?"on line "+n.start.line:"on lines "+n.start.line+" through "+n.end.line}function k(n,e){for(var t,r=[],o=L(n,e,0,r);o&&(t=r.pop());o=L(t.a,t.b,0,r));return o}function L(n,e,t,r){if(n===e)return!0;if("object"!=typeof n||null===n||null===e)return"function"==typeof n&&A(5),!1;if(t>100)return r.push(Y(n,e)),!0;for(var o in"Set_elm_builtin"===n.$&&(n=Ge(n),e=Ge(e)),"RBNode_elm_builtin"!==n.$&&"RBEmpty_elm_builtin"!==n.$||(n=Be(n),e=Be(e)),n)if(!L(n[o],e[o],t+1,r))return!1;return!0}var D=t(k),C=t((function(n,e){return!k(n,e)}));function P(n,e,t){if("object"!=typeof n)return n===e?0:e>n?-1:1;if(n instanceof String){var r=n.valueOf(),o=e.valueOf();return r===o?0:o>r?-1:1}if("#"===n.$[0])return(t=P(n.a,e.a))?t:(t=P(n.b,e.b))?t:P(n.c,e.c);for(;n.b&&e.b&&!(t=P(n.a,e.a));n=n.b,e=e.b);return t||(n.b?1:e.b?-1:0)}var M=t((function(n,e){var t=P(n,e);return 0>t?Me:t?$e:Pe})),H={$:"#0"};function Y(n,e){return{$:"#2",a:n,b:e}}function $(n,e,t){return{$:"#3",a:n,b:e,c:t}}function F(n){return new String(n)}function B(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t}function G(n,e){if("string"==typeof n)return n+e;if(!n.b)return e;var t=_(n.a,e);n=n.b;for(var r=t;n.b;n=n.b)r=r.b=_(n.a,e);return t}var x=t((function(n,e){return n+e})),W=t((function(n,e){var t=e%n;return 0===n?A(11):t>0&&0>n||0>t&&n>0?t+n:t})),U=Math.ceil,j=Math.floor,K=Math.log,q=t((function(n,e){return e.split(n)})),J=t((function(n,e){return e.join(n)})),V=r((function(n,e,t){return t.slice(n,e)})),z=t((function(n,e){for(var t=e.length;t--;){var r=e[t],o=e.charCodeAt(t);if(56320>o||o>57343||(r=e[--t]+r),!n(F(r)))return!1}return!0})),Z=t((function(n,e){return e.indexOf(n)>-1})),X=t((function(n,e){return 0===e.indexOf(n)}));function Q(n){return{$:2,b:n}}Q((function(n){return"number"!=typeof n?hn("an INT",n):n>-2147483647&&2147483647>n&&(0|n)===n?Ht(n):!isFinite(n)||n%1?hn("an INT",n):Ht(n)}));var nn=Q((function(n){return"boolean"==typeof n?Ht(n):hn("a BOOL",n)})),en=(Q((function(n){return"number"==typeof n?Ht(n):hn("a FLOAT",n)})),Q((function(n){return Ht(_n(n))})),Q((function(n){return"string"==typeof n?Ht(n):n instanceof String?Ht(n+""):hn("a STRING",n)}))),tn=t((function(n,e){return{$:6,d:n,b:e}})),rn=t((function(n,e){return{$:10,b:e,h:n}})),on=t((function(n,e){return function(n){return{$:9,f:n,g:[e]}}(n)})),an=t((function(n,e){return sn(n,pn(e))}));function sn(n,e){switch(n.$){case 2:return n.b(e);case 5:return null===e?Ht(n.c):hn("null",e);case 3:return cn(e)?un(n.b,e,m):hn("a LIST",e);case 4:return cn(e)?un(n.b,e,ln):hn("an ARRAY",e);case 6:var t=n.d;if("object"!=typeof e||null===e||!(t in e))return hn("an OBJECT with a field named `"+t+"`",e);var r=sn(n.b,e[t]);return ft(r)?r:Mt(a($t,t,r.a));case 7:var o=n.e;return cn(e)?e.length>o?(r=sn(n.b,e[o]),ft(r)?r:Mt(a(Ft,o,r.a))):hn("a LONGER array. Need index "+o+" but only see "+e.length+" entries",e):hn("an ARRAY",e);case 8:if("object"!=typeof e||null===e||cn(e))return hn("an OBJECT",e);var i=g;for(var s in e)if(e.hasOwnProperty(s)){if(r=sn(n.b,e[s]),!ft(r))return Mt(a($t,s,r.a));i=_(Y(s,r.a),i)}return Ht(yt(i));case 9:for(var u=n.f,c=n.g,l=0;c.length>l;l++){if(r=sn(c[l],e),!ft(r))return r;u=u(r.a)}return Ht(u);case 10:return r=sn(n.b,e),ft(r)?sn(n.h(r.a),e):r;case 11:for(var h=g,f=n.g;f.b;f=f.b){if(r=sn(f.a,e),ft(r))return r;h=_(r.a,h)}return Mt(Bt(yt(h)));case 1:return Mt(a(Yt,n.a,_n(e)));case 0:return Ht(n.a)}}function un(n,e,t){for(var r=e.length,o=Array(r),i=0;r>i;i++){var s=sn(n,e[i]);if(!ft(s))return Mt(a(Ft,i,s.a));o[i]=s.a}return Ht(t(o))}function cn(n){return Array.isArray(n)||"undefined"!=typeof FileList&&n instanceof FileList}function ln(n){return a(Pt,n.length,(function(e){return n[e]}))}function hn(n,e){return Mt(a(Yt,"Expecting "+n,_n(e)))}function fn(n,e){if(n===e)return!0;if(n.$!==e.$)return!1;switch(n.$){case 0:case 1:return n.a===e.a;case 2:return n.b===e.b;case 5:return n.c===e.c;case 3:case 4:case 8:return fn(n.b,e.b);case 6:return n.d===e.d&&fn(n.b,e.b);case 7:return n.e===e.e&&fn(n.b,e.b);case 9:return n.f===e.f&&dn(n.g,e.g);case 10:return n.h===e.h&&fn(n.b,e.b);case 11:return dn(n.g,e.g)}}function dn(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;t>r;r++)if(!fn(n[r],e[r]))return!1;return!0}var gn=t((function(n,e){return JSON.stringify(pn(e),null,n)+""}));function _n(n){return{$:0,a:n}}function pn(n){return n.a}function mn(n){return{$:0,a:n}}function En(n){return{$:2,b:n,c:null}}_n(null);var bn=t((function(n,e){return{$:3,b:n,d:e}})),In=0;function yn(n){var e={$:0,e:In++,f:n,g:null,h:[]};return On(e),e}var Rn=!1,Tn=[];function On(n){if(Tn.push(n),!Rn){for(Rn=!0;n=Tn.shift();)Sn(n);Rn=!1}}function Sn(n){for(;n.f;){var e=n.f.$;if(0===e||1===e){for(;n.g&&n.g.$!==e;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else{if(2===e)return void(n.f.c=n.f.b((function(e){n.f=e,On(n)})));if(5===e){if(0===n.h.length)return;n.f=n.f.b(n.h.shift())}else n.g={$:3===e?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}}var vn={};function Nn(n,e){var t={g:e,h:void 0},r=n.c,o=n.d,i=n.e,c=n.f;return t.h=yn(a(bn,(function n(e){return a(bn,n,{$:5,b:function(n){var a=n.a;return 0===n.$?s(o,t,a,e):i&&c?u(r,t,a.i,a.j,e):s(r,t,i?a.i:a.j,e)}})}),n.b))}var An=t((function(n,e){return En((function(t){n.g(e),t(mn(H))}))}));function wn(n){return function(e){return{$:1,k:n,l:e}}}function kn(n){return{$:2,m:n}}var Ln=[],Dn=!1;function Cn(n,e,t){if(Ln.push({p:n,q:e,r:t}),!Dn){Dn=!0;for(var r;r=Ln.shift();)Pn(r.p,r.q,r.r);Dn=!1}}function Pn(n,e,t){var r,o={};for(var i in Mn(!0,e,o,null),Mn(!1,t,o,null),n)(r=n[i]).h.push({$:"fx",a:o[i]||{i:g,j:g}}),On(r)}function Mn(n,e,t,r){switch(e.$){case 1:var o=e.k,i=function(n,t,r){return a(n?vn[t].e:vn[t].f,(function(n){for(var e=r;e;e=e.t)n=e.s(n);return n}),e.l)}(n,o,r);return void(t[o]=function(n,e,t){return t=t||{i:g,j:g},n?t.i=_(e,t.i):t.j=_(e,t.j),t}(n,i,t[o]));case 2:for(var s=e.m;s.b;s=s.b)Mn(n,s.a,t,r);return;case 3:return void Mn(n,e.o,t,{s:e.n,t:r})}}function Hn(n,e){return function(n){vn[n]&&A(3,n)}(n),vn[n]={f:Yn,u:e,a:$n},wn(n)}var Yn=t((function(n,e){return function(t){return n(e(t))}}));function $n(n,e){var t=g,o=vn[n].u,i=mn(null);return vn[n].b=i,vn[n].c=r((function(n,e){return t=e,i})),{send:function(r){var i=a(an,o,_n(r));ft(i)||A(4,n,i.a);for(var s=i.a,u=t;u.b;u=u.b)e(u.a(s))}}}var Fn,Bn=i((function(n,e,t,r,o){for(var i=n.length,a=o.length>=e+i,s=0;a&&i>s;){var u=o.charCodeAt(e);a=n[s++]===o[e++]&&(10===u?(t++,r=1):(r++,55296==(63488&u)?n[s++]===o[e++]:1))}return $(a?e:-1,t,r)})),Gn=r((function(n,e,t){return t.length>e?55296==(63488&t.charCodeAt(e))?n(F(t.substr(e,2)))?e+2:-1:n(F(t[e]))?"\n"===t[e]?-2:e+1:-1:-1})),xn=i((function(n,e,t,r,o){for(var i=o.indexOf(n,e),a=0>i?o.length:i+n.length;a>e;){var s=o.charCodeAt(e++);10===s?(r=1,t++):(r++,55296==(63488&s)&&e++)}return $(i,t,r)})),Wn="undefined"!=typeof document?document:{};function Un(n,e){n.appendChild(e)}function jn(n){return{$:0,a:n}}var Kn,qn=t((function(n,e){return t((function(t,r){for(var o=[],i=0;r.b;r=r.b){var a=r.a;i+=a.b||0,o.push(a)}return i+=o.length,{$:1,c:e,d:Qn(t),e:o,f:n,b:i}}))}))(void 0),Jn=t((function(n,e){return t((function(t,r){for(var o=[],i=0;r.b;r=r.b){var a=r.a;i+=a.b.b||0,o.push(a)}return i+=o.length,{$:2,c:e,d:Qn(t),e:o,f:n,b:i}}))}))(void 0),Vn=t((function(n,e){return{$:"a0",n:n,o:e}})),zn=t((function(n,e){return{$:"a1",n:n,o:e}})),Zn=t((function(n,e){return{$:"a2",n:n,o:e}})),Xn=t((function(n,e){return{$:"a3",n:n,o:e}}));function Qn(n){for(var e={};n.b;n=n.b){var t=n.a,r=t.$,o=t.n,i=t.o;if("a2"!==r){var a=e[r]||(e[r]={});"a3"===r&&"class"===o?ne(a,o,i):a[o]=i}else"className"===o?ne(e,o,pn(i)):e[o]=pn(i)}return e}function ne(n,e,t){var r=n[e];n[e]=r?r+" "+t:t}function ee(n,e){var t=n.$;if(5===t)return ee(n.k||(n.k=n.m()),e);if(0===t)return Wn.createTextNode(n.a);if(4===t){for(var r=n.k,o=n.j;4===r.$;)"object"!=typeof o?o=[o,r.j]:o.push(r.j),r=r.k;var i={j:o,p:e};return(a=ee(r,i)).elm_event_node_ref=i,a}if(3===t)return te(a=n.h(n.g),e,n.d),a;var a=n.f?Wn.createElementNS(n.f,n.c):Wn.createElement(n.c);Fn&&"a"==n.c&&a.addEventListener("click",Fn(a)),te(a,e,n.d);for(var s=n.e,u=0;s.length>u;u++)Un(a,ee(1===t?s[u]:s[u].b,e));return a}function te(n,e,t){for(var r in t){var o=t[r];"a1"===r?re(n,o):"a0"===r?ae(n,e,o):"a3"===r?oe(n,o):"a4"===r?ie(n,o):("value"!==r&&"checked"!==r||n[r]!==o)&&(n[r]=o)}}function re(n,e){var t=n.style;for(var r in e)t[r]=e[r]}function oe(n,e){for(var t in e){var r=e[t];void 0!==r?n.setAttribute(t,r):n.removeAttribute(t)}}function ie(n,e){for(var t in e){var r=e[t],o=r.f,i=r.o;void 0!==i?n.setAttributeNS(o,t,i):n.removeAttributeNS(o,t)}}function ae(n,e,t){var r=n.elmFs||(n.elmFs={});for(var o in t){var i=t[o],a=r[o];if(i){if(a){if(a.q.$===i.$){a.q=i;continue}n.removeEventListener(o,a)}a=se(e,i),n.addEventListener(o,a,Kn&&{passive:2>As(i)}),r[o]=a}else n.removeEventListener(o,a),r[o]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){Kn=!0}}))}catch(n){}function se(n,e){function t(e){var r=t.q,o=sn(r.a,e);if(ft(o)){for(var i,a=As(r),s=o.a,u=a?3>a?s.a:s.message:s,c=1==a?s.b:3==a&&s.stopPropagation,l=(c&&e.stopPropagation(),(2==a?s.b:3==a&&s.preventDefault)&&e.preventDefault(),n);i=l.j;){if("function"==typeof i)u=i(u);else for(var h=i.length;h--;)u=i[h](u);l=l.p}l(u,c)}}return t.q=e,t}function ue(n,e){return n.$==e.$&&fn(n.a,e.a)}function ce(n,e,t,r){var o={$:e,r:t,s:r,t:void 0,u:void 0};return n.push(o),o}function le(n,e,t,r){if(n!==e){var o=n.$,i=e.$;if(o!==i){if(1!==o||2!==i)return void ce(t,0,r,e);e=function(n){for(var e=n.e,t=e.length,r=Array(t),o=0;t>o;o++)r[o]=e[o].b;return{$:1,c:n.c,d:n.d,e:r,f:n.f,b:n.b}}(e),i=1}switch(i){case 5:for(var a=n.l,s=e.l,u=a.length,c=u===s.length;c&&u--;)c=a[u]===s[u];if(c)return void(e.k=n.k);e.k=e.m();var l=[];return le(n.k,e.k,l,0),void(l.length>0&&ce(t,1,r,l));case 4:for(var h=n.j,f=e.j,d=!1,g=n.k;4===g.$;)d=!0,"object"!=typeof h?h=[h,g.j]:h.push(g.j),g=g.k;for(var _=e.k;4===_.$;)d=!0,"object"!=typeof f?f=[f,_.j]:f.push(_.j),_=_.k;return d&&h.length!==f.length?void ce(t,0,r,e):((d?function(n,e){for(var t=0;n.length>t;t++)if(n[t]!==e[t])return!1;return!0}(h,f):h===f)||ce(t,2,r,f),void le(g,_,t,r+1));case 0:return void(n.a!==e.a&&ce(t,3,r,e.a));case 1:return void he(n,e,t,r,de);case 2:return void he(n,e,t,r,ge);case 3:if(n.h!==e.h)return void ce(t,0,r,e);var p=fe(n.d,e.d);p&&ce(t,4,r,p);var m=e.i(n.g,e.g);return void(m&&ce(t,5,r,m))}}}function he(n,e,t,r,o){if(n.c===e.c&&n.f===e.f){var i=fe(n.d,e.d);i&&ce(t,4,r,i),o(n,e,t,r)}else ce(t,0,r,e)}function fe(n,e,t){var r;for(var o in n)if("a1"!==o&&"a0"!==o&&"a3"!==o&&"a4"!==o)if(o in e){var i=n[o],a=e[o];i===a&&"value"!==o&&"checked"!==o||"a0"===t&&ue(i,a)||((r=r||{})[o]=a)}else(r=r||{})[o]=t?"a1"===t?"":"a0"===t||"a3"===t?void 0:{f:n[o].f,o:void 0}:"string"==typeof n[o]?"":null;else{var s=fe(n[o],e[o]||{},o);s&&((r=r||{})[o]=s)}for(var u in e)u in n||((r=r||{})[u]=e[u]);return r}function de(n,e,t,r){var o=n.e,i=e.e,a=o.length,s=i.length;a>s?ce(t,6,r,{v:s,i:a-s}):s>a&&ce(t,7,r,{v:a,e:i});for(var u=s>a?a:s,c=0;u>c;c++){var l=o[c];le(l,i[c],t,++r),r+=l.b||0}}function ge(n,e,t,r){for(var o=[],i={},a=[],s=n.e,u=e.e,c=s.length,l=u.length,h=0,f=0,d=r;c>h&&l>f;){var g=(v=s[h]).a,_=(N=u[f]).a,p=v.b,m=N.b,E=void 0,b=void 0;if(g!==_){var I=s[h+1],y=u[f+1];if(I){var R=I.a,T=I.b;b=_===R}if(y){var O=y.a,S=y.b;E=g===O}if(E&&b)le(p,S,o,++d),pe(i,o,g,m,f,a),d+=p.b||0,me(i,o,g,T,++d),d+=T.b||0,h+=2,f+=2;else if(E)d++,pe(i,o,_,m,f,a),le(p,S,o,d),d+=p.b||0,h+=1,f+=2;else if(b)me(i,o,g,p,++d),d+=p.b||0,le(T,m,o,++d),d+=T.b||0,h+=2,f+=1;else{if(!I||R!==O)break;me(i,o,g,p,++d),pe(i,o,_,m,f,a),d+=p.b||0,le(T,S,o,++d),d+=T.b||0,h+=2,f+=2}}else le(p,m,o,++d),d+=p.b||0,h++,f++}for(;c>h;){var v;me(i,o,(v=s[h]).a,p=v.b,++d),d+=p.b||0,h++}for(;l>f;){var N,A=A||[];pe(i,o,(N=u[f]).a,N.b,void 0,A),f++}(o.length>0||a.length>0||A)&&ce(t,8,r,{w:o,x:a,y:A})}var _e="_elmW6BL";function pe(n,e,t,r,o,i){var a=n[t];if(!a)return i.push({r:o,A:a={c:0,z:r,r:o,s:void 0}}),void(n[t]=a);if(1===a.c){i.push({r:o,A:a}),a.c=2;var s=[];return le(a.z,r,s,a.r),a.r=o,void(a.s.s={w:s,A:a})}pe(n,e,t+_e,r,o,i)}function me(n,e,t,r,o){var i=n[t];if(i){if(0===i.c){i.c=2;var a=[];return le(r,i.z,a,o),void ce(e,9,o,{w:a,A:i})}me(n,e,t+_e,r,o)}else{var s=ce(e,9,o,void 0);n[t]={c:1,z:r,r:o,s:s}}}function Ee(n,e){for(var t=0;e.length>t;t++){var r=e[t],o=r.t,i=be(o,r);o===n&&(n=i)}return n}function be(n,e){switch(e.$){case 0:return function(n){var t=n.parentNode,r=ee(e.s,e.u);return r.elm_event_node_ref||(r.elm_event_node_ref=n.elm_event_node_ref),t&&r!==n&&t.replaceChild(r,n),r}(n);case 4:return te(n,e.u,e.s),n;case 3:return n.replaceData(0,n.length,e.s),n;case 1:return Ee(n,e.s);case 2:return n.elm_event_node_ref?n.elm_event_node_ref.j=e.s:n.elm_event_node_ref={j:e.s,p:e.u},n;case 6:for(var t=e.s,r=0;t.i>r;r++)n.removeChild(n.childNodes[t.v]);return n;case 7:for(var o=(t=e.s).e,i=n.childNodes[r=t.v];o.length>r;r++)n.insertBefore(ee(o[r],e.u),i);return n;case 9:if(!(t=e.s))return n.parentNode.removeChild(n),n;var a=t.A;return void 0!==a.r&&n.parentNode.removeChild(n),a.s=Ee(n,t.w),n;case 8:return function(n,e){var t=e.s,r=function(n,e){if(n){for(var t=Wn.createDocumentFragment(),r=0;n.length>r;r++){var o=n[r].A;Un(t,2===o.c?o.s:ee(o.z,e.u))}return t}}(t.y,e);n=Ee(n,t.w);for(var o=t.x,i=0;o.length>i;i++){var a=o[i],s=a.A,u=2===s.c?s.s:ee(s.z,e.u);n.insertBefore(u,n.childNodes[a.r])}return r&&Un(n,r),n}(n,e);case 5:return e.s(n);default:A(10)}}var Ie=r((function(n,e,t){return function(n,e,t,r){return{$:3,d:Qn(n),g:e,h:t,i:r}}(e,{a:n,b:t},ye,Re)}));function ye(n){return a(Se,n,Wn.createElement("div"))}function Re(n,e){return(n.b!==e.b||n.a!==e.a)&&Se(e)}var Te,Oe,Se=t((function(n,e){return e.innerHTML=ve(n.b,{highlight:function(n,e){return!e&&$s(t.defaultHighlighting)&&(e=t.defaultHighlighting.a),"undefined"!=typeof hljs&&e&&hljs.listLanguages().indexOf(e)>=0?hljs.highlight(e,n,!0).value:n},gfm:r=(t=n.a).githubFlavored.a,tables:r&&r.tables,breaks:r&&r.breaks,sanitize:t.sanitize,smartypants:t.smartypants}),e;var t,r})),ve=(Oe=(Te={}).exports={},function(){var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function e(e){this.tokens=[],this.tokens.links={},this.options=e||l.defaults,this.rules=n.normal,this.options.gfm&&(this.rules=this.options.tables?n.tables:n.gfm)}n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=s(n.item,"gm")(/bull/g,n.bullet)(),n.list=s(n.list)(/bull/g,n.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+n.def.source+")")(),n.blockquote=s(n.blockquote)("def",n.def)(),n._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",n.html=s(n.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,n._tag)(),n.paragraph=s(n.paragraph)("hr",n.hr)("heading",n.heading)("lheading",n.lheading)("blockquote",n.blockquote)("tag","<"+n._tag)("def",n.def)(),n.normal=c({},n),n.gfm=c({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=s(n.paragraph)("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|")(),n.tables=c({},n.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=n,e.lex=function(n,t){return new e(t).lex(n)},e.prototype.lex=function(n){return n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(n,!0)},e.prototype.token=function(e,t,r){var o,i,a,s,u,c,l,h,f;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e))e=e.substring(a[0].length),a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?a:a.replace(/\n+$/,"")});else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if(t&&(a=this.rules.nptable.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/\n$/,"").split("\n")},h=0;c.align.length>h;h++)c.align[h]=/^ *-+: *$/.test(c.align[h])?"right":/^ *:-+: *$/.test(c.align[h])?"center":/^ *:-+ *$/.test(c.align[h])?"left":null;for(h=0;c.cells.length>h;h++)c.cells[h]=c.cells[h].split(/ *\| */);this.tokens.push(c)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2]?1:2,text:a[1]});else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,t,!0),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),this.tokens.push({type:"list_start",ordered:(s=a[2]).length>1}),o=!1,f=(a=a[0].match(this.rules.item)).length,h=0;f>h;h++)l=(c=a[h]).length,~(c=c.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=c.length,c=c.replace(this.options.pedantic?/^ {1,4}/gm:RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&h!==f-1&&(s===(u=n.bullet.exec(a[h+1])[0])||s.length>1&&u.length>1||(e=a.slice(h+1).join("\n")+e,h=f-1)),i=o||/\n\n(?!\s*$)/.test(c),h!==f-1&&(o="\n"===c.charAt(c.length-1),i||(i=o)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:a[0]});else if(!r&&t&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),this.tokens.links[a[1].toLowerCase()]={href:a[2],title:a[3]};else if(t&&(a=this.rules.table.exec(e))){for(e=e.substring(a[0].length),c={type:"table",header:a[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;c.align.length>h;h++)c.align[h]=/^ *-+: *$/.test(c.align[h])?"right":/^ *:-+: *$/.test(c.align[h])?"center":/^ *:-+ *$/.test(c.align[h])?"left":null;for(h=0;c.cells.length>h;h++)c.cells[h]=c.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(t&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(n,e){if(this.options=e||l.defaults,this.links=n,this.rules=t.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?t.breaks:t.gfm:this.options.pedantic&&(this.rules=t.pedantic)}function o(n){this.options=n||{}}function i(n){this.tokens=[],this.token=null,this.options=n||l.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(n,e){return n.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(n,e){return n=n.source,e=e||"",function t(r,o){return r?(o=(o=o.source||o).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(r,o),t):RegExp(n,e)}}function u(){}function c(n){for(var e,t,r=1;arguments.length>r;r++)for(t in e=arguments[r])Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function l(n,t,r){if(r||"function"==typeof t){r||(r=t,t=null);var o,s,u=(t=c({},l.defaults,t||{})).highlight,h=0;try{o=e.lex(n,t)}catch(n){return r(n)}s=o.length;var f=function(n){if(n)return t.highlight=u,r(n);var e;try{e=i.parse(o,t)}catch(e){n=e}return t.highlight=u,n?r(n):r(null,e)};if(!u||3>u.length)return f();if(delete t.highlight,!s)return f();for(;o.length>h;h++)!function(n){"code"!==n.type?--s||f():u(n.text,n.lang,(function(e,t){return e?f(e):null==t||t===n.text?--s||f():(n.text=t,n.escaped=!0,void(--s||f()))}))}(o[h])}else try{return t&&(t=c({},l.defaults,t)),i.parse(e.lex(n,t),t)}catch(n){if(n.message+="\nPlease report this to https://github.com/chjj/marked.",(t||l.defaults).silent)return"<p>An error occured:</p><pre>"+a(n.message+"",!0)+"</pre>";throw n}}t._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,t._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,t.link=s(t.link)("inside",t._inside)("href",t._href)(),t.reflink=s(t.reflink)("inside",t._inside)(),t.normal=c({},t),t.pedantic=c({},t.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),t.gfm=c({},t.normal,{escape:s(t.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(t.text)("]|","~]|")("|","|https?://|")()}),t.breaks=c({},t.gfm,{br:s(t.br)("{2,}","*")(),text:s(t.gfm.text)("{2,}","*")()}),r.rules=t,r.output=function(n,e,t){return new r(e,t).output(n)},r.prototype.output=function(n){for(var e,t,r,o,i="";n;)if(o=this.rules.escape.exec(n))n=n.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(n))n=n.substring(o[0].length),"@"===o[2]?(t=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+t):r=t=a(o[1]),i+=this.renderer.link(r,null,t);else if(this.inLink||!(o=this.rules.url.exec(n))){if(o=this.rules.tag.exec(n))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),n=n.substring(o[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):a(o[0]):o[0];else if(o=this.rules.link.exec(n))n=n.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(n))||(o=this.rules.nolink.exec(n))){if(n=n.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){i+=o[0].charAt(0),n=o[0].substring(1)+n;continue}this.inLink=!0,i+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(n))n=n.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(n))n=n.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(n))n=n.substring(o[0].length),i+=this.renderer.codespan(a(o[2],!0));else if(o=this.rules.br.exec(n))n=n.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(n))n=n.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(n))n=n.substring(o[0].length),i+=this.renderer.text(a(this.smartypants(o[0])));else if(n)throw Error("Infinite loop on byte: "+n.charCodeAt(0))}else n=n.substring(o[0].length),t=a(o[1]),i+=this.renderer.link(r=t,null,t);return i},r.prototype.outputLink=function(n,e){var t=a(e.href),r=e.title?a(e.title):null;return"!"!==n[0].charAt(0)?this.renderer.link(t,r,this.output(n[1])):this.renderer.image(t,r,a(n[1]))},r.prototype.smartypants=function(n){return this.options.smartypants?n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):n},r.prototype.mangle=function(n){if(!this.options.mangle)return n;for(var e,t="",r=n.length,o=0;r>o;o++)e=n.charCodeAt(o),Math.random()>.5&&(e="x"+e.toString(16)),t+="&#"+e+";";return t},o.prototype.code=function(n,e,t){if(this.options.highlight){var r=this.options.highlight(n,e);null!=r&&r!==n&&(t=!0,n=r)}return e?'<pre><code class="'+this.options.langPrefix+a(e,!0)+'">'+(t?n:a(n,!0))+"\n</code></pre>\n":"<pre><code>"+(t?n:a(n,!0))+"\n</code></pre>"},o.prototype.blockquote=function(n){return"<blockquote>\n"+n+"</blockquote>\n"},o.prototype.html=function(n){return n},o.prototype.heading=function(n,e,t){return"<h"+e+' id="'+this.options.headerPrefix+t.toLowerCase().replace(/[^\w]+/g,"-")+'">'+n+"</h"+e+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(n,e){var t=e?"ol":"ul";return"<"+t+">\n"+n+"</"+t+">\n"},o.prototype.listitem=function(n){return"<li>"+n+"</li>\n"},o.prototype.paragraph=function(n){return"<p>"+n+"</p>\n"},o.prototype.table=function(n,e){return"<table>\n<thead>\n"+n+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},o.prototype.tablerow=function(n){return"<tr>\n"+n+"</tr>\n"},o.prototype.tablecell=function(n,e){var t=e.header?"th":"td";return(e.align?"<"+t+' style="text-align:'+e.align+'">':"<"+t+">")+n+"</"+t+">\n"},o.prototype.strong=function(n){return"<strong>"+n+"</strong>"},o.prototype.em=function(n){return"<em>"+n+"</em>"},o.prototype.codespan=function(n){return"<code>"+n+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(n){return"<del>"+n+"</del>"},o.prototype.link=function(n,e,t){if(this.options.sanitize){try{var r=decodeURIComponent((o=n,o.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(n,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(n){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return""}var o,i='<a href="'+n+'"';return e&&(i+=' title="'+e+'"'),i+">"+t+"</a>"},o.prototype.image=function(n,e,t){var r='<img src="'+n+'" alt="'+t+'"';return e&&(r+=' title="'+e+'"'),r+(this.options.xhtml?"/>":">")},o.prototype.text=function(n){return n},i.parse=function(n,e,t){return new i(e,t).parse(n)},i.prototype.parse=function(n){this.inline=new r(n.links,this.options,this.renderer),this.tokens=n.reverse();for(var e="";this.next();)e+=this.tok();return e},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var n=this.token.text;"text"===this.peek().type;)n+="\n"+this.next().text;return this.inline.output(n)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var n,e,t,r,o="",i="";for(t="",n=0;this.token.header.length>n;n++)t+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});for(o+=this.renderer.tablerow(t),n=0;this.token.cells.length>n;n++){for(e=this.token.cells[n],t="",r=0;e.length>r;r++)t+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(t)}return this.renderer.table(o,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var a=this.token.ordered;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,a);case"list_item_start":for(i="";"list_item_end"!==this.next().type;)i+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(i);case"loose_item_start":for(i="";"list_item_end"!==this.next().type;)i+=this.tok();return this.renderer.listitem(i);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,l.options=l.setOptions=function(n){return c(l.defaults,n),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},l.Parser=i,l.parser=i.parse,l.Renderer=o,l.Lexer=e,l.lexer=e.lex,l.InlineLexer=r,l.inlineLexer=r.output,l.parse=l,void 0!==Te&&"object"==typeof Oe?Te.exports=l:"function"==typeof define&&define.amd?define((function(){return l})):this.marked=l}.call(function(){return this||("undefined"!=typeof window?window:global)}()),Te.exports),Ne=o((function(n,e,t,r){return function(e,t,r,o,i){var u=a(an,e,_n(t?t.flags:void 0));ft(u)||A(2,ir(u.a));var c={},l=(u=r(u.a)).a,h=function(e,t){var r=n.setup&&n.setup(e),o=n.view,i=Wn.title,u=Wn.body,c=function n(e){if(3===e.nodeType)return jn(e.textContent);if(1!==e.nodeType)return jn("");for(var t=g,r=e.attributes,o=r.length;o--;){var i=r[o];t=_(a(Xn,i.name,i.value),t)}var u=e.tagName.toLowerCase(),c=g,l=e.childNodes;for(o=l.length;o--;)c=_(n(l[o]),c);return s(qn,u,t,c)}(u);return function(n,e){e(n);var t=0;function r(){t=1===t?0:(Ae(r),e(n),1)}return function(o,i){n=o,i?(e(n),2===t&&(t=1)):(0===t&&Ae(r),t=2)}}(t,(function(n){Fn=r;var t=o(n),a=qn("body")(g)(t.body),s=function(n,e){var t=[];return le(n,e,t,0),t}(c,a);u=function(n,e,t,r){return 0===t.length?n:(function n(e,t,r,o){!function e(t,r,o,i,a,s,u){for(var c=o[i],l=c.r;l===a;){var h=c.$;if(1===h)n(t,r.k,c.s,u);else if(8===h)c.t=t,c.u=u,(f=c.s.w).length>0&&e(t,r,f,0,a,s,u);else if(9===h){c.t=t,c.u=u;var f,d=c.s;d&&(d.A.s=t,(f=d.w).length>0&&e(t,r,f,0,a,s,u))}else c.t=t,c.u=u;if(!(c=o[++i])||(l=c.r)>s)return i}var g=r.$;if(4===g){for(var _=r.k;4===_.$;)_=_.k;return e(t,_,o,i,a+1,s,t.elm_event_node_ref)}for(var p=r.e,m=t.childNodes,E=0;p.length>E;E++){a++;var b=1===g?p[E]:p[E].b,I=a+(b.b||0);if(!(a>l||l>I||(c=o[i=e(m[E],b,o,i,a,I,u)])&&(l=c.r)<=s))return i;a=I}return i}(e,t,r,0,0,t.b,o)}(n,e,t,r),Ee(n,t))}(u,c,s,e),c=a,Fn=0,i!==t.title&&(Wn.title=i=t.title)}))}(d,l),f=function(n,e){var t;for(var r in vn){var o=vn[r];o.a&&((t=t||{})[r]=o.a(r,e)),n[r]=Nn(o,e)}return t}(c,d);function d(n,e){h(l=(u=a(o,n,l)).a,e),Cn(c,u.b,i(l))}return Cn(c,u.b,i(l)),f?{ports:f}:{}}(e,r,n.init,n.update,n.subscriptions)})),Ae=("undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(n){return setTimeout(n,1e3/60)});"undefined"!=typeof document&&document,"undefined"!=typeof window&&window;var we={$:"MainTitle"},ke={$:"Black"},Le=i((function(n,e,t,r,o){return{$:"RBNode_elm_builtin",a:n,b:e,c:t,d:r,e:o}})),De=d,Ce=r((function(n,e,r){var o=r.c,i=r.d,a=t((function(e,t){return s(De,"SubTree"===e.$?a:n,t,e.a)}));return s(De,a,s(De,n,e,i),o)})),Pe={$:"EQ"},Me={$:"LT"},He=p,Ye=function(n){return s(Ce,He,g,n)},$e={$:"GT"},Fe=r((function(n,e,t){for(;;){if("RBEmpty_elm_builtin"===t.$)return e;var r=t.d,o=n,i=s(n,t.b,t.c,s(Fe,n,e,t.e));n=o,e=i,t=r}})),Be=function(n){return s(Fe,r((function(n,e,t){return a(He,Y(n,e),t)})),g,n)},Ge=function(n){return function(n){return s(Fe,r((function(n,e,t){return a(He,n,t)})),g,n)}(n.a)},xe=M,We={$:"RBEmpty_elm_builtin"},Ue={$:"Red"},je=i((function(n,e,t,r,o){if("RBNode_elm_builtin"===o.$&&"Red"===o.a.$){var i=o.b,a=o.c,s=o.d,u=o.e;return"RBNode_elm_builtin"===r.$&&"Red"===r.a.$?c(Le,Ue,e,t,c(Le,ke,r.b,r.c,r.d,h=r.e),c(Le,ke,i,a,s,u)):c(Le,n,i,a,c(Le,Ue,e,t,r,s),u)}if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$&&"RBNode_elm_builtin"===r.d.$&&"Red"===r.d.a.$){var l=r.d,h=r.e;return c(Le,Ue,r.b,r.c,c(Le,ke,l.b,l.c,l.d,l.e),c(Le,ke,e,t,h,o))}return c(Le,n,e,t,r,o)})),Ke=r((function(n,e,t){if("RBEmpty_elm_builtin"===t.$)return c(Le,Ue,n,e,We,We);var r=t.a,o=t.b,i=t.c,u=t.d,l=t.e;switch(a(xe,n,o).$){case"LT":return c(je,r,o,i,s(Ke,n,e,u),l);case"EQ":return c(Le,r,o,e,u,l);default:return c(je,r,o,i,u,s(Ke,n,e,l))}})),qe=r((function(n,e,t){var r=s(Ke,n,e,t);return"RBNode_elm_builtin"===r.$&&"Red"===r.a.$?c(Le,ke,r.b,r.c,r.d,r.e):r})),Je=qe,Ve=We,ze=s(Je,"transfer_station","\n_Achievement unlocked:_\nTransfer station\n",s(Je,"fools_errand_achievement","\n_Achievement unlocked:_  \nFool's errand\n",s(Je,"get_caffeinated_quest_achievement","\n_Achievement unlocked:_  \nGet caffeinated\n",Ve))),Ze=s(Je,"fallAsleep","\nToday's the day.  I busted my ass, but I think it will work.  I better get my damn promotion.\n\nI just wish I wasn't so tired.\n---\nThree more stops. Maybe I can steal a wink or two before I get to the station. I'll just close my eyes for a minute.\n---\n...\n---\n\"Sir. Sir!\"\n---\nWhoa... what?  What's going on?\n\nA janitor is shaking my shoulder.\n\n\"We're almost at the end of the line, sir. You have to wake up.\"\n---\nEnd of the line?\n\nShit, I feel asleep!  I missed my stop!  What station is this?\n\nOh my God, I'm in so much trouble!  I have to get back to my stop.\n",s(Je,"endThursday","\nI'm so tired.  I've been up all night working on this damn proposal, and there's still a lot more work to be done. I hope Mr. Harris appreciates it.\n",s(Je,"endWednesday","\nThis train is two minutes late again.  This is becoming more and more of a problem lately.  They've got to do something about it.\n---\nI'm not looking forward to talking to Mr. Harris this morning.  This proposal is going to be a disaster.  Figures I get stuck with it.\n---\nBut I've got to make it work.\n",s(Je,"endTuesday","\nIt's going to be tough getting this proposal put together by Friday, but I've got to do it.  I just wish I had more time to make it good.\n---\nAlso, It would be great to see Henry again. I've got to remember to get back to him.  \n",s(Je,"endMonday","\nI'm curious what my boss has in mind for this proposal.  It's nice he thought of me.  Maybe this will finally get me the promotion he's been promising.\n",s(Je,"forcePlayerToReadEmails","\n{I have a few minutes before my train arrives.  I could check my emails while I wait.|It's kind of my routine to reread my emails before heading in.}\n",s(Je,"notGoingToWork","\n { That's not my station. |}I have to go to {the office|work}{ at Broadway Street Station|}.\n ",s(Je,"firstMeetSkaterDude","\nI've seen this young punk before, riding his skateboard up and down the platform.  He almost ran into me once.  The signs clearly say \"No skateboarding allowed.\"\n---\nOh great, now he's jumping the turnstile.  He probably doesn't even have a ticket.  You know, we've got rules for a reason.  When people like him disrespect them, it's the rest of us who have to pay.\n",s(Je,"BENCH_BUM","\n{Some college kid is sprawled out across the whole bench. I wish he'd move. I'd like to just sit down.\n---\n\"Hi there. Could you sit up please? I'd like to sit while I wait for my train.\"\n---\nHe just ignores me.  Maybe he didn't hear me?\n|\n\"Hey!  I'd like to sit down, please.\"\n---\n\"Fuck off... I.. arghhh...\"\n---\nHe must be drunk.  I don't think he's getting up.\n|\nI guess I'm standing.\n}\n",s(Je,"TRASH_DIGGER","\n{\"Spare some change?\"\n---\nI've seen that guy almost every day for years.  He always asks for money.  I used to give him some, but eventually stopped.  I work very hard to make a living.\n|\nHe's still at it.  Wonder what he thinks he'll find.\n}\n",s(Je,"get_caffeinated_quest_3","\nNo thank you.\n",s(Je,"get_caffeinated_quest_2","\n{This thing stole my quarters.  I want my soda!\n\nI know it's dumb, but I kick the machine so hard my foot hurts.\n---\nOK, calm down Steve.  The hard part is done, just focus on the getting to work.\n---\nWait, I think I hear something...\n---\nA soda dropped out!  Yes!\n\nUgh, this tastes disgusting.  How long has it been in there?\n}\n",s(Je,"get_caffeinated_quest_1",'\n{The "Out of Order" sign is gone. Maybe it will work?\n\nSince I can\'t get my coffee, I might as well get my caffeine fix from somewhere.\n---\nGreat, the button doesn\'t work and it\'s not giving my change back. Damn.\n|\nThe "Out of Order" sign might be gone, but I know better.\n}\n',s(Je,"sodaMachineFixed",'\nWow, the "Out of Order" sign is gone. Did they actually fix it?\n',s(Je,"sodaMachineBroken","\n{An \"Out of Order\" sign is stuck to the front.  This thing has been broken since I moved here.\n\nNot that I've had a real hankering for a soda, but it's just kind of annoying.\n|\nIt's out of order.\n}\n",s(Je,"SODA_MACHINE","\nI wonder how long the cans have been in that old thing?\n",s(Je,"LOUD_PAYPHONE_LADY",'\n{\n"I\'ve been here for 30 damn minutes!  When the hell are you going to help me out?!"\n---\nShe sure seems upset.\n---\n"HOW THE FUCK ARE YOU GOING TO CALL ME BACK?! I\'M ON A FUCKING PAYPHONE, YOU IDIOT!"\n---\nWow, you\'d think people would try to take care of these matters at home. Yeesh.\n|\nI want to stay very far away from her.\n}\n',s(Je,"COFFEE_CART","\nIt's closed. I hope Carl comes back.\n",s(Je,"coffeeCartFriday","\nHuh, that's strange.  It's closed.  I really need my coffee.  Today of all days!\n",s(Je,"coffeeCartThursday",'\n{Instead of Carl, there\'s some young lady behind the stand, looking at her phone.\n---\n"You\'re not Carl."\n\n"Nope. Was called in last minute. Guess his wife just went into labor or somethin\'. Can I get you anything?"\n\n"Carl\'s married?"\n\n"Guess so,  I don\'t know the guy. You getting something or not?"\n\n"Sure. Coffee. Black."\n\n"Here you go. See ya."\n|I miss Carl.}\n',s(Je,"coffeeCartWednesday",'\n{"Morning Steve.  You alright?"\n\n"Fill it up to the top, Carl. I\'m going to need every last drop today."\n\n"You got it.  Take it easy Steve. Don\'t want to work too hard."\n\n"Easy for you to say, Carl. But I\'ll try. Thanks!"\n|I\'ve got plenty already, and plenty of work to do too.}\n',s(Je,"coffeeCartTuesday",'\n{"The usual for you today, Steve?"\n\n"Yes please."\n\n"Enjoy."\n|"Need anything else?"\n\n"No, I\'m fine."}\n',s(Je,"coffeeCartMonday",'\n{Carl runs the little coffee stand at my local station.  The coffee is decent, and it\'s nice to see his smiling face each morning.\n---\n"Morning, Carl! Can I just get the usual?"\n\n"Sure thing, Steve. That\'ll be a buck twenty five."\n\n"Here you go, Carl, exact change. Thanks. Have a good one."\n\n(Coffee added to your inventory)\n|"See you tomorrow."|"See you tomorrow."|"Don\'t miss your train."}\n',s(Je,"checkEmails","\n{There's no service, but I can view my emails.\n---\n|}\n{PLAYER.day=1?\n    From: Jason Harris\n    To: Steve Perkins\n    Sent: Sunday, 4:00 pm\n    Subject: I've Got a Job for You\n\n\n    Steve,\n\n    I've got something big for you.\n    We landed some new clients.  The boys up stairs want want to wow them with a new proposal.\n    You're one of our senior agents and you've been in the department for, what, 6 years?\n    I need you to work on this and really make it shine.\n    Come by my office first thing Monday morning.\n\n    Jason Harris\n    District Sales Manager\n    In Your Hands Insurance, Inc.  All rights reserved.\n---\n    -Reply -\n\n    From: Steve Perkins\n    To: Jason Harris\n    Sent: Sunday, 4:01 pm\n    Subject: RE: I've Got a Job for You\n    \n    Dear Mr. Harris,\n    I've actually been with the company for eight years, but no need to worry, sir. I'm happy for the \n    opportunity. I've got a few big ideas that I've been wanting to try out.\n    I'll be there bright and early, sir.\n    \n    Steve Perkins\n    Insurance Agent\n    In Your Hands Insurance\n---\n    From: Janice Franz\n    To: Steve Perkins\n    Sent: Monday, 6:05am\n    Subject: Job Opportunity\n    \n    Hi Mr. Steve Perkins\n\n    My name is Janis and I'm reaching out on behalf of Embrace Insurance. I came across your resume\n    in our system and I believe you would make a perfect fit for our team here at Embrace Insurance.\n    If you're looking for a job change or would just simply like to see what your options are we would\n    love to set up a meeting with you and see what your future could hold.\n\n    We look forward to your response!\n    \n    Janis Franz\n    Assistant Director\n    Embrace Insurance\n}\n{PLAYER.day=2?\n    From: Jason Harris\n    To: Steve Perkins\n    Sent: Monday, 6:26pm\n    Subject: Good Things!\n\n    Steve,\n\n    I like a few of the ideas that you brought to me this morning.  But I just got word that our clients are\n    pushing up the meeting and will be here on Friday! You're going to have to put this thing in high gear, Steve.\n    I can't hand them half assed work.\n\n    Don't let me down.\n\n    Jason Harris\n    District Sales Manager\n    In Your Hands Insurance, Inc.  All rights reserved.\n---\n    -Reply-\n\n    From: Steve Perkins\n    To: Jason Harris\n    Sent: Monday, 6:32pm\n    Subject: RE: Good Things!\n\n    Dear Mr. Harris,\n\n    Thank you for the update.  I'll do my best, but Friday is a little soon isn't it? I just want to be able to\n    put together something that will really help our customers.  I'll have to cut a lot of the ideas we spoke about.\n    But I'll do my best, sir.\n\n    See you tomorrow, Mr. Harris\n\n    Steve Perkins\n    Insurance Agent\n    In Your Hands Insurance\n---\n    From: Henry Thorne\n    To: Steve Perkins\n    Sent: Monday, 8:25pm\n    Subject: Stevey!\n\n    Hey Steve!\n\n    How's it going? Long time no talk! Just checking in with you and letting you know I'm going to be\n    in the city in a few days. It's supposed to be a business trip and it's just for a day, but I\n    thought it's be nice to drop by and see how things were and maybe grab a few drinks somewhere.\n    I know things have been difficult since we last talked. Just let me know when you're free and I'll\n    make something work.\n\n    See you soon!\n\n    Henry\n\n}\n{PLAYER.day=3?\n\n    From: Jason Harris\n    To: Steve Perkins\n    Sent: Tuesday, 4:48pm\n    Subject: No good\n\n    Steve,\n\n    What you handed me today WON'T work. The Premiums we offer will NOT cover these plans. Half of these\n    seem like life quality expenses. We need to think about the bottom dollar here, Steve. \"Pet Insurance\n    Plan\", \"Kidnap/Ransom Insurance\", \"Divorce Insurance\"? These benefits not only expose us to\n    unwarranted risk of loss, but also far out weigh our customers premiums. You've got to do better than\n    this. We're two two days from the proposal meeting. Do NOT fuck this up.\n\n    Put something better together tonight and get it to me in the morning. You're running out of time.\n\n    Jason Harris\n    District Sales Manager\n    In Your Hands Insurance, Inc.  All rights reserved.\n---\n    -Reply- (unsent)\n\n    From: Steve Perkins\n    To: Jason Harris\n    Sent: Tuesday, 5:00pm\n    Subject: RE: No good\n\n    Dear Mr. Harris,\n\n    Sir, I have to disagree. I feel that these plans are essential for our customers. If you'd just\n    look over the papers I sent you about the\n}\n{PLAYER.day=4?\n    From: Jason Harris\n    To: Steve Perkins\n    Sent: Wednesday, 4:27pm\n    Subject: (Subject)\n\n    Steve, our clients are going to be here tomorrow whether you're ready or not. You're going to need\n    to push harder. I don't care what you have to do to put this thing together, just get it done.\n\n    Bring me what you have in the morning.\n\n    Jason Harris\n    District Sales Manager\n    In Your Hands Insurance, Inc.  All rights reserved.\n---\n    From: Henry Thorne\n    To: Steve Perkins\n    Sent: Thursday, 5:45am\n    Subject: Today?\n\n    Hey Steve,\n    I'm in the city today and I haven't heard back from you. I'm sure you're busy, but it would \n    really be nice to see you while I'm down. My plane leaves tomorrow, so today is probably it. You \n    can call me at my old number if you get this in time and we can plan something out. It hasn't \n    changed.\n\n    Hope to talk to you soon.\n}\n{PLAYER.day=5?\n    From: Jason Harris\n    To: Steve Perkins\n    Sent: Friday, 6:00am\n    Subject: where the hell are you?\n\n    I want to run through the presentation once before the clients are here.\n    Get your ass down here right away.\n\n    Jason Harris\n    District Sales Manager\n    In Your Hands Insurance, Inc.  All rights reserved.\n---\n    From: Janice Franz\n    To: Steve Perkins\n    Sent: Friday, 6:09am\n    Subject: RE: Job Opportunity\n\n    Hi Steve!\n\n    Hope you're having a great day!  I didn't hear back from you.  I just wanted to reach out to you\n    one more time to set up a quick chat.  How's Tuesday morning next week?  Let me know either\n    way.  I'm excited to talk to you!\n\n    Have a wonderful weekend.\n    \n    Janis Franz\n    Assistant Director\n    Embrace Insurance\n}\n",s(Je,"firstInteractionWithCommuter1","\n{Another commuter waiting on the train.  I say hello and she says hello back.\n|I think one hello is enough when talking to complete strangers.}\n",s(Je,"title_intro","\nSteve,\n---\nSteve,\n\nI've got something big for you.\n---\nSteve,\n\nI've got something big for you.\n\nCome by my office first thing Monday morning.\n---\n![title](img/title.jpg)\n",Ve)))))))))))))))))))))))))),Xe=s(Je,"ratty_hat_man_advice_5","\n\"Hey you!  I've been on a wild goose chase all over this subway system following your nonsense advice.  Have you seen my briefcase or haven't you?\"\n---\n\"Briefcase?  I haven't heard of any briefcase.  You really shouldn't talk to strangers.  Now if you'll excuse me, I have to go.\"\n",s(Je,"ratty_hat_man_advice_4",'\nOh no, not again.\n---\n"Brief case.  Thief\'s face.  Safe place.  Iris Lake."\n',s(Je,"ratty_hat_man_advice_3",'\nThere he is again.\n\n"Proposal.  I\'ve got a proposal.  A proposal to make."\n\n"Ok, I\'ll bite."\n---\n"My friends, they know.  Samual, Walter and Mark.  Go to them.  Say hello."\n',s(Je,"ratty_hat_man_advice_2","\nHey, it's that guy again.  Oh no, he saw me.  Now he's approaching me.\n---\n\"I have your case.\"\n---\n\"Wait, what?\"\n---\n\"Forty third.  That's where it's at.  That's where it's all at.\"\n\nAgain, he dashes away.\n",s(Je,"ratty_hat_man_advice_1",'\nHe\'s staring at me from across the room and mumbling to himself.\n\nWait a minute, did he just say something about a briefcase?\n---\n"Excuse me, I thought I just heard you mention--"\n\nHe holds up his finger with the utmost importance.\n\n"Holds your things.  That\'s what you need.  A place to hold your things.  Where are your things?"\n\n"Um... my briefcase was stolen.  Do you know something?"\n---\n"Ah... briefcase!  Yes.  West Mulberry.  East.  No, West.  Mulberry.  Yes."\n\n"Are you saying you saw it at West Mulberry?"\n\n"West Mulberry.  West Mulberry."\n\nWith that he turns and scampers away.\n',s(Je,"MOTHER","\nThe kid has stopped screaming and the mother looks very relieved.  So am I.\n",s(Je,"giveSodaToScreamingChild",'\nHere\'s your soda. I didn\'t know what flavor to get."\n\nWithout hesitation the child snatches the can from my hand and starts guzzling it down.\n\n"Thank you so much!  Keep the change.  Nice to know there are still decent people around."\n',s(Je,"getSodaForScreamingChild","\nI put my dollar in and a soda and some change comes out.  Hope it's the right flavor.\n",s(Je,"offerToHelpScreamingChild",'\n{"Hey, I could go get you a soda if you want..."\n---\n"Oh my God, yes, please!  Here, take a dollar to buy it.  Thank you!"\n|"Did you find any soda?"\n\n"Um... not yet."\n|"So are you going to get me a soda or not?"\n}\n',s(Je,"meetingScreamingChild","\nThe child is screaming his head off.  It's actually very annoying.  Even his mother looks like she can barely take any more of it.  She looks at me apologetically.\n---\n\"I'm sorry, he won't calm down.  He wants a soda, but I can't leave this spot because I'm waiting for someone.\"\n---\nThis situation seems bad for everyone.\n\n(Talk to the mother again if you want to offer help.)\n",Ve)))))))))),Qe=s(Je,"ridingTheTrain","",s(Je,"checkMap","",s(Je,"goToLinePlatform","",s(Je,"goToLineTurnstile","",s(Je,"goToLobby","",Ve))))),nt=s(qe,"meetConductorFirstTime",'\n"No one is supposed to be back here right now! What are you doing here?"\n\nNow that he\'s close up, he seems a lot different than the other security guards. His uniform even seems a little too big for him.  He does look flustered, though.\n---\n"I-I\'m sorry, sir. {INFRACTIONS_GREEN_BUTTON.pressed? The computer was turned off.  I just pressed the button to turn it on|I followed all of the steps like the poster said}, but the whole thing broke down."\n\nHe seems real upset.\n---\n"That\'s typical.  Everything around here is breaking down under too much load."\n\nHe looks in the room as if expecting to find someone else.\n---\n"I\'m sorry pal, I didn\'t mean to yell at you.  They aren\'t supposed to be taking people here today.  It\'s closed.  For pest control spraying."\n\n"Spraying?"\n\n"Look, just go.  The exit is down the hallway behind me.  Three lefts and a right and you\'re out.  I\'ve got to take care of something."\n---\nI guess I got off easy.  I didn\'t see any rats or bugs or anything in there though.\n---\n"Hey, buddy!  Hang on a minute."\n\nUh oh.\n---\nHe holds something out to me.\n\n"Here, take this.  Don\'t want you to end up back here again."\n---\nIt\'s an Orange Line pass!  That\'s great.\n\nWhat a strange guy.\n',s(qe,"escapingInfractionRoom","\nIt's open! The reseting computer must have reset the locks. Seems like a flaw in the design, but I'll take it.\n---\nThe door opens up to the maze of hallways. I think I can remember the path back to the station platform.\n\nIt was left, left, right, straight till the water cooler, then another left, or was it right--\n---\n\"Hey, what are you doing back here?\"\n---\nShit, another security guard.\n\nHe's looking right at me.\n\nHe looks pissed...\n",s(qe,"breakInfractionAutomationSystem","\nMaybe it will start if I press this.\n---\nNothing happens.\n---\n...\n---\nOh no.  The computer is making a terrible sound.\n---\nMaybe it's starting up.\n---\nNope.  It's rebooting.  But it looks like it froze.\n\nI'm stuck! What did I do? What did I do?\n",s(qe,"INFRACTIONS_PRINTER","\nIt's an old printer attached to the computer. It looks like it barely works.\n",s(qe,"infractionAutomationStep3","\n{Nothing's coming out! Did something break?\n---\nSomething must have went wrong because the computer seems to be rebooting!\n\nDamn it! Why isn't anything working!  What do I do now?\n|\nThe whole damn system is broken and I'm stuck!\n}\n",s(qe,"INFRACTIONS_COMPUTER","\n{INFRACTIONS_ROOM_DOOR.infraction_step=0?  The computer doesn't seem to be on. But there is a [green lit button](INFRACTIONS_GREEN_BUTTON) on it's front.}\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=2?  Everything is sent and I just have to get my printed ticket. I wonder how much this is going to cost me.}\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=3?  It's stuck on the blue screen of death! }\n",s(qe,"infractionAutomationStep2","\nI can see all of my personal info on the dusty computer monitor. My name, age, address. Everything. It all seems up to date, though that picture certainly isn't.\n\nI'll just going to hit send and get this over with.\n---\n...\n---\nThis thing is sure taking a long time.\n---\nThere it goes. Now it's asking me to select my violation. \"Fare Evasion\" sounds so official.  I hope this doesn't go on a permanent record. I don't know if I'll ever live this down.\n---\nThere. It's sent. How long will I have to wait now for this to print?\n",s(qe,"INFRACTIONS_CARD_READER","\n{INFRACTIONS_ROOM_DOOR.infraction_step=1?  I can already see my personal information on the computer screen.  No need to scan my Red Line Pass again. }\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=2?  They already  have my info.  I don't want to get fined again! }\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=3?  The computer is still rebooting and the whole system is broken. Damn it! Why isn't anything working!\n}\n",s(qe,"infractionAutomationStep1","\nWell, It's a card reader, and the only card I have on me is my Red Line Pass. It's worth a try.\n---\n*BEEP*\n---\nAha! The computer seems to be booting up... very slowly. Where did they dig up this antique? It makes our computers at the office look new. As long as it's working I guess.\n",s(qe,"INFRACTIONS_INSTRUCTIONS_POSTER","\n{_Violators of the law! Due to high volumes of fare evasion, vandalism, and littering, all minor infractions will be dealt with by our new automated system. Please read carefully the following instructions as Transit Authorities Fine Distribution has recently changed:_\n---\n_Step 1: Approach computer terminal in center of room (WARNING: Do not press the big green button)._\n---\n_Step 2:  Scan a state issued ID, Transit Line Pass, or input social security number and verify the listed personal information. System will power on after input._\n---\n_Step 3: Select minor infraction the violator is accused of (WARNING: you are being monitored, any attempt to supply misinformation will be met with harsh consequences!)._\n---\n_Step 4: Press send. The information provided will now be processed and verified by a member of Transit Authority. Whilst this is happening the violator may fill out a Violation Dispute Document on the computer or a Violation Apology Document (WARNING: All documents are subject to be read at Transit Authorities earliest convenience)._\n---\n_Step 5:  If all the information is correct, a fine ticket will print out next to the computer and the door will be unlocked. Once the ticket has been removed the violator may leave the Detention Room._\n---\n_Thank you and have a nice day!_\n---\nWow, this seems overly complicated. I'm never going to break the law again.\n|\n_Violators of the law! Due to high volumes of fare evasion..._\n\nBlah, blah blah... let's see, scan your pass... check the computer... print ticket.\n\nHmmm.\n}\n",s(qe,"INFRACTIONS_ROOM_DOOR","\n{It's locked. I'm trapped. What am I supposed to do? And how do I get out  of here? They can't keep me in here like this.\n---\nCan they?\n|{?\nIt's locked. \n|\nStill locked.\n|\nMaybe if I jiggle the handle a few more times...\n|\nNope. It's locked.\n|\nWait a second. I think I got it! Oh, no. Just kidding. Still locked.\n}}\n",s(qe,"TICKET_INSPECTOR",'\n"Where am I!?"\n\n"This is the Central Guard Station at St. Mark\'s. Follow the instructions on the poster."\n\n"But--"\n---\nThe steel door slams shut before I can get another word out and he is gone.\n',s(qe,"caughtOnOrangeLineHeadingToOther","\nOh no, I got on the wrong train!  Mark said 73rd Street Station, how did I mess this up?\n---\nIt's ok, take a few breaths.  I'll just get off at the next stop, then catch the right train.  Then I can grab my briefcase, hopefully everything is still in there, and I can buy a ticket back to my station and get to work and give the presesntation and get my promotion and everything will be fine.\n---\n\"Excuse me sir, can I see your ticket or pass please?\"\n---\n...\n---\nOh.  Shit.\n",s(qe,"caughtOnOrangeLineHeadingTo73rd","\nI'm so close.  This has been one crazy morning, but I'll just grab my briefcase now, hopefully everything is still in there, and I can buy a ticket back to my station and get to work and give the presesntation and get my promotion and everything will be fine.\n---\n\"Excuse me sir, can I see your ticket or pass please?\"\n---\n...\n---\nOh.  Shit.\n",s(qe,"jumpTurnstileAfterTaklingToMark","\nOk, I've done this once before, I'll just do it the same way the skater punk showed me.  Nice and easy...\n---\nMade it!  That wasn't so bad.  I'm starting to get the hang of it.\n",s(qe,"pleasantriesWithMark","\nHe's still describing the broom closet...\n",s(qe,"markTellsAboutBroomCloset",'\nHis clothes are covered in dirt and holes. He sits on the tile floor with a sign.\n\nThe sign reads, "Hi, I\'m Mark. Anything helps. God Ble$$."\n---\nWell, that was easy.\n---\nI quickly explain the situation, but he doesn\'t seem to be following any of it.\n\nThis was a waste of time!\n---\n"Did you say briefcase?"\n\n"Yeah, it was stolen.  I was told you might have found it."\n\nNow that I say it, it sounds really dumb.  Why did I think this would work?\n---\nHis eyes go blank for a few moments, then with a sudden jolt, he\'s back again.\n\n"Yeah, bout 10 minutes ago. One of the rail kiddies was lugging around this real fancy thing."\n\n"Oh my God, really?! Did you say rail kitty?  Never mind.  Tell me, where did he go?"\n---\n"Hold your horses. He hangs out with a real rough group, bunch of nabbers and grabbers. But ol\' Mark\'s seen where they horde their stash.  An old broom closet at 73rd Street Station, lock doesn\'t even work--"\n---\n"That\'s great, thanks!  Gotta go!"\n\nI leave the bum still talking to himself about the broom closet.\n',s(qe,"GREEN_SUIT_MAN","\nHis suit looks like it costs more than my rent.  I'm not going to bother him.\n",s(qe,"SPIKY_HAIR_GUY",'\n{{PLAYER.find_briefcase=2?"Excuse me, Mark?"\n\n"Sorry, bud. Wrong guy."\n|\nThat\'s not Mark.\n}\n|\nThat\'s not Mark.\n}\n',s(qe,"SHIFTY_MAN","\n{He stands in the shadows of the platform away from the crowds and he seems to jump at every loud noise. This guys has to be up to something.\n|\n{PLAYER.find_briefcase=2?\"Excuse me, sir? Your name wouldn't happen to be Mark would it?\"\n---\n\"Beat it, shit head. I'm waiting for someone.\"\n|\nHe's still up to no good.\n}\n|\nHe's still up to no good.\n}\n",s(qe,"ODD_KEY","\nI wonder what this is for. It's probably just junk.\n",s(qe,"TRASH_CAN_CAPITOL_HEIGHTS","\nThere's nothing but junk in here. Just as it should be.\n",s(qe,"findKeyInTrashCan","\nIt's just a trash can. Nothing important here.\n---\n...\n---\nWait. There's something inside.\n\nI better not regret this...\n---\nThis is a strange key.  I think I'll hold onto it. Just in case.\n",s(qe,"followSkaterDudeToCapitalHeights","\nI just broke the law. I'm riding without a ticket or a pass.  This isn't right.\n---\nIs that guy staring at me? He knows I jumped. He knows I did something wrong. Everyone knows. I have to get out of here, I can't breath. I--\n\n\"Hey, man. Chill the fuck out.  You don't want to draw attention to us.\"\n---\n\"Speaking of which... I can't be seen around Capitol Heights, so you're gonna have to do this next part alone.  Just look for Mark.  You got that?  Mark.\"\n\nThe train approaches our station.\n---\n\"Wait, how will I know what he looks like?\"\n\n\"I'll be waiting for you down at 104th Street Station.  Come find me there when you find your briefcase.  And don't try running off without paying me. I got eyes and ears everywhere down here, man. If you don't find me, I'll find you.\"\n---\nHe shoves me off the train onto the platform.\n",s(qe,"jumpTurnstileWithSkaterDude","\nHere goes nothing...\n",s(qe,"followSkaterDudeToOrangeLine","\n\"My guy's at Capitol Heights Station.\"\n\n\"But I don't have tickets for the orange line!\"\n---\n\"You don't need any of that. Just hop the stile. It don't cost a thing.\"\n\nWithout another word he's over the turnstile in one swift movement. No alarms sound, no security guards running.\n\nNothing.\n\n\"Come on, man. It ain't nothin. Hurry up, train's about to leave.\"\n---\nHe makes it sound so easy. But I can't just break the law.  This punk's used to it, but what if I get caught?\n\nThen again what if I don't get my proposal back?\n",s(qe,"forcePlayerToFollowSkaterDudeToCapitolHeights","\n\"Yo, that's the wrong train!  We're headed to Capitol Heights.\"\n",s(qe,"forcePlayerToFollowSkaterDudeOntoOrangeLine",'\n"Hey! Where you going? We gotta ride the orange line."\n\n"But I don\'t have a ticket."\n\n"So?"\n',s(qe,"helpFromSkaterDude",'\n{Aw damn!  It\'s that skater punk that\'s always goofing around my station.\n\nHe lights up a cigarette even though this is clearly a no smoking area, and gazes at me with smug amusement.\n---\n"I\'m not crying.  I\'m just... under a lot of stress."\n\n"Something of yours get snatched?"\n\n"Why would you say that?"\n---\nHe flicks ashes onto the floor.\n\n"Seen a few suits like you dragging around the pig sty. Not sure why, it\'s been closed all week.  None of \'em cried though."\n---\n"I wasn\'t-- never mind.  Did the others get any help?"\n\n"Nah, cops are never any help.  Especially today, they\'re all hung up at Broadway Station for some reason.  Your junk\'s probably been dumped in a trashcan somewhere.  That\'s what usually happens."\n\n"That\'s great!  Maybe we can still find it."\n---\nThe punk takes his time finishing off his cigarette before finally responding.\n\n"Doubt it, the bums will beat us to it.  What\'s so important about it anyway?  Just buy another one."\n\n"Damn!  No, I need to get it back at all costs. It\'s got a very important presentation in it."\n\nHe looks at me with a glimmer in his eye.\n---\n"Well...  I happen to know the bum\'s ringleader.  I could take you to him."\n\n"Yes!  Please!"\n\n"What\'s it worth to you?"\n---\n"What do you mean, you want cash?  I guess I could give you a hundred--"\n\n"A thousand."\n\n"No way, I--"\n\nHe jumps on his skate board and starts rolling away.\n\n"Wait!  OK, a thousand.  But not until I see some results.  Who do I talk to?"\n\n"Follow me. We got a train to catch."\n---\nHe rides off on his skateboard over to the orange line.\n|\n"Let\'s go, orange line\'s this way."\n}\n',s(qe,"findingSecurityDepotClosed","\nIt's closed. Of course it's closed! The one time I need the subway security and they're off doing God knows what.\n---\nWhat am I going to do? Everything was in that Briefcase.  My wallet, my reports, and worst of all my proposal! The key to finally turning my life around. Without it I may as well just walk in front of the next train.\n---\nI followed the rules. I pay my taxes on time. I make sure to do everything right. And people can still just up and break the law and nobody does a thing about it. Shitty people run rampant while people like me are left to suffer.\n---\nMr. Harris is going to kill me. What the hell am I going to do?\n---\n...\n---\n\"Hey, man. Are you crying?\"\n\nWho said that?\n",s(qe,"panic","\nWhy is this happening to me?!  I always follow the rules.  I work hard.  But I get walked over all my life.  And now some crook is going to make me miss my presentation and my promotion!  It's just not fair.\n---\nI'm going to have to take matters into my own hands.  Maybe I can find the thief and arrest him or something.\n---\nThis is a bad idea.\n\nI better just report this to the authorities somewhere.\n",s(qe,"ignoreGuardsAdvice","\nIf those guards at Metro Center can't help me, what are the chances that any of the other guards will be any better? Maybe I can find the thief on my own and make a citizens arrest. Or something.\n---\nThis is a bad idea.\n",s(qe,"followGuardsAdvice",'\n{"Someone at the Security Depot better be able to help me. I have to get my proposal back!"|}\n',s(qe,"SECURITY_OFFICERS",'\n"Have a nice day sir."\n',s(qe,"tellCommuter1AboutStolenBriefcase",'\n{COMMUTER_1.friendliness>0?\n{"Did you see a man run by with my briefcase I was carrying? He just robbed me."\n---\n"Oh my God, that\'s terrible! I think I saw someone with a briefcase like yours head for the trains. But it\'s hard to tell, there\'s so many of you business types with similar briefcases."\n\n"Oh man, I\'ve got to get it back somehow.  I\'m so screwed."\n\n"I hope you find it!"\n|\n"Did you find it yet?"\n}\n|\n{"Pardon me, miss! Did you see a man run through here with a briefcase?"\n\n"Um, yes? There\'s a lot of those around."\n---\n"No, he was a thief! He took my briefcase!"\n\n"Sorry, sir. I can\'t help you."\n---\nUseless!\n|\nShe\'s no help.\n}\n}\n',s(qe,"tellOfficersAboutStolenBriefcase",'\n{\n"Help! Help! I\'ve been robbed! Some crook just took my briefcase!"\n\n"I\'m sorry, but the exit is closed sir--"\n---\n"I don\'t care about that! My presentation is gone!  I need you to do something!"\n\n"Please calm down, sir. We need people to clear this station. Please take any concerns you have to the Security Depot at Spring Hill Station. We apologize for any inconvenience and hope you have a nice day."\n---\n"But I can\'t go to work with out it. My life will be over!"\n\n"Have a nice day, sir."\n---\nThey aren\'t even listening to me.  Why aren\'t they helping me?\n\nI guess I can check out the Security Depot.  Maybe they\'ll actually do something.\n|\n"Have a nice day sir."\n}\n',s(qe,"briefcaseStolen","\nJeez!  Someone just ran into me.\n\n\"Ow! Hey! Watch where you're going!\"\n---\nWait. Where's my briefcase?\n---\nNo. No no no no no no no no no. No.\n---\nI've been robbed... My presentation... It's gone!  I... I need to get help. Now.\n",s(qe,"noticeGirlInYellow","\nI can't help noticing this girl.  There's something about her, like she doesn't belong.  Her dress is the brightest thing down here.  She sticks out like a dandelion growing through the cracks in the sidewalk.\n---\nThe crowd closes around her for a second, blocking my view.  I wait for a minute, but she seems to have disappeared.\n---\nI only saw her for a split second.  Did I imagine her?\n",s(qe,"askCommuter1AboutDelay","\n{COMMUTER_1.friendliness>0?\n{It's that woman I saw on Monday.\n\n\"Excuse me, miss? What's going on? Why isn't anyone moving?\"\n\n\"Oh, Hi! Those security guards locked the gates. They're not budging. All they'll say is that there is some incident above ground and they're not letting anyone through.\"\n---\n\"But I can't stay here. I have to get to work.  I have an important presentation today.\"\n\n\"I know.  If I'm late one more time I'm bound to get fired.  I've got to figure out some other way out of here.\"\n|\nLooks like she's just as stuck as I am.\n}\n|\n{\"Excuse me, miss?\"\n|\nShe's ignoring me. The nerve of some people.}\n}\n",s(qe,"askOfficersAboutDelay",'\n{\nOh good, some officers are here.  I can find out what the hold up is.\n\n"Excuse me, officers? I--"\n\nThey cut me off mid sentence.\n---\n"This exit is closed sir. There\'s an incident going on above ground and we\'re not letting anyone through \'till we get the all clear. You will have to wait like all the others."\n---\n"But I work up there! I\'m going to be late if I don\'t--"\n\nAgain they cut me off.\n|}\n"If you are unable to wait, take the train to the next stop and walk from there."\n\n"But I--"\n\n"Have a nice day sir."\n',s(qe,"leavingBroadwayStationPrematurely","\nThis is my stop, where else would I need to go?\n",s(qe,"ANGRY_CROWD","\n{BRIEFCASE.location=PLAYER?\n{What's going on over here? No one seems to be moving and everyone seems pretty angry.\n\nSome people are shouting about the doors being locked.\n---\n|}\nI can't seem to push my way through all these angry people.  Now what?\n|\n{They haven't budged.  Apparently no one saw me get robbed.  Or they just don't care.\n---\nThe mob seems to be getting angrier. I hope they open those doors soon or this could get ugly.}\n}\n",s(qe,"EXIT","\n{ANGRY_CROWD.location=BROADWAY_STREET? There's a big crowd of people blocking my view, but it looks like the exits have their shutters down.  What the hell is going on here?|It's still locked.}\n",s(qe,"delaysAtBroadwayStreetStation",'\nEverything\'s fine. It was just a little detour, I\'ve still got time. At least I\'m wide awake now.\n---\nThe loud speaker buzzes.\n\n"Attention passengers, due to some unforeseen events you may experience delays at Broadway Street Station.  Thank you for your understanding and have a nice day."\n---\nWhat? What do they mean "delays?"\n',s(qe,"notGoingToWorkAgain","\nI've got to get to Broadway Street Station.  Any more wrong stops and I'm really going to be late.\n",s(qe,"getMap","\n{It's a map of the whole subway.{BRIEFCASE.location=PLAYER?   It's only 6:15. If I leave here now I should be able to make it to work on time.}\n---\nThere's also little map pamphlets here as well.  I'll take one with me just in case. Don't want to get lost again!\n\n(check MAP by pressing \"M\")\n|}\n",s(qe,"askMaintenanceManForDirections","\n{\"Excuse me, sir! How can I get to Broadway Street Station as quickly as possible?\"\n---\n\"Damn it, can't you see I'm busy?  Go and check the damn map if you're lost. It's that big map looking thing on the wall over there.\"\n---\n\"Uh, okay. Thank you.\"\n|\nHe's busy and I don't want to get yelled at again.\n}\n",Ve))))))))))))))))))))))))))))))))))))))))))))))),et=s(qe,"tryToHangRedundantDogPosters","\nI've got a few posters left, but this station already has one.\n",s(qe,"tryToHangDogPosterOnWrongLine","\nThat lady in the pink poncho wanted me to hang these on the Red line.\n",s(qe,"putUpMissingDogPoster","\nThis station doesn't have a poster yet.  Here, I'll hang one up now.\n",s(qe,"lookAtHangingDogPosters","\n{How sad!  He must be so scared down here.  |I wonder if he's been found yet.}\n",s(qe,"getDogPostersFromDistressedWoman","\nShe's wearing a pink poncho, maybe she's expecting rain in the subway?\n\nOh no, she's walking towards me.  I look away.\n---\nDidn't work, she's talking to me.  Very quickly, I can't understand what she is saying. Something about a missing dog.\n---\nShe shoves a handful of posters at me.  She wants me to hang them up on the Red line.\n\nBefore I can respond she dashes after someone else.\n",s(qe,"tryingToCallBossWithCellphone","\nI still don't have any service down here.  I'd have to go above ground to make a call.  I guess I could do that, but I'm in no hurry.  And it's probably raining.  And this is my big opportunity to use a payphone for once.\n",s(qe,"ponderingCallingBossOnTrain","\n{Mr. Harris is going to hate me.  I'm really not looking forward to calling him.|}\n",s(qe,"needCoinsForPayphone","\n{Hmm, there's no dial tone.\n---\nOh yeah, you've got to pay for these things.  Shoot, and I don't have enough change.  No wonder they're disappearing.\n---\nGuess I'll have to ask around for change. I mean, how hard can it to be to get 50 cents?\n---\nI'm not really in any rush to talk to Mr. Harris anyways.\n|\nIt costs 50 cents to use. Better start begging for change.  I'm going to need the practice.\n}\n",s(qe,"checkBroomClosetButNotBriefcase","\nI finally made it. This is my last chance. It has to be in here.\n---\n*Click*\n---\nWell, it's unlocked.\n---\n*Creeeeeeaaak*\n---\nIt's dark, but I don't need to flip the switch to see that there's nothing in here but cleaning supplies.\n\nOf course there's nothing in here. What was I expecting? \n---\nDamn I wanted it to be true.\n---\n...\n---\nMy proposal is gone, and without that, no promotion. Hell, who am I kidding?  It's way past 6:30, I probably don't even have a job anymore.\n---\nI guess it's time to call Mr. Harris and tell him what happened.  I better find a phone.\n---\nDamn, and I was so close to that promotion. I would have had it made.\n",Ve))))))))),tt=s(qe,"inspectPasses","\nI have a Red Line Pass{ORANGE_LINE_PASS.location=PLAYER? and an Orange Line Pass}.\n\n{It gets me anywhere on the Red Line, but I really only use it to get to work and back home.|}\n\n{ORANGE_LINE_PASS.new?\nI got the Orange Line Pass from the security guard guy.  Now I can ride the Orange Line without getting caught.\n}\n",s(qe,"PAYPHONE_SEVENTY_THIRD_STREET","\nIt's a payphone. Not much use for those things anymore with everyone having cellphones these days.\n",s(qe,"BROOM_CLOSET","\nIt's just a broom closet. Plenty of toilet paper and cleaning products, but no briefcase.{ If I ever see that Mark guy again, I swear, I'll...  I won't do anything. I'll probably be squatting next to him in a week or so.|}\n",s(qe,"SECURITY_DEPOT_SPRING_HILL_STATION","\nIt's closed. It's good to see where my tax dollars are going.\n",s(qe,"MAINTENANCE_MAN","\nHe's still at it, fixing the... well, whatever it is he's fixing.\n",s(qe,"MARCYS_PIZZA","\nI haven't eaten here before, but it looks popular.  It's packed, even this time of day.\n",s(qe,"BUSTLING_CROWD",'\n{Wow, this station is crowded. Everyone seems to be rushing off to somewhere.|\n{?"Hey, watch it!" |\n"Excuse me. Pardon me."|\n"Make way, I\'ve got a train to catch."\n}}\n',s(qe,"BROKEN_PAYPHONE","\n{Now that everyone's got cell phones, there's not much use for those things any more.  That's just as well, it's |Well, it used to be a payphone. Now it's } just a gutted payphone stand with stray wires poking out.\n",s(qe,"MUSICIAN","\nHe's playing an old cracked violin with a hat out in front of him for spare change.\n\nThe music sounds nice, but I wouldn't call that a real job.\n",s(qe,"DOLLAR_BILL","\nA wrinkled dollar bill.\n",s(qe,"CHANGE","\nI have 0.{CHANGE.amount} cents.\n",s(qe,"SODA","\nThis soda is probably really old and gross.\n",s(qe,"SCHOOL_CHILDREN","\n{A few children play some kind of game on one of the benches. One kid stands tall on the bench laughing and jeering while the other children scamper around below, clawing and grabbing at him.\n---\nAn unspoken rule seems to keep them from just climbing on the bench and pushing him off. But after a few attempts, one of the kids manages to grab his arm and tugs hard, bringing the standing boy down on top of him. A scream, a crash, then laughter and the kids are picking themselves up and scurrying towards the bench again, fighting to see who gets to stand on the bench next.\n---|}\nChildren aren't supposed to be down here unsupervised. And that game looks dangerous. Where are their parents?\n",s(qe,"WOMAN_IN_ODD_HAT",'\n{She\'s dressed very finely and has an air about her that seems to scream "High class." Her hat resembles some kind of bird or a very angry fern.\n---\n"Pardon me, Ma\'am. I--"\n\n"I haven\'t got any change."\n\n"No, I was actually--"\n\n"I haven\'t a clue of the time either. Please leave me alone."\n---\n"I just--"\n\n"Leave me be" she snorts as she turns her back to me.\n\nI guess that\'s that.\n|\nI\'m not going to try to talk to her again.\n}\n',s(qe,"DRINKING_FOUNTAIN","\n{?\nNo.\n|\nNot in a million years.\n|\nI'll never be thirsty enough to risk drinking from that.\n|\nI can see a piece of chewed bubble gum stuck to the spout.\n}\n",s(qe,"MISSIONARIES",'\n{\nOne of them tries to get my attention.\n\n"You look like you\'ve lost something important."\n---\n"Uh... yeah. How did you guess?"\n---\n"You look like all the others, so many people wandering around in this world, looking for themselves.  Well I can help you, I\'ve got this wonderful pamphlet that I\'d like to share with you..."\n---\n"Oh, sorry. I\'ve got to run. My, uh, my train is about to leave."\n---\n"Just take a pamphlet with you!"\n|\nI should have known. I fell right into that.\n}\n',s(qe,"TRASH_CAN_WEST_MULBERRY","\n{?I'm not about to rummage through the trash.\n|\nI've got a weird feeling about this can. Maybe it wouldn't hurt to take a quick look.\n---\n...\n---\nNothing but trash.\n|\nWaste of time.\n|\nWonder who takes out the garbage down here.\n|\nJust garbage.\n}\n",s(qe,"BULLETIN_BOARD","\n{Maybe somebody has posted about my missing briefcase.\n---\nNope, nothing.  Darn.|\nStill nothing about my briefcase, but if I'm ever in need of a house cleaner or want to join a lame garage band, I know where to look.}\n",s(qe,"SOGGY_JACKET","\n{I don't really have time to look at every piece of discarded junk in the subway. My proposal is gone, my life is falling apart.  Maybe I should focus on that.|Gross.}\n",s(qe,"outOfServiceStations","\nPLEASE NOTICE: Normal service disruption is in effect.\n\n{$.name} Station is temporarily out of service.  Please use alternative options.\n\nThank you and we apologize for the inconvenience.\n",s(qe,"jumpTurnstileFail","{?I'm not the type to jump turnstiles.|I don't want to get caught.|Better to stick to the lines I have passes for.}",s(qe,"SAFETY_WARNING_POSTER",'\n"ATTENTION: Pickpockets and thieves operate in this area. Report any suspicious behavior to your nearest Security Guard Station"\n{---\nThat\'s just great.  I wish people would just follow the rules.\n|}\n',s(qe,"COFFEE","\n{PLAYER.day=1?  Carl's Coffee has been fueling me for years. Can't imagine surviving a Monday without it.}\n{PLAYER.day=2?  Mmm, that's good coffee.}\n{PLAYER.day=3?  I'm going to need a barrel of this if I'm going to get this proposal done by Friday. What is Mr. Harris thinking?  }\n{PLAYER.day=4?  It tastes bitter.}\n",s(qe,"GRAFFITI","That's just vulgar.  Why do people have to mess things up?",s(qe,"ORANGE_LINE_PASS","I got this from the security guard guy.  Now I can ride the Orange Line without getting caught.",s(qe,"RED_LINE_PASS","This gets me anywhere on the Red Line, but I really only use it to get to work and back home.",s(qe,"notebookInstructions","\n{I have my notebook with me today to keep track of everything.\n\n(Click the notebook icon or press 'n' to toggle the notebook from now on)\n|}\n",s(qe,"BRIEFCASE","My portable office, all my work is in it.",Ve)))))))))))))))))))))))))))),rt=r((function(n,e,t){for(;;){if("RBEmpty_elm_builtin"===t.$)return e;var r=t.e,o=n,i=s(n,t.b,t.c,s(rt,n,e,t.d));n=o,e=i,t=r}})),ot=t((function(n,e){return s(rt,qe,e,n)})),it=r((function(n,e,t){for(;;){if(!t.b)return e;var r=t.b,o=n,i=a(n,t.a,e);n=o,e=i,t=r}})),at=s(it,ot,Ve,m([Qe,Xe,ze,Ze,nt,et,tt])),st=function(n){return{$:"Just",a:n}},ut={$:"Nothing"},ct=t((function(n,e){n:for(;;){if("RBEmpty_elm_builtin"===e.$)return ut;var t=e.c,r=e.d,o=e.e;switch(a(xe,n,e.b).$){case"LT":n=n,e=r;continue n;case"EQ":return st(t);default:n=n,e=o;continue n}}})),lt=t((function(n,e){return"Just"===e.$?e.a:n})),ht=function(n){return a(lt,"ERROR: can't find content for key "+n,a(ct,n,at))},ft=function(n){return"Ok"===n.$},dt=o((function(n,e,t,r){return{$:"Array_elm_builtin",a:n,b:e,c:t,d:r}})),gt=U,_t=t((function(n,e){return K(e)/K(n)})),pt=gt(a(_t,2,32)),mt=[],Et=u(dt,0,pt,mt,mt),bt=function(n){return{$:"Leaf",a:n}},It=h,yt=function(n){return s(it,He,g,n)},Rt=t((function(n,e){for(;;){var t=a(It,32,n),r=t.b,o=a(He,{$:"SubTree",a:t.a},e);if(!r.b)return yt(o);n=r,e=o}})),Tt=D,Ot=function(n){return n.a},St=t((function(n,e){for(;;){var t=gt(e/32);if(1===t)return a(It,32,n).a;n=a(Rt,n,g),e=t}})),vt=x,Nt=t((function(n,e){return n(e)})),At=j,wt=t((function(n,e){return P(n,e)>0?n:e})),kt=function(n){return n.length},Lt=t((function(n,e){if(e.nodeListSize){var t=32*e.nodeListSize,r=At(a(_t,32,t-1)),o=n?yt(e.nodeList):e.nodeList,i=a(St,o,e.nodeListSize);return u(dt,kt(e.tail)+t,a(wt,5,r*pt),i,e.tail)}return u(dt,kt(e.tail),pt,mt,e.tail)})),Dt=l,Ct=i((function(n,e,t,r,o){for(;;){if(0>e)return a(Lt,!1,{nodeList:r,nodeListSize:t/32|0,tail:o});var i=bt(s(Dt,32,e,n));n=n,e-=32,t=t,r=a(He,i,r),o=o}})),Pt=t((function(n,e){if(n>0){var t=n%32;return c(Ct,e,n-t-32,n,g,s(Dt,t,n-t,e))}return Et})),Mt=function(n){return{$:"Err",a:n}},Ht=function(n){return{$:"Ok",a:n}},Yt=t((function(n,e){return{$:"Failure",a:n,b:e}})),$t=t((function(n,e){return{$:"Field",a:n,b:e}})),Ft=t((function(n,e){return{$:"Index",a:n,b:e}})),Bt=function(n){return{$:"OneOf",a:n}},Gt=function(n){var e=n.charCodeAt(0);return 55296>e||e>56319?e:1024*(e-55296)+n.charCodeAt(1)-56320+65536},xt=function(n){var e=Gt(n);return e>=97&&122>=e},Wt=function(n){var e=Gt(n);return 90>=e&&e>=65},Ut=function(n){return xt(n)||Wt(n)},jt=function(n){var e=Gt(n);return 57>=e&&e>=48},Kt=function(n){return xt(n)||Wt(n)||jt(n)},qt=function(n){return s(it,t((function(n,e){return e+1})),0,n)},Jt=b,Vt=r((function(n,e,t){for(;;){if(P(n,e)>=1)return t;var r=n,o=e-1,i=a(He,e,t);n=r,e=o,t=i}})),zt=t((function(n,e){return s(Vt,n,e,g)})),Zt=t((function(n,e){return s(Jt,n,a(zt,0,qt(e)-1),e)})),Xt=z,Qt=function(n){return n+""},nr=t((function(n,e){return a(J,n,E(e))})),er=t((function(n,e){return m(a(q,n,e))})),tr=function(n){return a(nr,"\n    ",a(er,"\n",n))},rr=gn,or=t((function(n,e){return"\n\n("+Qt(n+1)+") "+tr(ir(e))})),ir=function(n){return a(ar,n,g)},ar=t((function(n,e){n:for(;;)switch(n.$){case"Field":var t=n.a,r=n.b,o=function(){var n,e,r=(e=(n=t).charCodeAt(0),isNaN(e)?ut:st(55296>e||e>56319?Y(F(n[0]),n.slice(1)):Y(F(n[0]+n[1]),n.slice(2))));if("Nothing"===r.$)return!1;var o=r.a,i=o.b;return Ut(o.a)&&a(Xt,Kt,i)}();n=r,e=a(He,o?"."+t:"['"+t+"']",e);continue n;case"Index":r=n.b;var i="["+Qt(n.a)+"]";n=r,e=a(He,i,e);continue n;case"OneOf":var s=n.a;if(s.b){if(s.b.b){var u=(e.b?"The Json.Decode.oneOf at json"+a(nr,"",yt(e)):"Json.Decode.oneOf")+" failed in the following "+Qt(qt(s))+" ways:";return a(nr,"\n\n",a(He,u,a(Zt,or,s)))}n=r=s.a,e=e;continue n}return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+a(nr,"",yt(e)):"!");default:var c=n.a,l=n.b;return(u=e.b?"Problem with the value at json"+a(nr,"",yt(e))+":\n\n    ":"Problem with the given value:\n\n")+tr(a(rr,4,l))+"\n\n"+c}})),sr=kn,ur=sr(g),cr=function(n){return n},lr=function(n){return{$:"State",a:n}},hr=lr({lastInteractionId:"Start",lastMatchedRuleId:"Begin",searchText:""}),fr=t((function(n,e){return Y({debugState:e.debug?st(hr):ut,gameOver:!1,history:g,loaded:!1,pendingChanges:ut,ruleMatchCounts:Ve,scene:we,showMap:!1,showNotebook:!1,showSelectScene:e.debug,showTranscript:!1,story:a(er,"---",ht("title_intro")),transcript:g,worldModel:n},ur)})),dr={$:"Loaded"},gr={$:"Continue"},_r=function(n){return{$:"Interact",a:n}},pr={$:"NoOp"},mr={$:"ToggleMap"},Er={$:"ToggleNotebook"},br=function(n){return!n},Ir=function(n){return!n.b},yr=t((function(n,e){var t="Title"===n.scene.$;if(!n.loaded||n.showSelectScene)return pr;switch(e){case" ":return t?_r("LOBBY"):n.showMap?mr:n.showNotebook?Er:Ir(n.story)?pr:gr;case"m":return mr;case"n":return Er;default:return pr}})),Rr=en,Tr=Hn("keyPress",Rr),Or=nn,Sr=Hn("loaded",Or),vr=t((function(n){return n})),Nr=kn,Ar={$:"Arriving"},wr={$:"Disembark"},kr={$:"InTransit"},Lr={$:"Lobby"},Dr=function(n){return{$:"Title",a:n}},Cr=function(n){return{$:"Train",a:n}},Pr=function(n){return{$:"Achievement",a:n}},Mr={$:"CentralGuardOffice"},Hr=r((function(n,e,t){return e(n(t))})),Yr=t((function(n,e){return"Just"===e.$?n(e.a):ut})),$r=r((function(n,e,t){return a(Yr,a(Hr,(function(n){return n.stats}),ct(e)),a(ct,n,t))})),Fr=function(n){var e=s($r,"PLAYER","day",n);n:for(;"Just"===e.$;)switch(e.a){case 1:return"Monday morning";case 2:return"Tuesday morning";case 3:return"Wednesday morning";case 4:return"Thursday morning";case 5:return"Friday morning";default:break n}return"ERROR can't get PLAYER.day"},Br={$:"Blue"},Gr={$:"Green"},xr={$:"Orange"},Wr={$:"Purple"},Ur={$:"Red"},jr={$:"Yellow"},Kr=function(n){switch(n){case"RED_LINE":return st(Ur);case"YELLOW_LINE":return st(jr);case"GREEN_LINE":return st(Gr);case"ORANGE_LINE":return st(xr);case"BLUE_LINE":return st(Br);case"PURPLE_LINE":return st(Wr);default:return ut}},qr=t((function(n,e){return"Just"===a(ct,n,e).$})),Jr=r((function(n,e,t){return a(Yr,(function(n){return a(qr,n,t)?st(n):ut}),a(Yr,a(Hr,(function(n){return n.links}),ct(e)),a(ct,n,t)))})),Vr=function(n){return a(Yr,Kr,s(Jr,"PLAYER","line",n))},zr=t((function(n,e){for(;;){if(!e.b)return!1;var t=e.b;if(n(e.a))return!0;n=n,e=t}})),Zr=t((function(n,e){return a(zr,(function(e){return k(e,n)}),e)})),Xr=function(n){return En((function(e){var t=setTimeout((function(){e(mn(H))}),n);return function(){clearTimeout(t)}}))},Qr=function(n){return{$:"Perform",a:n}},no=mn,eo=no(H),to=o((function(n,e,t,r){if(r.b){var o=r.a,i=r.b;if(i.b){var c=i.a,l=i.b;if(l.b){var h=l.a,f=l.b;if(f.b){var d=f.b;return a(n,o,a(n,c,a(n,h,a(n,f.a,t>500?s(it,n,e,yt(d)):u(to,n,e,t+1,d)))))}return a(n,o,a(n,c,a(n,h,e)))}return a(n,o,a(n,c,e))}return a(n,o,e)}return e})),ro=r((function(n,e,t){return u(to,n,e,0,t)})),oo=t((function(n,e){return s(ro,t((function(e,t){return a(He,n(e),t)})),g,e)})),io=bn,ao=t((function(n,e){return a(io,(function(e){return no(n(e))}),e)})),so=r((function(n,e,t){return a(io,(function(e){return a(io,(function(t){return no(a(n,e,t))}),t)}),e)})),uo=An,co=t((function(n,e){var t=e.a;return function(n){return En((function(e){e(mn(yn(n)))}))}(a(io,uo(n),t))}));vn.Task={b:eo,c:r((function(n,e){return a(ao,(function(){return H}),(t=a(oo,co(n),e),s(ro,so(He),no(g),t)));var t})),d:r((function(){return no(H)})),e:t((function(n,e){return Qr(a(ao,n,e.a))})),f:void 0};var lo,ho,fo,go=wn("Task"),_o=t((function(n,e){return go(Qr(a(ao,n,e)))})),po=t((function(n,e){switch(n){case"notebookInstructions":return Y(B(e,{showNotebook:!0}),ur);case"NOTEBOOK":return Y(B(e,{showNotebook:!e.showNotebook}),ur);case"checkMap":return Y(B(e,{showMap:!e.showMap}),ur);case"goToLobby":return Y(B(e,{scene:Lr}),ur);case"get_caffeinated_quest_2":return Y(e,a(_o,(function(){return Pr("get_caffeinated_quest_achievement")}),Xr(300)));case"ratty_hat_man_advice_5":return Y(e,a(_o,(function(){return Pr("fools_errand_achievement")}),Xr(300)));case"meetConductorFirstTime":return Y(B(e,{scene:Lr}),a(_o,(function(){return Pr("transfer_station")}),Xr(300)));default:var t=n;return a(Zr,t,m(["goToLineTurnstile","followSkaterDudeToOrangeLine"]))?Y(B(e,{scene:(r=a(lt,Ur,Vr(e.worldModel)),{$:"Turnstile",a:r})}),ur):a(Zr,t,m(["goToLinePlatform","jumpTurnstileWithSkaterDude","jumpTurnstileAfterTaklingToMark"]))?Y(B(e,{scene:{$:"Platform",a:a(lt,Ur,Vr(e.worldModel))}}),ur):a(Zr,t,m(["caughtOnOrangeLineHeadingTo73rd","caughtOnOrangeLineHeadingToOther"]))?Y(B(e,{scene:Mr}),ur):a(Zr,t,m(["endMonday","endTuesday","endWednesday","endThursday"]))?Y(B(e,{scene:Dr(Fr(e.worldModel))}),ur):Y(e,ur)}var r})),mo=t((function(n,e){return Y(e.a,n(e.b))})),Eo=t((function(n,e){var t=e.b;return a(mo,(function(n){return sr(m([n,t]))}),n(e.a))})),bo=t((function(n,e){return"Just"===e.$?st(n(e.a)):ut})),Io=function(n){return{$:"MatchAny",a:n}},yo=function(n){return{$:"Set_elm_builtin",a:n}},Ro=t((function(n,e){return yo(s(qe,n,H,e.a))})),To=t((function(n,e){return B(e,{tags:a(Ro,n,e.tags)})})),Oo=r((function(n,e,t){return B(t,{stats:s(qe,n,a(lt,0,a(ct,n,t.stats))-e,t.stats)})})),So=r((function(n,e,t){return B(t,{stats:s(qe,n,a(lt,0,a(ct,n,t.stats))+e,t.stats)})})),vo=t((function(n,e){return s(rt,r((function(e,t,r){return a(n,e,t)?s(qe,e,t,r):r})),Ve,e)})),No=r((function(n,e,t){return n(e(t))})),Ao=t((function(n,e){return!a(zr,a(No,br,n),e)})),wo=r((function(n,e,t){return"Nothing"===e.$?ut:"Nothing"===t.$?ut:st(a(n,e.a,t.a))})),ko=i((function(n,e,t,r,o){if("SpecificStat"===t.$){var i=t.a;return k(a(xe,a(lt,0,a(ct,n,o.stats)),i),e)}var u=t.a,c=t.b;return a(lt,!1,a(bo,Tt(e),s(wo,xe,a(ct,n,o.stats),a(Yr,a(Hr,(function(n){return n.stats}),ct(c)),a(ct,u,r)))))})),Lo=t((function(n,e){return a(qr,n,e.a)})),Do=t((function(n,e){return a(Lo,n,e.tags)})),Co=r((function(n,e,t){return a(lt,g,a(bo,(function(r){return a(Ao,(function(n){return s(Mo,n,t,r)}),e)?m([Y(n,r)]):g}),a(ct,n,t)))})),Po=o((function(n,e,r,o){if("SpecificLink"===e.$)return a(lt,!1,a(bo,t((function(n,e){if("Match"===n.$){var t=n.b;return k(n.a,e)&&!Ir(s(Co,e,t,r))}return!Ir(s(Co,e,t=n.a,r))}))(e.a),a(ct,n,o.links)));var i=e.a,u=e.b;return a(lt,!1,s(wo,Tt,a(ct,n,o.links),a(Yr,a(Hr,(function(n){return n.links}),ct(u)),a(ct,i,r))))})),Mo=t((function(n,e){switch(n.$){case"HasTag":return Do(n.a);case"HasStat":return u(ko,n.a,n.b,n.c,e);case"HasLink":return s(Po,n.a,n.b,e);default:return a(No,br,a(Mo,n.a,e))}})),Ho=t((function(n,e){return Be(a(vo,t((function(t,r){return a(Ao,(function(n){return s(Mo,n,e,r)}),n)})),e))})),Yo=t((function(n,e){return"Match"===n.$?s(Co,n.a,n.b,e):a(Ho,n.a,e)})),$o=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$&&"RBNode_elm_builtin"===n.e.$){if("RBNode_elm_builtin"===n.e.d.$&&"Red"===n.e.d.a.$){var e=n.d,t=n.e,r=t.b,o=t.c,i=(h=t.d).d,a=h.e,s=t.e;return c(Le,Ue,h.b,h.c,c(Le,ke,n.b,n.c,c(Le,Ue,e.b,e.c,e.d,e.e),i),c(Le,ke,r,o,a,s))}var u=n.d,l=n.e,h=(r=l.b,o=l.c,l.d);return s=l.e,c(Le,ke,n.b,n.c,c(Le,Ue,u.b,u.c,u.d,u.e),c(Le,Ue,r,o,h,s))}return n},Fo=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$&&"RBNode_elm_builtin"===n.e.$){if("RBNode_elm_builtin"===n.d.d.$&&"Red"===n.d.d.a.$){var e=n.b,t=n.c,r=n.d,o=r.d,i=r.e,a=n.e,s=a.b,u=a.c,l=a.d,h=a.e;return c(Le,Ue,r.b,r.c,c(Le,ke,o.b,o.c,o.d,o.e),c(Le,ke,e,t,i,c(Le,Ue,s,u,l,h)))}var f=n.d,d=n.e;return s=d.b,u=d.c,l=d.d,h=d.e,c(Le,ke,e=n.b,t=n.c,c(Le,Ue,f.b,f.c,f.d,i=f.e),c(Le,Ue,s,u,l,h))}return n},Bo=e(7,fo=function(n,e,t,r,o,i,a){if("RBNode_elm_builtin"===i.$&&"Red"===i.a.$)return c(Le,t,i.b,i.c,i.d,c(Le,Ue,r,o,i.e,a));n:for(;;){if("RBNode_elm_builtin"===a.$&&"Black"===a.a.$){if("RBNode_elm_builtin"===a.d.$){if("Black"===a.d.a.$)return Fo(e);break n}return Fo(e)}break n}return e},(function(){return function(n){return function(e){return function(t){return function(r){return function(o){return function(i){return fo(0,n,e,t,r,o,i)}}}}}}})),Go=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$){var e=n.a,t=n.b,r=n.c,o=n.d,i=o.d,a=n.e;if("Black"===o.a.$){if("RBNode_elm_builtin"===i.$&&"Red"===i.a.$)return c(Le,e,t,r,Go(o),a);var s=$o(n);if("RBNode_elm_builtin"===s.$){var u=s.e;return c(je,s.a,s.b,s.c,Go(s.d),u)}return We}return c(Le,e,t,r,Go(o),a)}return We},xo=t((function(n,e){if("RBEmpty_elm_builtin"===e.$)return We;var t,r,o,i,s,u,l,h,f=e.a,d=e.b,g=e.c,_=e.d,p=e.e;if(0>P(n,d)){if("RBNode_elm_builtin"===_.$&&"Black"===_.a.$){var m=_.d;if("RBNode_elm_builtin"===m.$&&"Red"===m.a.$)return c(Le,f,d,g,a(xo,n,_),p);var E=$o(e);if("RBNode_elm_builtin"===E.$){var b=E.e;return c(je,E.a,E.b,E.c,a(xo,n,E.d),b)}return We}return c(Le,f,d,g,a(xo,n,_),p)}return a(Wo,n,(r=n,o=e,i=f,s=d,u=g,l=_,h=p,7===(t=Bo).a?t.f(r,o,i,s,u,l,h):t(r)(o)(i)(s)(u)(l)(h)))})),Wo=t((function(n,e){if("RBNode_elm_builtin"===e.$){var t=e.a,r=e.b,o=e.c,i=e.d,s=e.e;if(k(n,r)){var u=function(n){for(;;){if("RBNode_elm_builtin"!==n.$||"RBNode_elm_builtin"!==n.d.$)return n;n=n.d}}(s);return"RBNode_elm_builtin"===u.$?c(je,t,u.b,u.c,i,Go(s)):We}return c(je,t,r,o,i,a(xo,n,s))}return We})),Uo=t((function(n,e){var t=a(xo,n,e);return"RBNode_elm_builtin"===t.$&&"Red"===t.a.$?c(Le,ke,t.b,t.c,t.d,t.e):t})),jo=t((function(n,e){return yo(a(Uo,n,e.a))})),Ko=t((function(n,e){return B(e,{tags:a(jo,n,e.tags)})})),qo=r((function(n,e,t){return B(t,{links:s(qe,n,e,t.links)})})),Jo=r((function(n,e,t){return B(t,{stats:s(qe,n,e,t.stats)})})),Vo=r((function(n,e,t){var r=e(a(ct,n,t));return"Just"===r.$?s(qe,n,r.a,t):a(Uo,n,t)})),zo=r((function(n,e,t){return s(Vo,n,bo(e),t)})),Zo=r((function(n,e,o){var i=function(n){return"$"===n?e:n},u=r((function(n,e,t){switch(e.$){case"AddTag":return s(zo,n,To(e.a),t);case"RemoveTag":return s(zo,n,Ko(e.a),t);case"SetStat":return s(zo,n,a(Jo,r=e.a,e.b),t);case"IncStat":return s(zo,n,a(So,r=e.a,e.b),t);case"DecStat":return s(zo,n,a(Oo,r=e.a,e.b),t);default:if("SpecificLinkTarget"===e.b.$)return s(zo,n,a(qo,r=e.a,i(u=e.b.a)),t);var r=e.a,o=e.b,u=o.a;return a(lt,t,a(bo,(function(e){return s(zo,n,a(qo,r,e),t)}),a(Yr,a(Hr,(function(n){return n.links}),ct(o.b)),a(ct,i(u),t))))}})),c=function(n){return it(u(n))};return s(it,t((function(n,e){if("Update"===n.$){var r=n.b;return s(c,i(n.a),e,r)}var o=n.a;return r=n.b,s(it,t((function(n,e){return s(c,n.a,e,r)})),e,a(Yo,Io(o),e))})),o,n)})),Xo=function(n){var e=n.pendingChanges;if("Just"===e.$){var t=e.a,r=t.a,o=t.b;return a(Eo,po(t.c),Y(B(n,{pendingChanges:ut,worldModel:s(Zo,o,r,n.worldModel)}),ur))}return Y(n,ur)},Qo=t((function(n,e){return B(e,{status:n})})),ni=t((function(n,e){return a(_o,vr(e),Xr(n))})),ei=function(n){return Y(n,ur)},ti=t((function(n,e){return"Just"===e.$?Ht(e.a):Mt(n)})),ri=t((function(n,e){return"Ok"===e.$?Ht(n(e.a)):Mt(e.a)})),oi=t((function(n,e){return s(ro,t((function(e,t){return n(e)?a(He,e,t):t})),g,e)})),ii=function(n){return""===n},ai=function(n){return n.trim()},si=r((function(n,e,t){return{col:e,problem:t,row:n}})),ui=function(n){return s(si,n.row,n.col,n.problem)},ci=t((function(n,e){n:for(;;)switch(n.$){case"Empty":return e;case"AddRight":var t=n.b;n=n.a,e=a(He,t,e);continue n;default:var r=n.b;n=n.a,e=a(ci,r,e);continue n}})),li=t((function(n,e){var t=(0,n.a)({col:1,context:g,indent:1,offset:0,row:1,src:e});return"Good"===t.$?Ht(t.b):Mt(a(ci,t.b,g))})),hi=t((function(n,e){var t=a(li,n,e);return"Ok"===t.$?Ht(t.a):Mt(a(oo,ui,t.a))})),fi=function(n){return n.length},di=t((function(n,e){return{$:"Bad",a:n,b:e}})),gi=r((function(n,e,t){return{$:"Good",a:n,b:e,c:t}})),_i=function(n){return{$:"Parser",a:n}},pi=t((function(n,e){return{$:"AddRight",a:n,b:e}})),mi=o((function(n,e,t,r){return{col:e,contextStack:r,problem:t,row:n}})),Ei={$:"Empty"},bi=t((function(n,e){return a(pi,Ei,u(mi,n.row,n.col,e,n.context))})),Ii=(lo={$:"ExpectingEnd"},_i((function(n){return k(fi(n.src),n.offset)?s(gi,!1,H,n):a(di,!1,a(bi,n,lo))}))),yi=r((function(n,e,t){var r=e.a,o=t.a;return _i((function(e){var t=r(e);if("Bad"===t.$)return a(di,t.a,h=t.b);var i=t.a,u=t.b,c=o(t.c);if("Bad"===c.$){var l=c.a,h=c.b;return a(di,i||l,h)}l=c.a;var f=c.c;return s(gi,i||l,a(n,u,c.b),f)}))})),Ri=t((function(n,e){return s(yi,vr,n,e)})),Ti=r((function(n,e,t){for(;;){var r=a(It,32,n),o=r.a,i=r.b;if(0>P(kt(o),32))return a(Lt,!0,{nodeList:e,nodeListSize:t,tail:o});n=i,e=a(He,bt(o),e),t+=1}})),Oi=function(n){return n.b?s(Ti,n,g,0):Et},Si=4294967295>>>32-pt,vi=f,Ni=r((function(n,e,t){for(;;){var r=a(vi,Si&e>>>n,t);if("SubTree"!==r.$)return a(vi,Si&e,r.a);n-=pt,e=e,t=r.a}})),Ai=t((function(n,e){var t=e.a,r=e.b,o=e.c,i=e.d;return 0>n||P(n,t)>-1?ut:P(n,function(n){return n>>>5<<5}(t))>-1?st(a(vi,Si&n,i)):st(s(Ni,r,n,o))})),wi=t((function(n,e){return 0>P(n,e)?n:e})),ki=W,Li=function(n){return{$:"Done",a:n}},Di=function(n){return{$:"Loop",a:n}},Ci=t((function(n,e){var t=e.a;return _i((function(e){var r=t(e);if("Bad"===r.$)return a(di,r.a,l=r.b);var o=r.a,i=r.c,u=(0,n(r.b).a)(i);if("Bad"===u.$){var c=u.a,l=u.b;return a(di,o||c,l)}return c=u.a,s(gi,o||c,u.b,u.c)}))})),Pi=function(n){var e=n.a;return _i((function(n){var t=e(n);return"Bad"===t.$?a(di,!1,t.b):s(gi,!1,t.b,t.c)}))},Mi=t((function(n,e){return{$:"Token",a:n,b:e}})),Hi=function(n){return a(Mi,n,{$:"Expecting",a:n})},Yi=xn,$i=o((function(n,e,t,r){return a(pi,Ei,u(mi,n,e,t,r))})),Fi=V,Bi=t((function(n,e){var t=e.a;return _i((function(e){var r=t(e);if("Bad"===r.$)return a(di,r.a,r.b);var o=r.b,i=r.c;return s(gi,r.a,a(n,s(Fi,e.offset,i.offset,e.src),o),i)}))})),Gi=function(n){return a(Bi,vr,n)},xi=t((function(n,e){return s(yi,Nt,n,e)})),Wi=function(n){return _i((function(e){return(0,n(H).a)(e)}))},Ui=t((function(n,e){var t=e.a;return _i((function(e){var r=t(e);if("Good"===r.$){var o=r.c;return s(gi,r.a,n(r.b),o)}return a(di,r.a,r.b)}))})),ji=function(n){return"Loop"===n.$?{$:"Loop",a:n.a}:{$:"Done",a:n.a}},Ki=o((function(n,e,t,r){n:for(;;){var o=(0,t(e).a)(r);if("Good"===o.$){var i=o.a,u=o.b,c=o.c;if("Loop"===u.$){n=n||i,e=u.a,t=t,r=c;continue n}return s(gi,n||i,u.a,c)}return i=o.a,a(di,n||i,o.b)}})),qi=t((function(n,e){return _i((function(t){return u(Ki,!1,n,e,t)}))})),Ji=t((function(n,e){return a(qi,n,(function(n){return a(Ui,ji,e(n))}))})),Vi=t((function(n,e){return{$:"Append",a:n,b:e}})),zi=r((function(n,e,t){for(;;){if(!t.b)return a(di,!1,e);var r=t.b,o=(0,t.a.a)(n);if("Good"===o.$)return o;var i,s=(i=o).b;if(i.a)return i;n=n,e=a(Vi,e,s),t=r}})),Zi=function(n){return _i((function(e){return s(zi,e,Ei,n)}))},Xi=function(n){return e={$:"Problem",a:n},_i((function(n){return a(di,!1,a(bi,n,e))}));var e},Qi=function(n){return _i((function(e){return s(gi,!1,n,e)}))},na=Bn,ea=function(n){var e=n.a,t=n.b,r=!ii(e);return _i((function(n){var o=c(na,e,n.offset,n.row,n.col,n.src),i=o.a,u=o.b,l=o.c;return k(i,-1)?a(di,!1,a(bi,n,t)):s(gi,r,H,{col:l,context:n.context,indent:n.indent,offset:i,row:u,src:n.src})}))},ta=ea,ra=function(n){return ta(a(Mi,n,{$:"ExpectingSymbol",a:n}))},oa=t((function(n,e){return{$:"Seed",a:n,b:e}})),ia=function(n){var e=n.b;return a(oa,1664525*n.a+e>>>0,e)},aa=function(n){var e=n.a,t=277803737*(e^e>>>4+(e>>>28));return(t>>>22^t)>>>0},sa=t((function(n,e){return function(n){return{$:"Generator",a:n}}((function(t){var r=0>P(n,e)?Y(n,e):Y(e,n),o=r.a,i=r.b-o+1;if(i-1&i){var a=(-i>>>0)%i>>>0;return function(n){for(;;){var e=aa(n),t=ia(n);if(P(e,a)>=0)return Y(e%i+o,t);n=t}}(t)}return Y(((i-1&aa(t))>>>0)+o,ia(t))}))})),ua=t((function(n,e){return(0,n.a)(e)})),ca=t((function(n,e){return{$:"CompareLink",a:n,b:e}})),la=t((function(n,e){return{$:"CompareStat",a:n,b:e}})),ha=t((function(n,e){return{$:"HasLink",a:n,b:e}})),fa=r((function(n,e,t){return{$:"HasStat",a:n,b:e,c:t}})),da=t((function(n,e){return{$:"Match",a:n,b:e}})),ga=function(n){return{$:"SpecificLink",a:n}},_a=t((function(n,e){var t=function(e){n:for(;;)switch(e.$){case"HasStat":if("CompareStat"===e.c.$&&"$"===e.c.a)return s(fa,e.a,e.b,a(la,n,e.c.b));break n;case"HasLink":if("SpecificLink"===e.b.$){if("Match"===e.b.a.$&&"$"===e.b.a.a)return a(ha,e.a,ga(a(da,n,e.b.a.b)));break n}if("$"===e.b.a)return a(ha,e.a,a(ca,n,e.b.b));break n;default:break n}return e};if("MatchAny"===e.$)return Io(a(oo,t,r=e.a));var r=e.b;return a(da,function(e){return"$"===e?n:e}(e.a),a(oo,t,r))})),pa=function(n){return ii(n)?Xi("cannot be empty"):Qi(n)},ma=t((function(n,e){return r=a(oo,n,e),s(it,t((function(n,e){return"Ok"===n.$?a(ri,He(n.a),e):Mt(n.a)})),Ht(g),r);var r})),Ea={$:"Looping"},ba={$:"Randomly"},Ia={$:"Sticking"},ya=ra("|"),Ra=ra("}"),Ta=ra("{"),Oa=r((function(n,e,t){return a(nr,e,a(er,n,t))})),Sa=Gn,va=i((function(n,e,t,r,o){for(;;){var i=s(Sa,n,e,o.src);if(k(i,-1))return s(gi,0>P(o.offset,e),H,{col:r,context:o.context,indent:o.indent,offset:e,row:t,src:o.src});k(i,-2)?(n=n,e+=1,t+=1,r=1,o=o):(n=n,e=i,t=t,r+=1,o=o)}})),Na=function(n){return _i((function(e){return c(va,n,e.offset,e.row,e.col,e)}))},Aa=Na,wa=function(n){return function(n){var e=n.a,t=n.b,r=!ii(e);return _i((function(n){var o=c(na,e,n.offset,n.row,n.col,n.src),i=o.a,u=o.b,l=o.c;return k(i,-1)||s(Sa,(function(n){return Kt(n)||k(n,F("_"))}),i,n.src)>=0?a(di,!1,a(bi,n,t)):s(gi,r,H,{col:l,context:n.context,indent:n.indent,offset:i,row:u,src:n.src})}))}(a(Mi,n,{$:"ExpectingKeyword",a:n}))},ka=function(n){return"Ok"===n.$?Qi(n.a):Xi(n.a)},La=a(Ci,pa,Gi(a(Ri,Qi(H),Aa((function(n){return!a(Zr,n,m([F("{"),F("}"),F("|")]))}))))),Da=t((function(n,e){return"Ok"===e.$?Ht(e.a):Mt(n(e.a))})),Ca=t((function(n,e){if(e.b){var r=e.b;return a(He,e.a,s(ro,t((function(e,t){return a(He,n,a(He,e,t))})),g,r))}return g})),Pa=function(n){return a(nr,"",a(Ca,"; ",a(oo,(function(n){return function(n){switch(n.$){case"Expecting":return"expecting '"+n.a+"'";case"ExpectingInt":return"expecting int";case"ExpectingHex":return"expecting hex";case"ExpectingOctal":return"expecting octal";case"ExpectingBinary":return"expecting binary";case"ExpectingFloat":return"expecting float";case"ExpectingNumber":return"expecting number";case"ExpectingVariable":return"expecting variable";case"ExpectingSymbol":return"expecting symbol '"+n.a+"'";case"ExpectingKeyword":return"expecting keyword '"+n.a+"'";case"ExpectingEnd":return"expecting end";case"UnexpectedChar":return"unexpected char";case"Problem":return"problem "+n.a;default:return"bad repeat"}}(n.problem)+" at row "+Qt(n.row)+", col "+Qt(n.col)}),n)))},Ma=function(n){return ea(Hi(n))},Ha=function(n){return{$:"HasTag",a:n}},Ya=function(n){return{$:"Not",a:n}},$a=function(n){return{$:"SpecificStat",a:n}},Fa=t((function(n,e){return _i((function(t){var r=s(Sa,n,t.offset,t.src);return k(r,-1)?a(di,!1,a(bi,t,e)):k(r,-2)?s(gi,!0,H,{col:1,context:t.context,indent:t.indent,offset:t.offset+1,row:t.row+1,src:t.src}):s(gi,!0,H,{col:t.col+1,context:t.context,indent:t.indent,offset:r,row:t.row,src:t.src})}))})),Ba=a(Ci,pa,Gi(a(Ri,a(Ri,Qi(H),a(Fa,Ut,{$:"UnexpectedChar"})),Aa((function(n){return Kt(n)||a(Zr,n,m([F("_"),F("-"),F(":"),F("#"),F("+")]))}))))),Ga=(ho=a(Ci,a(Hr,(function(n){for(var e=0,t=n.charCodeAt(0),r=43==t||45==t?1:0,o=r;n.length>o;++o){var i=n.charCodeAt(o);if(48>i||i>57)return ut;e=10*e+i-48}return o==r?ut:st(45==t?-e:e)}),a(Hr,bo(Qi),lt(Xi("not an int")))),Gi(Aa(jt))),Zi(m([a(xi,a(Ri,Qi((function(n){return-n})),ra("-")),ho),ho]))),xa=a(Ci,pa,Gi(a(Ri,Qi(H),Aa((function(n){return Kt(n)||a(Zr,n,m([F("_"),F(":"),F("#")]))}))))),Wa=Zi(m([a(Ui,vr(Io),ra("*")),a(Ui,vr(da("$")),ra("$")),a(Ui,da,Ba)]));function Ua(){return a(xi,a(xi,Qi(t((function(n,e){return n(e)}))),Wa),ja())}function ja(){var n=o((function(n,e,t,r){return Di(a(He,e?Ya(r(t)):r(t),n))})),e=t((function(n,e){return a(xi,a(xi,a(Ri,a(Ri,Qi(e),wa("("+n)),Aa(Tt(F(" ")))),a(Ri,Zi(m([a(Ui,vr("$"),Ma("$")),Ba])),ra("."))),a(Ri,xa,ra(")")))}));return a(Ji,g,(function(t){return Zi(m([a(xi,a(xi,a(xi,a(Ri,Qi(n(t)),ra(".")),Zi(m([a(Ui,vr(!0),ra("!")),Qi(!1)]))),xa),Zi(m([a(xi,a(Ri,Qi(cr),ra(">")),Zi(m([a(e,"stat",r((function(n,e,t){return s(fa,t,$e,a(la,n,e))}))),a(Ui,(function(n){return function(e){return s(fa,e,$e,$a(n))}}),Ga)]))),a(xi,a(Ri,Qi(cr),ra("<")),Zi(m([a(e,"stat",r((function(n,e,t){return s(fa,t,Me,a(la,n,e))}))),a(Ui,(function(n){return function(e){return s(fa,e,Me,$a(n))}}),Ga)]))),a(xi,a(Ri,Qi(cr),ra("=")),Zi(m([a(Ui,(function(n){return function(e){return s(fa,e,Pe,$a(n))}}),Ga),a(Ui,(function(){return function(n){return a(ha,n,ga(a(da,"$",g)))}}),ra("$")),a(Ui,(function(n){return function(e){return a(ha,e,ga(a(da,n,g)))}}),Ba),a(e,"stat",r((function(n,e,t){return s(fa,t,Pe,a(la,n,e))}))),a(e,"link",r((function(n,e,t){return a(ha,t,a(ca,n,e))}))),a(xi,a(Ri,Qi(cr),ra("(")),a(Ri,a(Ui,(function(n){return function(e){return a(ha,e,ga(n))}}),Ua()),ra(")")))]))),Qi((function(n){return Ha(n)}))]))),Qi(Li(t))]))}))}try{var Ka=Ua();Ua=function(){return Ka};var qa=ja();ja=function(){return qa}}catch(n){throw"Some top-level definitions from `NarrativeEngine.Syntax.RuleParser` are causing infinite recursion:\n\n  ┌─────┐\n  │    matcherParser\n  │     ↓\n  │    queriesParser\n  └─────┘\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Ja,Va,za,Za,Xa,Qa,ns,es,ts,rs,os=function(n){return a(Da,Pa,a(hi,a(Ri,Ka,Ii),n))},is=function(n){var e=Zi(m([a(xi,a(Ri,Qi(cr),Ta),Zi(m([Pi(function(n){var e=function(e){return!Ir(a(Yo,e,n.worldModel))};return a(Ci,(function(t){var r,o,i=t.a,u=t.b,c=t.c;return"Ok"===(r=a(ri,Ao(a(Hr,_a(n.trigger),e)),a(ma,os,a(oo,ai,a(er,"&",i))))).$?(o=r.a?u:c,_i((function(n){return s(gi,!0,o,n)}))):Xi(r.a)}),a(xi,a(xi,a(xi,Qi(r((function(n,e,t){return $(n,e,t)}))),a(Ri,a(Ci,pa,Gi(function(n){var e=n.a,t=n.b;return _i((function(n){var r=c(Yi,e,n.offset,n.row,n.col,n.src),o=r.a,i=r.b,l=r.c;return k(o,-1)?a(di,!1,u($i,i,l,t,n.context)):s(gi,0>P(n.offset,o),H,{col:l,context:n.context,indent:n.indent,offset:o,row:i,src:n.src})}))}(Hi("?")))),ra("?"))),Wi((function(){return is(n)}))),Zi(m([a(xi,a(Ri,Qi(cr),ya),a(Ri,Wi((function(){return is(n)})),Ra)),a(Ui,vr(""),Ra)]))))}(n)),Pi(function(n){var e=a(oo,(function(n){var e=n.a;return a(Ri,Qi(n.b),wa(e))}),Be(n.propKeywords));return a(Ci,ka,a(xi,a(xi,Qi(t((function(e,t){return t(s(Oa,"$",n.trigger,e))}))),a(Ri,a(Ci,pa,Gi(Aa((function(n){return!a(Zr,n,m([F("{"),F("."),F("|"),F("}")]))})))),ra("."))),a(Ri,Zi(e),Ra)))}(n)),Pi(function(n){return a(xi,a(xi,Qi(t((function(e,t){switch(e.$){case"Randomly":return a(lt,"ERROR finding correct cycling text",(r=a(ki,qt(t),a(ua,a(sa,0,200),(o=n.cycleIndex*fi(n.trigger),i=ia(a(oa,0,1013904223)),ia(a(oa,i.a+o>>>0,i.b)))).a),a(Ai,r,Oi(t))));case"Looping":return a(lt,"ERROR finding correct cycling text",a(Ai,a(ki,qt(t),n.cycleIndex),Oi(t)));default:return a(lt,"ERROR finding correct cycling text",a(Ai,a(wi,qt(t)-1,n.cycleIndex),Oi(t)))}var r,o,i}))),Zi(m([a(Ui,vr(Ea),ra("~")),a(Ui,vr(ba),ra("?")),Qi(Ia)]))),a(Ji,g,(function(e){return Zi(m([a(Ui,vr(Di(a(He,"",e))),ya),a(Ui,vr(Li(yt(a(He,"",e)))),Ra),a(xi,a(xi,Qi(t((function(n,e){return e(n)}))),Wi((function(){return is(n)}))),Zi(m([a(Ui,vr((function(n){return Di(a(He,n,e))})),ya),a(Ui,vr((function(n){return Li(yt(a(He,n,e)))})),Ra)])))]))})))}(n))]))),La])),o=t((function(n,e){return Di(G(n,e))}));return a(xi,Qi(cr),a(Ji,"",(function(n){return Zi(m([a(Ui,o(n),e),Qi(Li(n))]))})))},as=function(n){return a(Ri,is(n),Ii)},ss=t((function(n,e){var t=a(hi,as(n),e);if("Ok"===t.$){var r=t.a;return a(oi,a(No,a(No,br,ii),ai),a(er,"---",r))}return m(["ERROR could not parse: "+e])})),us=o((function(n,e,r,o){var i,u=function(n){return"$"===n?r:n},c=(i=m([Y("name",a(Hr,u,(function(e){return a(ri,(function(n){return n.name}),a(ti,"Unable to find entity for id: "+e,a(ct,e,n.worldModel)))}))),Y("description",a(Hr,u,a(Hr,ht,Ht))),Y("amount",a(Hr,u,(function(e){return a(ti,"Error looking up 'amount' stat on "+e,a(bo,Qt,s($r,e,"amount",n.worldModel)))})))]),s(it,t((function(n,e){return s(qe,n.a,n.b,e)})),Ve,i)),l=s(Vo,e,(function(n){return st(a(lt,1,a(bo,vt(1),n)))}),n.ruleMatchCounts);return Y(a(ss,{cycleIndex:a(lt,0,a(ct,e,n.ruleMatchCounts)),propKeywords:c,trigger:r,worldModel:n.worldModel},o),l)})),cs=y,ls=t((function(n,e){return r=os(t=n),a(Yo,"Ok"===r.$?r.a:a(cs,"ERROR parsing matcher:"+t+"\n"+r.a,a(da,"PARSING_ERROR",g)),e);var t,r})),hs=t((function(n,e){return!Ir(a(ls,n,e))})),fs=function(n){return n.b?st(n.a):ut},ds=I,gs=function(n){return n.b},_s=r((function(n,e,t){return!Ir(a(Yo,a(_a,n,t),e))})),ps=r((function(n,e,t){return"Match"===(r=a(_a,e,t)).$?k(r.a,e)&&!Ir(a(Yo,r,n)):!Ir(a(Yo,a(da,e,r.a),n));var r})),ms=function(n){var e=n.trigger,r=n.conditions,o=function(n){return qt("Match"===n.$?n.b:n.a)},i="Match"===e.$?100+o(e):0+o(e);return s(it,t((function(n,e){return"Match"===n.$?10+o(n)+e:0+o(n)+e})),0,r)+i},Es=r((function(n,e,r){return fs(yt(a(ds,a(Hr,gs,ms),Be(a(vo,t((function(e,t){return s(ps,r,n,t.trigger)&&a(Ao,a(_s,n,r),t.conditions)})),e)))))})),bs=t((function(n,e){return lr(B(e.a,{lastInteractionId:n}))})),Is=t((function(n,e){return lr(B(e.a,{lastMatchedRuleId:n}))})),ys=r((function(n,e,t){var r=s(Es,e,n,t.worldModel);if("Nothing"===r.$){var o=a(bo,a(Hr,Is(e),bs(e)),t.debugState),i=a(hs,e+".silent",t.worldModel)?Y(g,t.ruleMatchCounts):u(us,t,e,e,ht(e)),c=i.a,l=i.b;return a(Eo,po(e),Y(B(t,{debugState:o,ruleMatchCounts:l,story:c}),ur))}var h=r.a,f=h.a,d=h.b,_=(o=a(bo,a(Hr,Is(f),bs(e)),t.debugState),u(us,t,f,e,ht(f)));return l=_.b,a(Eo,Ir(c=_.a)?Xo:ei,Y(B(t,{debugState:o,pendingChanges:st($(e,d.changes,f)),ruleMatchCounts:l,story:c}),ur))})),Rs=t((function(n,e){n:for(;;){if(n>0){if(e.b){n-=1,e=e.b;continue n}return e}return e}})),Ts=t((function(n,e){return lr(B(e.a,{searchText:n}))})),Os=r((function(n,e,r){if(r.gameOver)return ei(r);switch(e.$){case"NoOp":return ei(r);case"Loaded":return Y(B(r,{loaded:!0}),ur);case"LoadScene":var o=e.a,i=o.a,u=o.b;return a(Eo,(function(n){return Y(B(n,{scene:function(){var e=n.scene;switch(e.$){case"Train":case"Turnstile":case"Platform":return Lr;default:return e}}(),showMap:!1,showNotebook:!1,showSelectScene:!1,story:"MainTitle"===n.scene.$?n.story:g}),ur)}),s(it,t((function(e,t){return a(Eo,Xo,a(Eo,a(Os,n,_r(e)),t))})),Y(i,ur),u));case"Interact":var c=e.a;return a(Eo,(function(n){return Y(n,"Train"!==(e=Y(n.scene,n.story)).a.$||e.b.b?ur:a(ni,1500,gr));var e}),a(Eo,(function(n){return k(n.debugState,ut)?Y(n,ur):Y(B(n,{transcript:G(n.transcript,a(He,c,n.story))}),ur)}),a(Eo,a(ys,n,c),Y(B(r,{history:a(cs,"history\n",G(r.history,m([c])))}),ur))));case"Delay":var l=e.a;return Y(r,a(_o,vr(e.b),Xr(l)));case"ToggleNotebook":return Y(a(hs,"NOTEBOOK.!new",r.worldModel)?B(r,{showNotebook:!r.showNotebook}):r,ur);case"ToggleMap":return Y(a(hs,"MAP.location=PLAYER",r.worldModel)?B(r,{showMap:!r.showMap}):r,ur);case"ToggleTranscript":return Y(B(r,{showTranscript:!r.showTranscript}),ur);case"Go":return Y(B(r,{scene:e.a}),ur);case"BoardTrain":var h=e.b;return Y(B(r,{scene:Cr({line:e.a,status:kr})}),a(ni,800,_r(h)));case"Continue":return qt(r.story)>1?Y(B(r,{story:a(Rs,1,r.story)}),ur):a(Eo,(function(n){var e=n.scene;switch(e.$){case"Train":return Y(B(n,{scene:Cr(a(Qo,Ar,e.a))}),a(ni,900,wr));case"MainTitle":return Y(B(n,{scene:Dr(Fr(n.worldModel))}),ur);default:return Y(n,ur)}}),a(Eo,Xo,Y(B(r,{story:g}),ur)));case"Achievement":return Y(B(r,{story:m([ht(e.a)])}),ur);case"Disembark":return Y(B(r,{scene:Lr}),ur);default:return Y(B(r,{debugState:a(bo,Ts(e.a),r.debugState)}),ur)}})),Ss=function(n){return{$:"DebugSeachWorldModel",a:n}},vs=on,Ns=function(n){return{$:0,a:n}},As=function(n){switch(n.$){case"Normal":return 0;case"MayStopPropagation":return 1;case"MayPreventDefault":return 2;default:return 3}},ws=qn("div"),ks=qn("span"),Ls=jn,Ds=_n,Cs=t((function(n,e){return a(Zn,n,Ds(e))})),Ps=Cs("className"),Ms=Vn,Hs=t((function(n,e){return a(Ms,n,{$:"Normal",a:e})})),Ys=function(n){return a(Hs,"click",Ns(n))},$s=function(n){return"Just"===n.$},Fs=Ie({defaultHighlighting:ut,githubFlavored:st({breaks:!1,tables:!1}),sanitize:!0,smartypants:!1}),Bs=qn("img"),Gs=function(n){return a(Cs,"src",/^\s*(javascript:|data:text\/html)/i.test(e=n)?'javascript:alert("This is an XSS vector. Please use ports or web components instead.")':e);var e},xs=a(ws,m([Ys(mr),Ps("map")]),m([a(Bs,m([Ps("map__image"),Gs("img/subway-map-full.jpg")]),g)])),Ws=m([$("GIRL_IN_YELLOW.who_was_girl_in_yellow_quest","Who was that girl in yellow?",m(["",""])),$("MOTHER.screaming_child_quest","Stop the kid from screaming.",m(["Find a soda for the kid",""]))]),Us=m([$("PLAYER.present_proposal","Present proposal",m(["Get to work by 6:30am","Get to work by 6:45am","Get to work by 7:00am",""])),$("PLAYER.find_briefcase","Find stolen briefcase!",m(["Report it stolen?","Talk to Mark @ Spring Hill?","Broom closet @ 73rd",""])),$("PLAYER.call_boss","Call Mr. Harris",m(["",""]))]),js=r((function(n,e,t){n:for(;;){if(n>0){if(e.b){var r=e.a;n-=1,e=e.b,t=a(He,r,t);continue n}return t}return t}})),Ks=t((function(n,e){return yt(s(js,n,e,g))})),qs=r((function(n,e,t){if(e>0){var r=Y(e,t);n:for(;;){e:for(;;){if(!r.b.b)return t;if(!r.b.b.b){if(1===r.a)break n;break e}switch(r.a){case 1:break n;case 2:var o=r.b;return m([o.a,o.b.a]);case 3:if(r.b.b.b.b){var i=r.b,u=i.b;return m([i.a,u.a,u.b.a])}break e;default:if(r.b.b.b.b&&r.b.b.b.b.b){var c=r.b,l=c.b,h=l.b,f=h.b,d=f.b;return a(He,c.a,a(He,l.a,a(He,h.a,a(He,f.a,n>1e3?a(Ks,e-4,d):s(qs,n+1,e-4,d)))))}break e}}return t}return m([r.b.a])}return g})),Js=t((function(n,e){return s(qs,0,n,e)})),Vs=qn("h3"),zs=qn("li"),Zs=qn("ul"),Xs=function(n){return Ps(a(nr," ",a(oo,Ot,a(oi,gs,n))))},Qs=t((function(n,e){return 1>n?e:s(Fi,n,fi(e),e)})),nu=t((function(n,e){return a(Ms,n,{$:"MayPreventDefault",a:e})})),eu=function(n){return Jn(function(n){return"script"==n?"p":n}(n))},tu=tn,ru=t((function(n,e){return s(ro,tu,e,n)})),ou=qn("h1"),iu=function(n){switch(n.$){case"Red":return{id:"RED_LINE",name:"Red Line",number:1,stations:m(["WEST_MULBERRY","EAST_MULBERRY","CHURCH_STREET","BROADWAY_STREET","CONVENTION_CENTER","SPRING_HILL","TWIN_BROOKS"])};case"Yellow":return{id:"YELLOW_LINE",name:"Yellow Line",number:2,stations:m(["RIVERSIDE","ST_MARKS","BROADWAY_STREET","CONVENTION_CENTER","CAPITOL_HEIGHTS","MACARTHURS_PARK"])};case"Green":return{id:"GREEN_LINE",name:"Green Line",number:3,stations:m(["BURLINGTON","SAMUAL_STREET","CAPITOL_HEIGHTS","CONVENTION_CENTER"])};case"Orange":return{id:"ORANGE_LINE",name:"Orange Line",number:4,stations:m(["IRIS_LAKE","NORWOOD","ST_MARKS","UNIVERSITY","SPRING_HILL","CAPITOL_HEIGHTS","SEVENTY_THIRD_STREET","ONE_HUNDRED_FORTH_STREET"])};case"Blue":return{id:"BLUE_LINE",name:"Blue Line",number:5,stations:m(["ONE_HUNDRED_FORTH_STREET","SEVENTY_THIRD_STREET","FORTY_SECOND_STREET","MUSEUM","BROADWAY_STREET","ST_MARKS","PARK_AVE","WESTGATE"])};default:return{id:"PURPLE_LINE",name:"Purple Line",number:6,stations:m(["HIGHLAND","FAIRVIEW","EAST_MULBERRY","CHURCH_STREET","MUSEUM","CONVENTION_CENTER","UNIVERSITY","WALTER_HILL"])}}},au=a(oo,(function(n){return Y(n,iu(n).stations)}),m([Ur,Gr,jr,xr,Br,Wr])),su=yo(Ve),uu=function(n){return n.toLowerCase()},cu=function(n){var e=a(ls,"*.item.location=PLAYER",n),r=m(["pass","missing_dog_poster"]),o=a(Hr,a(ro,t((function(e,o){var i,u,c=e.a,l=o.a,h=o.b;return u=(i=s(it,t((function(e,t){var r=t.a,o=t.b;return a(hs,c+"."+e,n)?a(Lo,e,o)?Y(r&&!1,o):Y(r&&!0,a(Ro,e,o)):Y(r&&!0,o)})),Y(!0,h),r)).b,Y(i.a?a(He,e,l):l,u)})),Y(g,su)),Ot);return a(ws,m([Ps("Sign Sign--inventory")]),m([a(ws,m([Ps("Sign__header2")]),m([Ls("Inventory")])),a(ws,m([Ps("Inventory")]),a(oo,(function(e){var o=e.a;return a(ws,m([Xs(m([Y("Inventory__item",!0),Y("Inventory__item--new",a(hs,o+".new",n))])),Ys(_r(o))]),m([a(Bs,m([Gs(function(e){return"img/icons/"+uu(a(lt,e,s(it,t((function(t,r){return k(r,ut)&&a(hs,e+"."+t,n)?st(t):r})),ut,r)))+".svg"}(o))]),g)]))}),o(e)))]))},lu=t((function(n,e){return s(it,t((function(n,t){var r=n.a;return a(Zr,e,n.b)?a(He,r,t):t})),g,n)})),hu=r((function(n,e,t){var r=n(e);return"Just"===r.$?a(He,r.a,t):t})),fu=t((function(n,e){return s(ro,hu(n),g,e)})),du=t((function(n,e){var t=iu(e);return a(ws,a(fu,cr,m([st(Ps("Connection "+t.id)),n?st(Ys(_r(t.id))):ut])),m([Ls(Qt(t.number))]))})),gu=t((function(n,e){return a(ws,m([Ps("Connections")]),a(oo,du(!0),a(ds,a(Hr,iu,(function(n){return n.number})),a(lu,n,e))))})),_u=r((function(n,e,t){var r=a(lt,"ERRORR getting station: "+t,a(bo,(function(n){return n.name+" Station"}),a(ct,t,e))),o=a(ls,"*.item.location="+t,e),i={cycleIndex:0,propKeywords:Ve,trigger:"",worldModel:e},s=a(ls,"*.character.location="+t,e),u=a(ws,m([Ps("Sign Sign--station")]),m([a(ws,m([Ps("Sign__header1")]),m([Ls(r)])),a(ws,m([Ps("Sign__split")]),m([a(ws,m([Ps("Sign__left")]),m([a(gu,n,t)])),a(ws,m([Ps("Sign__right")]),a(oo,a(Hr,mo((function(n){return n.name})),(function(n){var e=n.a,t=n.b;return a(ws,m([Ps("Sign__item Sign__item--interactable"),Ys(_r(e))]),m([Ls(a(lt,t,fs(a(ss,i,t))))]))})),G(s,o)))]))]));return a(ws,m([Ps("Scene Lobby")]),m([a(ws,m([Ps("Lobby__scene")]),m([u,cu(e)]))]))})),pu=t((function(n,e){return{$:"BoardTrain",a:n,b:e}})),mu=C,Eu=o((function(n,e,r,o){var i,u=s(Jr,"PLAYER","destination",o),c=iu(r),l=a(ws,m([Ps("Line_map__info")]),m([a(du,!1,r),Ls(c.name)])),h=t((function(t,i){return a(ws,m([Ps("Stop"),Ys(k(i,e)?pr:function(n){return a(hs,n+".out_of_service",o)}(i)?_r(i):k(u,ut)?a(pu,r,i):k(u,st(i))?a(pu,r,i):_r(i))]),m([a(ws,m([Ps("Stop__connections")]),a(oo,du(!1),a(oi,mu(t),function(e){return a(ds,a(Hr,iu,(function(n){return n.number})),a(lu,n,e))}(i)))),a(ws,m([Xs(m([Y("Stop__dot",!0),Y(iu(r).id,!0),Y("Stop__dot--current",k(i,e))]))]),g),a(ws,m([Xs(m([Y("Stop__name",!0),Y("Stop__name--current",k(i,e))]))]),m([Ls(function(n){return a(lt,"ERRORR getting station: "+e,a(bo,(function(n){return n.name+" Station"}),a(ct,n,o)))}(i))]))]))}));return a(ws,m([Ps("Scene Platform")]),m([(i=_r("LOBBY"),a(ws,m([Ps("Exit"),Ys(i)]),m([a(ws,m([Ps("Arrow")]),m([Ls(" ")])),a(ws,m([Ps("Exit__text")]),m([Ls("Exit")]))]))),a(ws,m([Ps("Line_map")]),m([l,a(ws,m([Ps("Line_map__stops")]),G(m([a(ws,m([Ps("Line_map__line "+c.id)]),g)]),a(oo,h(r),c.stations)))]))]))})),bu=t((function(n,e){var t=iu(e),r=!Ir(a(ls,"*.valid_on="+t.id+".location=PLAYER",n));return a(ws,m([Ps("Scene Turnstile")]),m([a(ws,m([Ps("Turnstile__dialog")]),m(r?[a(ws,m([Ps("Turnstile__status")]),m([a(Bs,m([Ps("Turnstile__icon"),Gs("img/icons/enter.svg")]),g),a(ws,g,m([a(ws,m([Ps("Turnstile__status_text")]),m([Ls("Ticket valid")])),a(ws,m([Ps("Turnstile__status_sub_text")]),m([Ls("Please proceed")]))]))])),a(ws,m([Ps("Turnstile__buttons")]),m([a(ws,m([Ps("Turnstile__button"),Ys(_r(t.id))]),m([Ls("Continue")]))]))]:[a(ws,m([Ps("Turnstile__status")]),m([a(Bs,m([Ps("Turnstile__icon"),Gs("img/icons/no_entry.svg")]),g),a(ws,g,m([a(ws,m([Ps("Turnstile__status_text")]),m([Ls("Invalid ticket")])),a(ws,m([Ps("Turnstile__status_sub_text")]),m([Ls("Do not enter")]))]))])),a(ws,m([Ps("Turnstile__buttons")]),m([a(ws,m([Ps("Turnstile__button"),Ys(_r("LOBBY"))]),m([Ls("Go back")])),a(ws,m([Ps("Turnstile__button"),Ys(_r(t.id))]),m([Ls("Jump turnstile")]))]))]))]))})),Iu={$:"ToggleTranscript"},yu=qn("textarea"),Ru=_n,Tu=t((function(n,e){return a(Zn,n,Ru(e))}))("readOnly"),Ou=zn,Su=t((function(n,e){return a(Ms,n,{$:"MayStopPropagation",a:e})})),vu=Z,Nu=X,Au=qn("input"),wu=Cs("placeholder"),ku=Cs("value"),Lu=function(n){return Y(n,!0)},Du=a(ru,m(["target","value"]),Rr),Cu=r((function(n,e,r){var o,i=r.a.lastInteractionId,s=r.a.lastMatchedRuleId,u=r.a.searchText,c=t((function(n,e){return a(vu,uu(n),uu(e))})),l=a(oo,(function(n){var e=n.a,t=n.b.tags,r=n.b.stats,o=n.b.links;return a(nr,".",a(oi,a(No,br,ii),a(oo,nr("."),m([m([e]),Ge(t),a(oo,(function(n){return a(nr,"=",m([n.a,Qt(n.b)]))}),Be(r)),a(oo,(function(n){return a(nr,"=",m([n.a,n.b]))}),Be(o))]))))}),Be(e)),h=ii(u)?g:a(ds,(function(n){return a(Nu,uu(u),uu(n))?-1:0}),a(oi,c(u),l));return a(ws,m([a(Ou,"color","yellow"),a(Ou,"font-family","Courier"),a(Ou,"background","black"),a(Ou,"opacity","0.9"),a(Ou,"lineHeight","1.5em")]),m([Ls("Debug mode"),a(Au,m([(o=n,a(Su,"input",a(vs,Lu,a(vs,o,Du)))),ku(u),wu("Search world model"),a(Ou,"margin","0 10px")]),g),a(ks,g,m([Ls("Last triggered rule: "+i+" - "+s)])),a(Zs,m([a(Ou,"borderTop","1px solid #333")]),a(oo,(function(n){return a(zs,g,m([Ls(n)]))}),h))]))})),Pu=t((function(n,e){return{links:e.links,name:n.name,stats:e.stats,tags:e.tags}})),Mu=t((function(n,e){return Y(n,{name:e})})),Hu=m([a(Mu,"PLAYER.chapter=0.day=1.location=EAST_MULBERRY.destination=BROADWAY_STREET","Steve"),a(Mu,"BRIEFCASE.item.location=PLAYER","Briefcase"),a(Mu,"RED_LINE_PASS.pass.item.location=PLAYER.valid_on=RED_LINE","Red Line metro pass"),a(Mu,"ORANGE_LINE_PASS.pass.item.valid_on=ORANGE_LINE","Orange Line metro pass"),a(Mu,"CELL_PHONE.item.location=PLAYER.new","Cell phone"),a(Mu,"MAP.item.map.silent","Subway map"),a(Mu,"NOTEBOOK.item.new","I keep track of my daily plans in this."),a(Mu,"DOLLAR_BILL.item.location=offscreen","Dollar bill"),a(Mu,"CHANGE.item.location=offscreen.amount=0","Loose change"),a(Mu,"SODA.item.location=offscreen","Soda"),a(Mu,"CENTRAL_GUARD_OFFICE.location","Central Guard Office"),a(Mu,"LOBBY.location","Station Lobby"),a(Mu,"COFFEE.item.location=offscreen","Coffee"),a(Mu,"TRASH_DIGGER.character.location=offscreen","Man digging in the trash"),a(Mu,"SKATER_DUDE.character.location=offscreen","Skater dude"),a(Mu,"BENCH_BUM.character.location=offscreen","Guy sleeping on a bench"),a(Mu,"COFFEE_CART.character.location=EAST_MULBERRY","Coffee cart"),a(Mu,"COMMUTER_1.character.location=EAST_MULBERRY","Woman in a maroon jacket"),a(Mu,"LOUD_PAYPHONE_LADY.character.location=EAST_MULBERRY","Loud woman on payphone"),a(Mu,"GRAFFITI.item.location=EAST_MULBERRY","Graffiti on the wall"),a(Mu,"SODA_MACHINE.item.broken.location=EAST_MULBERRY","Soda vending machine"),a(Mu,"SOGGY_JACKET.item.location=WEST_MULBERRY","Soggy looking jacket"),a(Mu,"BULLETIN_BOARD.item.location=WEST_MULBERRY","Bulletin board"),a(Mu,"TRASH_CAN_WEST_MULBERRY.item.location=WEST_MULBERRY","Trash can"),a(Mu,"DRINKING_FOUNTAIN.item.location=WEST_MULBERRY","Rusty drinking fountain"),a(Mu,"WOMAN_IN_ODD_HAT.character.location=CHURCH_STREET","A woman with an odd hat"),a(Mu,"SCHOOL_CHILDREN.character.location=CHURCH_STREET","A group of school children"),a(Mu,"MOTHER.character.screaming_child_quest=0.location=CHURCH_STREET","Mother and child"),a(Mu,"MISSIONARIES.character.location=CHURCH_STREET","Missionaries"),a(Mu,"SAFETY_WARNING_POSTER.item.location=TWIN_BROOKS","Safety message poster"),a(Mu,"MAP_POSTER.item.map.location=TWIN_BROOKS","Map on the wall"),a(Mu,"MAINTENANCE_MAN.character.location=TWIN_BROOKS","Maintenance man"),a(Mu,"EXIT.item.location=BROADWAY_STREET","Exit"),a(Mu,"SECURITY_OFFICERS.character.location=BROADWAY_STREET","Security officers"),a(Mu,"ANGRY_CROWD.character.location=BROADWAY_STREET","A large crowd of people"),a(Mu,"GIRL_IN_YELLOW.character.location=BROADWAY_STREET","Girl in yellow"),a(Mu,"MUSICIAN.character.location=CONVENTION_CENTER","Man playing violin"),a(Mu,"MAN_IN_RATTY_HAT.character.location=CONVENTION_CENTER","Man in a ratty brown hat"),a(Mu,"BROKEN_PAYPHONE.item.location=CONVENTION_CENTER","Broken payphone"),a(Mu,"BUSTLING_CROWD.character.location=CONVENTION_CENTER","Bustling crowds of people"),a(Mu,"MARCYS_PIZZA.item.fixed.location=CONVENTION_CENTER","Marcy's Pizza"),a(Mu,"SECURITY_DEPOT_SPRING_HILL_STATION.item.location=SPRING_HILL","Security Depot"),a(Mu,"TRASH_CAN_CAPITOL_HEIGHTS.item.location=CAPITOL_HEIGHTS","Trash can"),a(Mu,"ODD_KEY.item","Odd key"),a(Mu,"SHIFTY_MAN.character.location=CAPITOL_HEIGHTS","Shifty looking man"),a(Mu,"MARK.character.location=CAPITOL_HEIGHTS","{PLAYER.find_briefcase>2?Mark|Guy with cardboard sign}"),a(Mu,"SPIKY_HAIR_GUY.character.location=CAPITOL_HEIGHTS","Guy with Spiky Hair"),a(Mu,"GREEN_SUIT_MAN.character.location=CAPITOL_HEIGHTS","Man in a fancy green suit"),a(Mu,"BROOM_CLOSET.item.location=SEVENTY_THIRD_STREET","Broom closet"),a(Mu,"DISTRESSED_WOMAN.character.location=SEVENTY_THIRD_STREET","Woman in a Pink Poncho"),a(Mu,"PAYPHONE_SEVENTY_THIRD_STREET.item.location=SEVENTY_THIRD_STREET","Payphone"),a(Mu,"TRASH_CAN_THIRD_STREET.item.location=SEVENTY_THIRD_STREET","Trash can"),a(Mu,"BUSINESS_MAN.character.location=SEVENTY_THIRD_STREET","Slick Looking Business Man"),a(Mu,"MISSING_DOG_POSTER_1.item.missing_dog_poster","Missing dog poster"),a(Mu,"MISSING_DOG_POSTER_2.item.missing_dog_poster","Missing dog poster"),a(Mu,"MISSING_DOG_POSTER_3.item.missing_dog_poster","Missing dog poster"),a(Mu,"MISSING_DOG_POSTER_4.item.missing_dog_poster","Missing dog poster"),a(Mu,"MISSING_DOG_POSTER_5.item.missing_dog_poster","Missing dog poster"),a(Mu,"MISSING_DOG_POSTER_0.item.missing_dog_poster.location=SPRING_HILL","Missing dog poster"),a(Mu,"TICKET_INSPECTOR.character.location=CENTRAL_GUARD_OFFICE","Ticket inspector"),a(Mu,"INFRACTIONS_INSTRUCTIONS_POSTER.item",'"Infractions Instructions" poster'),a(Mu,"INFRACTIONS_COMPUTER.item","Computer"),a(Mu,"INFRACTIONS_PRINTER.item","Printer"),a(Mu,"INFRACTIONS_GREEN_BUTTON.item","Green button"),a(Mu,"INFRACTIONS_ROOM_DOOR.item","Solid door"),a(Mu,"INFRACTIONS_CARD_READER.item","Card reader"),a(Mu,"GRIZZLED_SECURITY_GUARD.character","Grizzled security guard"),a(Mu,"ONE_HUNDRED_FORTH_STREET.station","104th Street"),a(Mu,"FORTY_SECOND_STREET.station","42nd Street"),a(Mu,"SEVENTY_THIRD_STREET.station","73rd Street"),a(Mu,"BROADWAY_STREET.station","Broadway Street"),a(Mu,"BURLINGTON.station","Burlington"),a(Mu,"CAPITOL_HEIGHTS.station","Capitol Heights"),a(Mu,"CHURCH_STREET.station","Church Street"),a(Mu,"CONVENTION_CENTER.station","Convention Center"),a(Mu,"EAST_MULBERRY.station","East Mulberry"),a(Mu,"FAIRVIEW.station","Fairview"),a(Mu,"HIGHLAND.station","Highland"),a(Mu,"IRIS_LAKE.station","Iris Lake"),a(Mu,"MACARTHURS_PARK.station","MacArthur's Park"),a(Mu,"MUSEUM.station","Museum"),a(Mu,"NORWOOD.station","Norwood"),a(Mu,"PARK_AVE.station","Park Street"),a(Mu,"RIVERSIDE.station","Riverside"),a(Mu,"SAMUAL_STREET.station","Samual Street"),a(Mu,"SPRING_HILL.station","Spring Hill"),a(Mu,"ST_MARKS.station","St. Mark's"),a(Mu,"TWIN_BROOKS.station","Twin Brooks"),a(Mu,"UNIVERSITY.station","University"),a(Mu,"WALTER_HILL.station","Walter Hill"),a(Mu,"WESTGATE.station","Westgate"),a(Mu,"WEST_MULBERRY.station","West Mulberry"),a(Mu,"RED_LINE.line","Red line"),a(Mu,"YELLOW_LINE.line","Yellow line"),a(Mu,"GREEN_LINE.line","Green line"),a(Mu,"ORANGE_LINE.line","Orange line"),a(Mu,"BLUE_LINE.line","Blue line"),a(Mu,"PURPLE_LINE.line","Purple line")]),Yu=Na((function(n){return k(n,F(" "))||k(n,F("\n"))||k(n,F("\r"))})),$u=Ve,Fu=Ve,Bu=su,Gu=(Ja=t((function(n,e){return e(n)})),a(Ji,{links:$u,stats:Fu,tags:Bu},(function(n){return Zi(m([a(xi,a(xi,a(Ri,a(Ri,Qi(Ja),Yu),ra(".")),xa),Zi(m([a(xi,a(Ri,Qi(cr),ra("=")),Zi(m([a(Ui,(function(e){return function(t){return Di(s(qo,t,e,n))}}),Ba),a(Ui,(function(e){return function(t){return Di(s(Jo,t,e,n))}}),Ga)]))),Qi((function(e){return Di(a(To,e,n))}))]))),Qi(Li(n))]))}))),xu=a(xi,a(xi,Qi(t((function(n,e){return Y(n,e)}))),Ba),a(Ri,Gu,Ii)),Wu=t((function(n,e){var t=e.a;return a(Da,Pa,a(ri,mo(n(e.b)),a(hi,xu,t)))})),Uu=a(t((function(n,e){var r=t((function(n,e){return Y("Entity def: "+n,e)}));return s(it,t((function(e,t){var o=e.a,i=a(Wu,n,e);if("Ok"===i.$){var s=i.a;return a(ri,a(qe,s.a,s.b),t)}var u=i.a;if("Ok"===t.$)return Mt(m([a(r,o,u)]));var c=t.a;return Mt(a(He,a(r,o,u),c))})),Ht(Ve),e)})),Pu,Hu),ju=(Va=at,za={cycleIndex:0,propKeywords:Ve,trigger:"",worldModel:Ve},Za=r((function(n,e,t){return Y("Narrative content: "+n+"\n"+e+" ",Pa(t))})),s(rt,r((function(n,e,t){var r=a(hi,as(za),e);if("Ok"===r.$)return t;var o=r.a;if("Ok"===t.$)return Mt(m([s(Za,n,e,o)]));var i=t.a;return Mt(a(He,s(Za,n,e,o),i))})),Ht(H),Va)),Ku=r((function(n,e,t){return s(qe,n,Y(e,{}),t)})),qu=s(Ku,"meetConductorFirstTime","\n            ON: GRIZZLED_SECURITY_GUARD\n            DO: ORANGE_LINE_PASS.location=PLAYER\n                (*.pass).new\n                PLAYER.chapter=2\n            ",s(Ku,"escapingInfractionRoom","\n            ON: INFRACTIONS_ROOM_DOOR.infraction_step=3\n            DO: INFRACTIONS_INSTRUCTIONS_POSTER.location=offscreen\n                INFRACTIONS_COMPUTER.location=offscreen\n                INFRACTIONS_PRINTER.location=offscreen\n                INFRACTIONS_ROOM_DOOR.location=offscreen\n                INFRACTIONS_CARD_READER.location=offscreen\n                GRIZZLED_SECURITY_GUARD.location=CENTRAL_GUARD_OFFICE\n            ",s(Ku,"breakInfractionAutomationSystem","\n            ON: INFRACTIONS_GREEN_BUTTON\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=3\n                INFRACTIONS_GREEN_BUTTON.pressed\n            ",s(Ku,"infractionAutomationStep3","\n            ON: INFRACTIONS_PRINTER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step>1\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=3\n            ",s(Ku,"infractionAutomationStep2","\n            ON: INFRACTIONS_COMPUTER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step=1\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=2\n            ",s(Ku,"infractionAutomationStep1","\n            ON: INFRACTIONS_CARD_READER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step=0\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=1\n            ",s(Ku,"TICKET_INSPECTOR","\n            ON: TICKET_INSPECTOR\n            DO: INFRACTIONS_INSTRUCTIONS_POSTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_COMPUTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_PRINTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_ROOM_DOOR.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_CARD_READER.location=CENTRAL_GUARD_OFFICE\n                $.location=offscreen\n            ",s(Ku,"caughtOnOrangeLineHeadingToOther","\n            ON: *.station\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3\n            DO: PLAYER.location=ST_MARKS\n            ",s(Ku,"caughtOnOrangeLineHeadingTo73rd","\n            ON: SEVENTY_THIRD_STREET\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3\n            DO: PLAYER.location=ST_MARKS\n            ",s(Ku,"jumpTurnstileAfterTaklingToMark","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3.at_turnstile\n            DO: PLAYER.line=ORANGE_LINE.-at_turnstile\n            ",s(Ku,"pleasantriesWithMark","\n            ON: MARK\n            IF: PLAYER.find_briefcase>2\n            ",s(Ku,"markTellsAboutBroomCloset","\n            ON: MARK\n            IF: PLAYER.find_briefcase=2\n            DO: PLAYER.find_briefcase=3\n            ",s(Ku,"findKeyInTrashCan","\n            ON: TRASH_CAN_CAPITOL_HEIGHTS.!empty\n            DO: ODD_KEY.location=PLAYER\n                TRASH_CAN_CAPITOL_HEIGHTS.empty\n            ",s(Ku,"followSkaterDudeToCapitalHeights","\n            ON: CAPITOL_HEIGHTS\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.destination=xxx.location=CAPITOL_HEIGHTS.find_briefcase=2\n                SKATER_DUDE.location=offscreen.help_steve=2\n            ",s(Ku,"jumpTurnstileWithSkaterDude","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL.at_turnstile\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.line=ORANGE_LINE.-at_turnstile\n            ",s(Ku,"followSkaterDudeToOrangeLine","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.line=ORANGE_LINE.at_turnstile\n            ",s(Ku,"forcePlayerToFollowSkaterDudeToCapitolHeights","\n            ON: *.station\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            ",s(Ku,"forcePlayerToFollowSkaterDudeOntoOrangeLine","\n            ON: RED_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            ",s(Ku,"helpFromSkaterDude","\n            ON: SKATER_DUDE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n            DO: SKATER_DUDE.help_steve=1\n                PLAYER.destination=CAPITOL_HEIGHTS\n            ",s(Ku,"findingSecurityDepotClosed","\n            ON: SECURITY_DEPOT_SPRING_HILL_STATION\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<5\n                PLAYER.chapter=1\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=5\n                SKATER_DUDE.location=SPRING_HILL\n            ",s(Ku,"panic","\n            ON: *.station\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=2\n                PLAYER.chapter=1\n            DO: PLAYER.location=$\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(Ku,"ignoreGuardsAdvice","\n            ON: *.station\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n                PLAYER.chapter=1\n            DO: PLAYER.location=$\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(Ku,"followGuardsAdvice","\n            ON: SPRING_HILL\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n                PLAYER.chapter=1\n            DO: PLAYER.location=SPRING_HILL\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(Ku,"tellCommuter1AboutStolenBriefcase","\n            ON: COMMUTER_1\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot>1\n            ",s(Ku,"tellOfficersAboutStolenBriefcase","\n            ON: SECURITY_OFFICERS\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=2\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n            ",s(Ku,"briefcaseStolen","\n            ON: *.line\n            IF: PLAYER.chapter=1\n                BROADWAY_STREET.leaving_broadway_street_station_plot=1\n            DO: BRIEFCASE.location=THIEF\n                BROADWAY_STREET.leaving_broadway_street_station_plot=2\n                GIRL_IN_YELLOW.location=offscreen\n                PLAYER.find_briefcase=1.present_proposal+1\n            ",s(Ku,"noticeGirlInYellow","\n            ON: GIRL_IN_YELLOW\n            IF: PLAYER.chapter=1\n            DO: GIRL_IN_YELLOW.who_was_girl_in_yellow_quest=1\n                GIRL_IN_YELLOW.location=offscreen\n            ",s(Ku,"askCommuter1AboutDelay","\n            ON: COMMUTER_1\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<2\n                PLAYER.chapter=1\n            ",s(Ku,"askOfficersAboutDelay","\n            ON: SECURITY_OFFICERS\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<2\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=1\n                PLAYER.present_proposal+1\n            ",s(Ku,"leavingBroadwayStationPrematurely","\n            ON: *.line\n            IF: PLAYER.location=BROADWAY_STREET\n                BROADWAY_STREET.leaving_broadway_street_station_plot<1\n            ",s(Ku,"notGoingToWorkAgain","\n            ON: *.station\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            ",s(Ku,"delaysAtBroadwayStreetStation","\n            ON: BROADWAY_STREET\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            DO: PLAYER.location=BROADWAY_STREET.destination=xxx\n                BROADWAY_STREET.out_of_service\n                COMMUTER_1.location=BROADWAY_STREET\n            ",s(Ku,"getMap","\n            ON: MAP_POSTER\n            IF: MAP.!location=PLAYER\n            DO: MAP.location=PLAYER\n            ",s(Ku,"askMaintenanceManForDirections","\n            ON: MAINTENANCE_MAN\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            ",Ve)))))))))))))))))))))))))))))))))),Ju=s(Ku,"tryToHangRedundantDogPosters","\n            ON: *.missing_dog_poster.location=PLAYER\n            IF: *.missing_dog_poster.location=(link PLAYER.location)\n                DISTRESSED_WOMAN.help_hang<99\n            ",s(Ku,"tryToHangDogPosterOnWrongLine","\n            ON: *.missing_dog_poster.location=PLAYER\n            IF: PLAYER.!line=RED_LINE\n            ",s(Ku,"putUpMissingDogPoster","\n            ON: *.missing_dog_poster.location=PLAYER\n            DO: $.location=(link PLAYER.location)\n                DISTRESSED_WOMAN.help_hang+1\n            ",s(Ku,"lookAtHangingDogPosters","\n            ON: *.missing_dog_poster\n            ",s(Ku,"tryingToCallBossWithCellphone","\n            ON: CELL_PHONE\n            IF: PLAYER.call_boss=1\n            ",s(Ku,"getDogPostersFromDistressedWoman","\n            ON: DISTRESSED_WOMAN\n            DO: MISSING_DOG_POSTER_1.location=PLAYER\n                MISSING_DOG_POSTER_2.location=PLAYER\n                MISSING_DOG_POSTER_3.location=PLAYER\n                MISSING_DOG_POSTER_4.location=PLAYER\n                MISSING_DOG_POSTER_5.location=PLAYER\n                DISTRESSED_WOMAN.location=offscreen\n            ",s(Ku,"ponderingCallingBossOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.call_boss=1\n            DO: PLAYER.location=$\n            ",s(Ku,"needCoinsForPayphone","\n            ON: PAYPHONE_SEVENTY_THIRD_STREET\n            IF: PLAYER.call_boss=1\n            ",s(Ku,"checkBroomClosetButNotBriefcase","\n            ON: BROOM_CLOSET\n            IF: PLAYER.find_briefcase=3\n            DO: PLAYER.find_briefcase=4.call_boss=1\n            ",Ve))))))))),Vu=s(Ku,"inspectPasses","\n            ON: *.pass\n            DO: (*.pass.new).-new\n            ",s(Ku,"notebookInstructions","\n            ON: NOTEBOOK.new\n            DO: NOTEBOOK.-new.silent\n            ",s(Ku,"checkMap","\n            ON: *.map\n            ",s(Ku,"jumpTurnstileFail","\n            ON: *.line\n            DO: PLAYER\n            ",s(Ku,"goToLinePlatform","\n            ON: *.line\n            IF: PLAYER.at_turnstile\n                *.valid_on=$.location=PLAYER\n            DO: PLAYER.-at_turnstile\n            ",s(Ku,"goToLineTurnstile","\n            ON: *.line\n            IF: PLAYER.!at_turnstile\n            DO: PLAYER.line=$.at_turnstile\n            ",s(Ku,"goToLobby","\n            ON: LOBBY\n            DO: PLAYER.-at_turnstile\n            ",s(Ku,"outOfServiceStations","\n            ON: *.station.out_of_service\n            ",s(Ku,"ridingTheTrain","\n            ON: *.station\n            DO: PLAYER.location=$\n            ",Ve))))))))),zu=s(Ku,"fallAsleep","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=5.chapter=0\n            DO: PLAYER.location=TWIN_BROOKS.chapter+1.present_proposal+1\n                COFFEE.location=offscreen\n            ",s(Ku,"endThursday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=4\n            DO: PLAYER.location=EAST_MULBERRY.day+1.present_proposal=1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                TRASH_DIGGER.location=offscreen\n                BENCH_BUM.location=offscreen\n                SODA_MACHINE.-broken\n                NOTEBOOK.location=PLAYER\n            ",s(Ku,"endWednesday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=3\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                SKATER_DUDE.location=offscreen\n                TRASH_DIGGER.location=EAST_MULBERRY\n                BENCH_BUM.location=EAST_MULBERRY\n            ",s(Ku,"endTuesday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=2\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                TRASH_DIGGER.location=offscreen\n                SKATER_DUDE.location=EAST_MULBERRY\n            ",s(Ku,"endMonday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=1\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                COMMUTER_1.location=offscreen\n                LOUD_PAYPHONE_LADY.location=offscreen\n                TRASH_DIGGER.location=EAST_MULBERRY\n            ",s(Ku,"firstInteractionWithCommuter1","\n            ON: COMMUTER_1\n            IF: PLAYER.chapter=0\n            DO: COMMUTER_1.friendliness=1\n            ",s(Ku,"firstMeetSkaterDude","\n            ON: SKATER_DUDE\n            IF: PLAYER.chapter=0\n            DO: $.location=offscreen\n            ",s(Ku,"get_caffeinated_quest_3","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=3\n            IF: PLAYER.chapter=0\n            ",s(Ku,"get_caffeinated_quest_2","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=2\n            IF: PLAYER.chapter=0\n            DO: $.get_caffeinated_quest+1\n                PLAYER.persistent+1\n            ",s(Ku,"get_caffeinated_quest_1","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=1\n            IF: PLAYER.chapter=0\n            DO: $.get_caffeinated_quest+1\n            ",s(Ku,"sodaMachineFixed","\n            ON: SODA_MACHINE.!broken\n            IF: PLAYER.chapter=0\n            ",s(Ku,"sodaMachineBroken","\n            ON: SODA_MACHINE.broken\n            ",s(Ku,"coffeeCartFriday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=5.chapter=0\n                SODA_MACHINE.get_caffeinated_quest<1\n            DO: SODA_MACHINE.get_caffeinated_quest=1\n            ",s(Ku,"coffeeCartThursday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=4\n            DO: COFFEE.location=PLAYER\n            ",s(Ku,"coffeeCartWednesday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=3\n            DO: COFFEE.location=PLAYER\n            ",s(Ku,"coffeeCartTuesday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=2\n            DO: COFFEE.location=PLAYER\n            ",s(Ku,"coffeeCartMonday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=1\n            DO: COFFEE.location=PLAYER\n            ",s(Ku,"forcePlayerToReadEmails","\n            ON: *.line\n            IF: CELL_PHONE.new\n                PLAYER.chapter=0\n            ",s(Ku,"checkEmails","\n            ON: CELL_PHONE\n            DO: CELL_PHONE.-new\n            ",s(Ku,"notGoingToWork","\n            ON: *.station\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=0\n            ",Ve)))))))))))))))))))),Zu=s(it,ot,Vu,m([s(Ku,"ratty_hat_man_advice_5","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=4\n            DO: $.location=offscreen.ratty_hat_man_advice+1\n            ",s(Ku,"ratty_hat_man_advice_4","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=3\n            DO: $.location=HIGHLAND.ratty_hat_man_advice+1\n            ",s(Ku,"ratty_hat_man_advice_3","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=2\n            DO: $.location=PARK_AVE.ratty_hat_man_advice+1\n            ",s(Ku,"ratty_hat_man_advice_2","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=1\n            DO: $.location=NORWOOD.ratty_hat_man_advice+1\n            ",s(Ku,"ratty_hat_man_advice_1","\n            ON: MAN_IN_RATTY_HAT\n            DO: $.location=TWIN_BROOKS.ratty_hat_man_advice+1\n            ",s(Ku,"giveSodaToScreamingChild","\n            ON: MOTHER.screaming_child_quest=1\n            IF: SODA.location=PLAYER\n            DO: SODA.location=offscreen\n                MOTHER.screaming_child_quest=2\n            ",s(Ku,"getSodaForScreamingChild","\n            ON: SODA_MACHINE\n            IF: MOTHER.screaming_child_quest=1\n                DOLLAR_BILL.location=PLAYER\n            DO: DOLLAR_BILL.location=offscreen\n                SODA.location=PLAYER\n                CHANGE.location=PLAYER.amount+25\n            ",s(Ku,"offerToHelpScreamingChild","\n            ON: MOTHER.met.screaming_child_quest=0\n            DO: DOLLAR_BILL.location=PLAYER\n                MOTHER.screaming_child_quest=1\n            ",s(Ku,"meetingScreamingChild","\n            ON: MOTHER.!met\n            DO: MOTHER.met\n            ",Ve))))))))),zu,qu,Ju])),Xu=t((function(n,e){return{$:"DecStat",a:n,b:e}})),Qu=t((function(n,e){return{$:"IncStat",a:n,b:e}})),nc=t((function(n,e){return{$:"LookUpLinkTarget",a:n,b:e}})),ec=t((function(n,e){return{$:"SetLink",a:n,b:e}})),tc=t((function(n,e){return{$:"SetStat",a:n,b:e}})),rc=function(n){return{$:"SpecificLinkTarget",a:n}},oc=(Xa=r((function(n,e,t){return Di(a(He,t(e),n))})),a(Ji,g,(function(n){return Zi(m([a(xi,a(Ri,a(Ri,Qi(cr),Aa(Tt(F(" ")))),ra(".")),Zi(m([a(xi,a(Ri,Qi((function(e){return Di(a(He,{$:"RemoveTag",a:e},n))})),ra("-")),xa),a(xi,a(xi,Qi(Xa(n)),xa),Zi(m([a(xi,a(Ri,Qi(cr),ra("+")),a(Ui,(function(n){return function(e){return a(Qu,e,n)}}),Ga)),a(xi,a(Ri,Qi(cr),ra("-")),a(Ui,(function(n){return function(e){return a(Xu,e,n)}}),Ga)),a(xi,a(Ri,Qi(cr),ra("=")),Zi(m([a(Ui,(function(n){return function(e){return a(tc,e,n)}}),Ga),a(Ui,(function(){return function(n){return a(ec,n,rc("$"))}}),ra("$")),a(Ui,(function(n){return function(e){return a(ec,e,rc(n))}}),Ba),(e=r((function(n,e,t){return a(ec,t,a(nc,n,e))})),a(xi,a(xi,a(Ri,a(Ri,Qi(e),wa("(link")),Aa(Tt(F(" ")))),a(Ri,Zi(m([a(Ui,vr("$"),Ma("$")),Ba])),ra("."))),a(Ri,xa,ra(")"))))]))),Qi((function(n){return{$:"AddTag",a:n}}))])))]))),Qi(Li(n))]));var e}))),ic=t((function(n,e){return{$:"Update",a:n,b:e}})),ac=t((function(n,e){return{$:"UpdateAll",a:n,b:e}})),sc=Zi(m([a(Ui,vr(ic("$")),ra("$")),a(Ui,ic,Ba),a(xi,a(Ri,a(Ri,Qi(cr),ra("(")),ra("*")),a(Ri,a(Ui,(function(n){return ac(n)}),qa),ra(")")))])),uc=a(xi,a(xi,Qi(t((function(n,e){return n(e)}))),sc),oc),cc=(Qa=a(xi,a(Ri,a(Ri,a(Ri,Qi(cr),Yu),Zi(m([wa("ON:"),wa("ON")]))),Yu),a(Ri,Ka,Yu)),ns=r((function(n,e,t){return{changes:t,conditions:e,trigger:n}})),es=a(xi,a(Ri,a(Ri,Qi(cr),Zi(m([wa("IF:"),wa("IF"),Qi(H)]))),Yu),a(Ji,g,(function(n){return Zi(m([a(Ui,(function(){return Li(yt(n))}),a(Ri,Zi(m([wa("DO:"),wa("DO"),Ii])),Yu)),a(Ui,(function(e){return Di(a(He,e,n))}),a(Ri,Ka,Yu))]))}))),ts=a(Ji,g,(function(n){return Zi(m([a(Ui,(function(){return Li(yt(n))}),Ii),a(Ui,(function(e){return Di(a(He,e,n))}),a(Ri,uc,Yu))]))})),a(xi,a(xi,a(xi,Qi(ns),Qa),es),ts)),lc=t((function(n,e){var t=e.a;return a(Da,Pa,a(ri,n(e.b),a(hi,a(Ri,cc,Ii),t)))})),hc=a(t((function(n,e){var t=r((function(n,e,t){return Y("Rule: "+n+"\n"+e.a+" ",t)}));return s(rt,r((function(e,r,o){var i=a(lc,n,r);if("Ok"===i.$)return a(ri,a(qe,e,i.a),o);var u=i.a;if("Ok"===o.$)return Mt(m([s(t,e,r,u)]));var c=o.a;return Mt(a(He,s(t,e,r,u),c))})),Ht(Ve),e)})),vr(cr),Zu),fc=Ne,dc=o((function(n,e,t,r){if("Err"===e.$)return Mt(e.a);var o=e.a;if("Err"===t.$)return Mt(t.a);var i=t.a;return"Err"===r.$?Mt(r.a):Ht(s(n,o,i,r.a))})),gc=t((function(n,e){return"Ok"===e.$?e.a:n})),_c=rn,pc=qn("code"),mc=qn("pre");!function(e){n.Elm?function n(e,t,r){for(var o in r)o in t?"init"==o?A(6,e):n(e+"."+o,t[o],r[o]):t[o]=r[o]}("Elm",n.Elm,e):n.Elm=e}({Main:{init:fc({init:fr(a(gc,Ve,a(ri,Ot,rs=u(dc,r((function(n,e,t){return Y(n,t)})),Uu,ju,hc)))),subscriptions:function(n){return Nr(m([Sr(vr(dr)),Tr(yr(n))]))},update:Os(a(gc,Ve,a(ri,gs,rs))),view:function(n){return"Ok"===rs.$?{body:m([function(n){return n.loaded?n.showSelectScene?function(n){var e=m(["LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","MAP_POSTER","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","SECURITY_OFFICERS","RED_LINE","SECURITY_OFFICERS","RED_LINE","RED_LINE","SPRING_HILL","LOBBY","SECURITY_DEPOT_SPRING_HILL_STATION","SKATER_DUDE","ORANGE_LINE","ORANGE_LINE","CAPITOL_HEIGHTS","MARK","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","TICKET_INSPECTOR","INFRACTIONS_GREEN_BUTTON","INFRACTIONS_ROOM_DOOR","GRIZZLED_SECURITY_GUARD"]),t=function(t){return Y(n,a(Js,t,e))},r=m(["ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","BROOM_CLOSET","PAYPHONE_SEVENTY_THIRD_STREET","DISTRESSED_WOMAN","MISSING_DOG_POSTER_5","BUSINESS_MAN","ORANGE_LINE","ORANGE_LINE","SPRING_HILL","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_5","RED_LINE","RED_LINE","CONVENTION_CENTER","MISSING_DOG_POSTER_5","MISSING_DOG_POSTER_4","MISSING_DOG_POSTER_5","RED_LINE","RED_LINE","BROADWAY_STREET","CHURCH_STREET","MISSING_DOG_POSTER_4","MISSING_DOG_POSTER_4","RED_LINE","RED_LINE","EAST_MULBERRY","MISSING_DOG_POSTER_3","RED_LINE","RED_LINE","WEST_MULBERRY","MISSING_DOG_POSTER_2","RED_LINE","RED_LINE","TWIN_BROOKS","MISSING_DOG_POSTER_1","MISSING_DOG_POSTER_1"]),o=G(m(["LOBBY","BRIEFCASE","RED_LINE_PASS","RED_LINE_PASS","RED_LINE","CELL_PHONE","CELL_PHONE","CELL_PHONE","COFFEE_CART","COFFEE","COFFEE_CART","COMMUTER_1","COMMUTER_1","LOUD_PAYPHONE_LADY","COFFEE_CART","LOUD_PAYPHONE_LADY","GRAFFITI","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","RED_LINE_PASS","COFFEE_CART","COFFEE_CART","TRASH_DIGGER","TRASH_DIGGER","GRAFFITI","COFFEE","CELL_PHONE","CELL_PHONE","RED_LINE","RED_LINE","CONVENTION_CENTER","BROADWAY_STREET","LOBBY","RED_LINE","SKATER_DUDE","COFFEE_CART","COFFEE_CART","COFFEE","CELL_PHONE","CELL_PHONE","COFFEE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","COFFEE_CART","COFFEE_CART","COFFEE_CART","COFFEE","RED_LINE","RED_LINE","CHURCH_STREET","BROADWAY_STREET","LOBBY","CELL_PHONE","COFFEE_CART","RED_LINE","RED_LINE","LOBBY","RED_LINE","RED_LINE","BROADWAY_STREET","MAP_POSTER","MAP","SAFETY_WARNING_POSTER","CONVENTION_CENTER","BROADWAY_STREET","LOBBY","EXIT","ANGRY_CROWD","YELLOW_LINE","RED_LINE","COMMUTER_1","COMMUTER_1","GIRL_IN_YELLOW","NOTEBOOK","SECURITY_OFFICERS","RED_LINE","ANGRY_CROWD","COMMUTER_1","SECURITY_OFFICERS","RED_LINE","RED_LINE","SPRING_HILL","LOBBY","SECURITY_DEPOT_SPRING_HILL_STATION","RED_LINE","RED_LINE","CHURCH_STREET","MOTHER","MOTHER","RED_LINE","RED_LINE","EAST_MULBERRY","SODA_MACHINE","RED_LINE","RED_LINE","CHURCH_STREET","MOTHER","RED_LINE","RED_LINE","SPRING_HILL","SECURITY_DEPOT_SPRING_HILL_STATION","SKATER_DUDE","SKATER_DUDE","RED_LINE","ORANGE_LINE","ORANGE_LINE","UNIVERSITY","ST_MARKS","CAPITOL_HEIGHTS","GREEN_SUIT_MAN","SHIFTY_MAN","TRASH_CAN_CAPITOL_HEIGHTS","ODD_KEY","SPIKY_HAIR_GUY","MARK","MARK","YELLOW_LINE","YELLOW_LINE","LOBBY","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","TICKET_INSPECTOR","INFRACTIONS_INSTRUCTIONS_POSTER","INFRACTIONS_ROOM_DOOR","INFRACTIONS_PRINTER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_CARD_READER","INFRACTIONS_PRINTER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_PRINTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_PRINTER","INFRACTIONS_ROOM_DOOR","GRIZZLED_SECURITY_GUARD","RED_LINE_PASS"]),r),i=m([Y("(Interact with everything)",Y(n,o)),Y("Recieved orange line pass",t(51)),Y("Caught",t(47)),Y("Orange line",t(43)),Y("Run into skater dude again",t(39)),Y("Briefcase stolen",t(33)),Y("Arrive at Twin Brooks",t(26)),Y("Friday",t(20)),Y("Thursday",t(15)),Y("Wednesday",t(10)),Y("Tuesday",t(5)),Y("Beginning",Y(n,g))]);return a(ws,m([Ps("SelectScene")]),m([a(ou,g,m([Ls("Select a scene to jump to:")])),a(Zs,g,a(oo,(function(n){var e,t=n.a;return a(zs,m([Ys((e=n.b,{$:"LoadScene",a:e}))]),m([Ls(t)]))}),i))]))}(n):a(ws,g,m([k(n.scene,we)?(e=a(lt,"ERROR: No story to show",fs(n.story)),a(ws,m([Ps("Scene MainTitleScene")]),m([a(ws,m([Ps("MainTitleContent")]),m([a(Fs,g,e),a(ks,m([Ps("StoryLine__continue"),Ys(gr)]),m([Ls("Continue...")]))]))]))):function(n){var e,o,i,c,l,h=a(hs,"PLAYER.caught",n.worldModel)?Mr:n.scene,f=au,d=a(lt,"ERROR getting the current location of player from worldmodel",s(Jr,"PLAYER","location",n.worldModel));return s(eu,"div",m([Ps("game")]),m([function(){switch(h.$){case"MainTitle":return Y("mainTitle",Ls(""));case"Title":return Y("title",(t=h.a,a(ws,m([Ps("Scene TitleScene")]),m([a(ws,m([Ps("TitleContent")]),m([a(ou,m([Ps("Title")]),m([Ls(t)])),a(ks,m([Ps("StoryLine__continue"),Ys(_r("LOBBY"))]),m([Ls("Continue...")]))]))]))));case"CentralGuardOffice":return Y("centralGuardOffice",(o=a(ls,"*.item.location=CENTRAL_GUARD_OFFICE",r=n.worldModel),i=a(ls,"*.character.location=CENTRAL_GUARD_OFFICE",r),a(ws,m([Ps("Scene CentralGuardOffice")]),m([a(ws,m([Ps("CentralGuardOffice--content Sign__right")]),a(oo,a(Hr,mo((function(n){return n.name})),(function(n){var e=n.a,t=n.b;return a(ws,m([Ps("Sign__item Sign__item--interactable"),Ys(_r(e))]),m([Ls(t)]))})),G(i,o))),cu(r)]))));case"Lobby":return Y("lobby",s(_u,f,n.worldModel,d));case"Platform":return Y("platform",u(Eu,f,d,e=h.a,n.worldModel));case"Turnstile":return Y("turnstile",a(bu,n.worldModel,e=h.a));default:var e=h.a.line;return Y("train",function(n){var e=n.arrivingAtStation,t=n.worldModel,r=a(lt,iu(n.line).name,a(bo,(function(n){return"Arriving at: "+function(n){return a(lt,"ERRORR getting station: "+n,a(bo,(function(n){return n.name+" Station"}),a(ct,n,t)))}(n)}),e)),o=a(ws,m([Ps("train__ticker")]),m([a(ws,m([Ps("train__info")]),m([Ls(r)]))]));return m([Ps("train__foreground")]),m([a(ws,m([Ps("train__top")]),m([a(ws,m([Ps("train__ticker")]),m([a(ws,m([Ps("train__info")]),m([Ls(r)]))]))])),a(ws,m([Ps("train__doors")]),m([a(ws,m([Ps("train__door train__door--left")]),g),a(ws,m([Ps("train__door train__door--right")]),g)]))]),m([Ps("train__background")]),a(ws,m([Ps("Scene train")]),m([o]))}({arrivingAtStation:k(h.a.status,Ar)?st(d):ut,line:e,worldModel:n.worldModel}))}var t,r,o,i}(),Y("story",(e=a(lt,"",fs(n.story)),ii(e)?Ls(""):(o=e,i=a(vs,(function(n){return Y(_r(a(Qs,1,n)),!0)}),a(ru,m(["target","pathname"]),Rr)),c=a(nu,"click",a(vs,cr,i)),s(eu,"div",m([Ps("StoryLine")]),m([Y(o,a(ws,m([Ps("StoryLine__content")]),m([a(Fs,m([c]),o),a(ks,m([Ps("StoryLine__continue"),Ys(gr)]),m([Ls("Continue...")]))])))]))))),Y("notebook",n.showNotebook?(l=n.worldModel,a(ws,m([Ps("Notebook__scrim"),Ys(Er)]),m([function(n){var e=r((function(n,e,t){return a(zs,m([Xs(m([Y("Notebook__item",!0),Y("done",P(t,qt(e))>-1)]))]),m([a(ws,m([Ps("Notebook__subheading")]),m([Ls(n)])),a(Zs,m([Ps("Notebook__sublist")]),a(oo,(function(n){return a(zs,m([Ps("Notebook__subitem")]),m([Ls(n)]))}),a(Js,t,e)))]))})),o=function(r){return a(Zs,m([Ps("Notebook__content")]),yt(s(it,t((function(t,r){var o,i=t.b,u=t.c,c=(o=a(er,".",t.a)).b&&o.b.b&&!o.b.b.b?s($r,o.a,o.b.a,n):ut;if("Just"===c.$){var l=c.a;return l>0?a(He,s(e,i,u,l),r):r}return r})),g,r)))};return a(ws,m([Ps("Notebook")]),m([a(ws,m([Ps("Notebook__page")]),m([a(Vs,m([Ps("Notebook__header")]),m([Ls("Goals:")])),o(Us)])),a(ws,m([Ps("Notebook__page")]),m([a(Vs,m([Ps("Notebook__header")]),m([Ls("Distractions:")])),o(Ws)]))]))}(l)]))):Ls("")),Y("map",n.showMap?xs:Ls(""))]))}(n),a(ws,m([Ps("Debug"),a(Su,"keydown",Ns(Y(pr,!0)))]),m([a(lt,Ls(""),a(bo,a(Cu,Ss,n.worldModel),n.debugState))])),k(n.debugState,ut)?Ls(""):function(n){return a(ws,g,m([a(ws,m([a(Ou,"color","green"),a(Ou,"display","block"),a(Ou,"position","absolute"),a(Ou,"z-index","99"),a(Ou,"padding","2px"),a(Ou,"bottom","0"),a(Ou,"left","1em"),a(Ou,"cursor","pointer"),Ys(Iu)]),m([Ls("transcript")])),n.showTranscript?a(yu,m([a(Ou,"color","green"),a(Ou,"position","absolute"),a(Ou,"z-index","99"),a(Ou,"width","50%"),a(Ou,"height","70%"),a(Ou,"top","3em"),a(Ou,"left","1em"),Tu(!0)]),m([Ls(a(nr,"\n",n.transcript))])):Ls("")]))}(n)])):a(ws,m([Ps("Loading")]),m([Ls("Loading...")]));var e}(n)]),title:"Subway!"}:{body:m([function(n){return a(ws,m([a(Ou,"background","black"),a(Ou,"color","red"),a(Ou,"padding","4em"),a(Ou,"display","flex"),a(Ou,"flex-direction","column"),a(Ou,"align-items","center"),a(Ou,"justify-content","center")]),m([a(ou,g,m([Ls("Errors when parsing!  Please fix:")])),a(Zs,m([a(Ou,"width","100%")]),a(oo,(function(n){var e=n.a,t=n.b;return a(zs,m([a(Ou,"margin-bottom","2em")]),m([a(mc,m([a(Ou,"background","white"),a(Ou,"padding","1em"),a(Ou,"color","black"),a(Ou,"overflow"," auto"),a(Ou,"width","100%")]),m([a(pc,g,m([Ls(e)]))])),Ls(t)]))}),n))]))}(rs.a)]),title:"Errors found"}}})(a(_c,(function(n){return Ns({debug:n})}),a(tu,"debug",Or)))(0)}})}(this)},function(n,e,t){var r={"./gurad-office.jpg":13,"./icons/briefcase.svg":14,"./icons/cell_phone.svg":15,"./icons/change.svg":16,"./icons/coffee.svg":17,"./icons/dollar_bill.svg":18,"./icons/enter.svg":19,"./icons/map.svg":20,"./icons/missing_dog_poster.svg":21,"./icons/no_entry.svg":22,"./icons/notebook.svg":23,"./icons/odd_key.svg":24,"./icons/orange_line_pass.svg":25,"./icons/pass.svg":26,"./icons/soda.svg":27,"./map-red-yellow-green.jpg":28,"./notebook.jpg":29,"./riding-train.jpg":30,"./subway-lobby.jpg":31,"./subway-map-full.jpg":32,"./subway-turnstile.jpg":33,"./title.jpg":34,"./train.jpg":35};function o(n){var e=i(n);return t(e)}function i(n){if(!t.o(r,n)){var e=Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return r[n]}o.keys=function(){return Object.keys(r)},o.resolve=i,n.exports=o,o.id=12},function(n){n.exports="../../img/gurad-office.jpg"},function(n){n.exports="../../fonts/briefcase.svg"},function(n){n.exports="../../fonts/cell_phone.svg"},function(n){n.exports="../../fonts/change.svg"},function(n){n.exports="../../fonts/coffee.svg"},function(n){n.exports="../../fonts/dollar_bill.svg"},function(n){n.exports="../../fonts/enter.svg"},function(n){n.exports="../../fonts/map.svg"},function(n){n.exports="../../fonts/missing_dog_poster.svg"},function(n){n.exports="../../fonts/no_entry.svg"},function(n){n.exports="../../fonts/notebook.svg"},function(n){n.exports="../../fonts/odd_key.svg"},function(n){n.exports="../../fonts/orange_line_pass.svg"},function(n){n.exports="../../fonts/pass.svg"},function(n){n.exports="../../fonts/soda.svg"},function(n){n.exports="../../img/map-red-yellow-green.jpg"},function(n){n.exports="../../img/notebook.jpg"},function(n){n.exports="../../img/riding-train.jpg"},function(n){n.exports="../../img/subway-lobby.jpg"},function(n){n.exports="../../img/subway-map-full.jpg"},function(n){n.exports="../../img/subway-turnstile.jpg"},function(n){n.exports="../../img/title.jpg"},function(n){n.exports="../../img/train.jpg"}]);