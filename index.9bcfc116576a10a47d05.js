!function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){t(1),t(2),t(3),t(4),t(5),t(6),t(7),t(8),t(9),t(10),t(11);const{Elm:o}=t(12),r="#debug"===location.hash,a=o.Main.init({node:document.getElementById("main"),flags:{debug:r}});let i,s,u,l,c;a.ports.persistListReq.subscribe(()=>{let n=Object.entries(localStorage).filter(([n,e])=>n.startsWith("persist-")).sort(([n,e],[t,o])=>JSON.parse(o).timestamp-JSON.parse(e).timestamp).map(([n,e])=>n.slice(8));a.ports.persistListRes.send([(new Date).toUTCString(),n])}),a.ports.persistLoadReq.subscribe(n=>{let{history:e}=JSON.parse(localStorage.getItem("persist-"+n))||{history:[]};e&&setTimeout(()=>a.ports.persistLoadRes.send(e),100)}),a.ports.persistSaveReq.subscribe(([n,e])=>{localStorage.setItem("persist-"+n,JSON.stringify({timestamp:Date.now(),history:e})),a.ports.persistListChanged.send(null)}),a.ports.persistDeleteReq.subscribe(n=>{localStorage.removeItem("persist-"+n),a.ports.persistListChanged.send(null)}),a.ports.playSound.subscribe(n=>{p[n].play()});const h={"music/song2":6};function _(){return`${l}/loop${c+1}`}function d(){Date.now()>i?E():requestAnimationFrame(d)}function E(){l=s,c=u;let n=_();console.debug("playing loop",n),i=1e3*p[n].duration()*.66+Date.now(),p[n].play(),requestAnimationFrame(d)}function f(n){let e=p[n].volume();p[n].fade(e,0,1e3).once("fade",()=>p[n].stop().volume(e))}let g;a.ports.playMusic.subscribe((function(n){s=n,u=0,l&&c&&p[_()].playing()||E()})),a.ports.queueNextLoop.subscribe(()=>u=(u+1)%h[l]),a.ports.stopSound.subscribe(f),a.ports.stopMusic.subscribe(()=>{l&&f(_())}),a.ports.lowerMusicVolume.subscribe(()=>{if(!l)return;let n=_();g=p[n].volume(),p[n].fade(g,g/2,1e3)}),a.ports.restoreMusicVolume.subscribe(()=>{if(!l)return;let n=_(),e=p[n].volume();p[n].fade(e,g,1e3)});var I=0,R=0;const m=document.getElementById("loading-progress");function T(){m.value=++R/I,m.innerText=R/I,R===I&&(console.log("all assets loaded"),a.ports.loaded.send(!0))}t(13).keys().map((function(n){I++;var e=new Image;return e.src="img/"+n,e.onload=T,console.log("loading image",e.src),e}));const p={};Object.entries({"music/song1/piano2":{exts:["mp3"],waitForLoad:!0,loop:!0},"music/song2/loop1":{exts:["wav"]},"music/song2/loop2":{exts:["wav"]},"music/song2/loop3":{exts:["wav"]},"music/song2/loop4":{exts:["wav"]},"music/song2/loop5":{exts:["wav"]},"music/song2/loop6":{exts:["wav"]},"sfx/subway_ambient_loop":{exts:["wav"],waitForLoad:!0,loop:!0,volume:.4},"sfx/subway_arrival":{exts:["wav"],volume:.7},"sfx/subway_arrival2":{exts:["wav"],waitForLoad:!0},"sfx/subway_departure":{exts:["wav"],waitForLoad:!0},"sfx/subway_whistle":{exts:["wav"],waitForLoad:!0},"sfx/ambience_crowd_loop":{exts:["ogg"],waitForLoad:!0,loop:!0,volume:.7}}).forEach((function([n,{waitForLoad:e,exts:t,loop:o,volume:r}]){e&&I++;let a=new Howl({src:t.map(e=>"audio/"+n+"."+e),loop:o||!1,volume:r||1});e&&a.once("load",T),console.log("loading sound",n),p[n]=a})),document.addEventListener("keydown",(function(n){"INPUT"!=n.target.tagName&&a.ports.keyPress.send(n.key)," "!=n.key&&"Backspace"!==n.key||"INPUT"!=n.target.tagName&&n.preventDefault()}))},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){!function(n){"use strict";function e(n,e,t){return t.a=n,t.f=e,t}function t(n){return e(2,n,(function(e){return function(t){return n(e,t)}}))}function o(n){return e(3,n,(function(e){return function(t){return function(o){return n(e,t,o)}}}))}function r(n){return e(4,n,(function(e){return function(t){return function(o){return function(r){return n(e,t,o,r)}}}}))}function a(n){return e(5,n,(function(e){return function(t){return function(o){return function(r){return function(a){return n(e,t,o,r,a)}}}}}))}function i(n,e,t){return 2===n.a?n.f(e,t):n(e)(t)}function s(n,e,t,o){return 3===n.a?n.f(e,t,o):n(e)(t)(o)}function u(n,e,t,o,r){return 4===n.a?n.f(e,t,o,r):n(e)(t)(o)(r)}function l(n,e,t,o,r,a){return 5===n.a?n.f(e,t,o,r,a):n(e)(t)(o)(r)(a)}console.warn("Compiled in DEV mode. Follow the advice at https://elm-lang.org/0.19.0/optimize for better performance and smaller assets.");var c={$:"[]"};function h(n,e){return{$:"::",a:n,b:e}}var _=t(h);function d(n){for(var e=c,t=n.length;t--;)e=h(n[t],e);return e}function E(n){for(var e=[];n.b;n=n.b)e.push(n.a);return e}var f=o((function(n,e,t){for(var o=[];e.b&&t.b;e=e.b,t=t.b)o.push(i(n,e.a,t.a));return d(o)})),g=t((function(n,e){return d(E(e).sort((function(e,t){return p(n(e),n(t))})))}));function I(n,e){for(var t,o=[],r=R(n,e,0,o);r&&(t=o.pop());r=R(t.a,t.b,0,o));return r}function R(n,e,t,o){if(n===e)return!0;if("object"!=typeof n||null===n||null===e)return"function"==typeof n&&B(5),!1;if(t>100)return o.push(y(n,e)),!0;for(var r in"Set_elm_builtin"===n.$&&(n=ze(n),e=ze(e)),"RBNode_elm_builtin"!==n.$&&"RBEmpty_elm_builtin"!==n.$||(n=Je(n),e=Je(e)),n)if(!R(n[r],e[r],t+1,o))return!1;return!0}var m=t(I),T=t((function(n,e){return!I(n,e)}));function p(n,e,t){if("object"!=typeof n)return n===e?0:e>n?-1:1;if(n instanceof String){var o=n.valueOf(),r=e.valueOf();return o===r?0:r>o?-1:1}if("#"===n.$[0])return(t=p(n.a,e.a))?t:(t=p(n.b,e.b))?t:p(n.c,e.c);for(;n.b&&e.b&&!(t=p(n.a,e.a));n=n.b,e=e.b);return t||(n.b?1:e.b?-1:0)}var N=t((function(n,e){var t=p(n,e);return 0>t?Ke:t?je:xe})),O={$:"#0"};function y(n,e){return{$:"#2",a:n,b:e}}function S(n,e,t){return{$:"#3",a:n,b:e,c:t}}function A(n){return new String(n)}function b(n,e){var t={};for(var o in n)t[o]=n[o];for(var o in e)t[o]=e[o];return t}function w(n,e){if("string"==typeof n)return n+e;if(!n.b)return e;var t=h(n.a,e);n=n.b;for(var o=t;n.b;n=n.b)o=o.b=h(n.a,e);return t}var L=o((function(n,e,t){for(var o=Array(n),r=0;n>r;r++)o[r]=t(e+r);return o})),v=t((function(n,e){for(var t=Array(n),o=0;n>o&&e.b;o++)t[o]=e.a,e=e.b;return t.length=o,y(t,e)})),k=t((function(n,e){return e[n]})),D=o((function(n,e,t){for(var o=t.length-1;o>=0;o--)e=i(n,t[o],e);return e})),C=t((function(n,e){return console.log(n+": "+M(e)),e}));function M(n){return function n(e,t){if("function"==typeof t)return G(e,"<function>");if("boolean"==typeof t)return P(e,t?"True":"False");if("number"==typeof t)return function(n,e){return n?"[95m"+e+"[0m":e}(e,t+"");if(t instanceof String)return function(n,e){return n?"[92m"+e+"[0m":e}(e,"'"+H(t,!0)+"'");if("string"==typeof t)return Y(e,'"'+H(t,!1)+'"');if("object"==typeof t&&"$"in t){var o=t.$;if("number"==typeof o)return G(e,"<internals>");if("#"===o[0]){var r=[];for(var a in t)"$"!==a&&r.push(n(e,t[a]));return"("+r.join(",")+")"}if("Set_elm_builtin"===o)return P(e,"Set")+F(e,".fromList")+" "+n(e,ze(t));if("RBNode_elm_builtin"===o||"RBEmpty_elm_builtin"===o)return P(e,"Dict")+F(e,".fromList")+" "+n(e,Je(t));if("Array_elm_builtin"===o)return P(e,"Array")+F(e,".fromList")+" "+n(e,Qe(t));if("::"===o||"[]"===o){for(r="[",t.b&&(r+=n(e,t.a),t=t.b);t.b;t=t.b)r+=","+n(e,t.a);return r+"]"}for(var i in r="",t)if("$"!==i){var s=n(e,t[i]),u=s[0];r+=" "+("{"===u||"("===u||"["===u||"<"===u||'"'===u||0>s.indexOf(" ")?s:"("+s+")")}return P(e,o)+r}if("function"==typeof DataView&&t instanceof DataView)return Y(e,"<"+t.byteLength+" bytes>");if("undefined"!=typeof File&&t instanceof File)return G(e,"<"+t.name+">");if("object"==typeof t){for(var l in r=[],t){var c="_"===l[0]?l.slice(1):l;r.push(F(e,c)+" = "+n(e,t[l]))}return 0===r.length?"{}":"{ "+r.join(", ")+" }"}return G(e,"<internals>")}(!1,n)}function H(n,e){var t=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return e?t.replace(/\'/g,"\\'"):t.replace(/\"/g,'\\"')}function P(n,e){return n?"[96m"+e+"[0m":e}function Y(n,e){return n?"[93m"+e+"[0m":e}function F(n,e){return n?"[37m"+e+"[0m":e}function G(n,e){return n?"[36m"+e+"[0m":e}function B(n,e,t,o,r){switch(n){case 0:throw Error('What node should I take over? In JavaScript I need something like:\n\n    Elm.Main.init({\n        node: document.getElementById("elm-node")\n    })\n\nYou need to do this with any Browser.sandbox or Browser.element program.');case 1:throw Error("Browser.application programs cannot handle URLs like this:\n\n    "+document.location.href+"\n\nWhat is the root? The root of your file system? Try looking at this program with `elm reactor` or some other server.");case 2:throw Error("Problem with the flags given to your Elm program on initialization.\n\n"+e);case 3:throw Error("There can only be one port named `"+e+"`, but your program has multiple.");case 4:throw Error("Trying to send an unexpected type of value through port `"+e+"`:\n"+t);case 5:throw Error('Trying to use `(==)` on functions.\nThere is no way to know if functions are "the same" in the Elm sense.\nRead more about this at https://package.elm-lang.org/packages/elm/core/latest/Basics#== which describes why it is this way and what the better version will look like.');case 6:throw Error("Your page is loading multiple Elm scripts with a module named "+e+". Maybe a duplicate script is getting loaded accidentally? If not, rename one of them so I know which is which!");case 8:var a=o;throw Error("TODO in module `"+e+"` "+U(t)+"\n\n"+a);case 9:var i=o;throw a=r,Error("TODO in module `"+e+"` from the `case` expression "+U(t)+"\n\nIt received the following value:\n\n    "+M(i).replace("\n","\n    ")+"\n\nBut the branch that handles it says:\n\n    "+a.replace("\n","\n    "));case 10:throw Error("Bug in https://github.com/elm/virtual-dom/issues");case 11:throw Error("Cannot perform mod 0. Division by zero error.")}}function U(n){return n.start.line===n.end.line?"on line "+n.start.line:"on lines "+n.start.line+" through "+n.end.line}var $=t((function(n,e){return n+e})),W=t((function(n,e){var t=e%n;return 0===n?B(11):t>0&&0>n||0>t&&n>0?t+n:t})),x=Math.ceil,j=Math.floor,K=Math.log,V=t((function(n,e){return e.split(n)})),q=t((function(n,e){return e.join(n)})),J=o((function(n,e,t){return t.slice(n,e)})),z=t((function(n,e){for(var t=e.length;t--;){var o=e[t],r=e.charCodeAt(t);if(56320>r||r>57343||(o=e[--t]+o),!n(A(o)))return!1}return!0})),Z=t((function(n,e){return e.indexOf(n)>-1})),X=t((function(n,e){return 0===e.indexOf(n)}));function Q(n){return{$:2,b:n}}Q((function(n){return"number"!=typeof n?_n("an INT",n):n>-2147483647&&2147483647>n&&(0|n)===n?St(n):!isFinite(n)||n%1?_n("an INT",n):St(n)}));var nn=Q((function(n){return"boolean"==typeof n?St(n):_n("a BOOL",n)})),en=(Q((function(n){return"number"==typeof n?St(n):_n("a FLOAT",n)})),Q((function(n){return St(gn(n))})),Q((function(n){return"string"==typeof n?St(n):n instanceof String?St(n+""):_n("a STRING",n)}))),tn=t((function(n,e){return{$:6,d:n,b:e}})),on=t((function(n,e){return{$:7,e:n,b:e}})),rn=t((function(n,e){return{$:10,b:e,h:n}})),an=t((function(n,e){return function(n){return{$:9,f:n,g:[e]}}(n)})),sn=t((function(n,e){return un(n,In(e))}));function un(n,e){switch(n.$){case 2:return n.b(e);case 5:return null===e?St(n.c):_n("null",e);case 3:return cn(e)?ln(n.b,e,d):_n("a LIST",e);case 4:return cn(e)?ln(n.b,e,hn):_n("an ARRAY",e);case 6:var t=n.d;if("object"!=typeof e||null===e||!(t in e))return _n("an OBJECT with a field named `"+t+"`",e);var o=un(n.b,e[t]);return At(o)?o:yt(i(wt,t,o.a));case 7:var r=n.e;return cn(e)?e.length>r?(o=un(n.b,e[r]),At(o)?o:yt(i(Lt,r,o.a))):_n("a LONGER array. Need index "+r+" but only see "+e.length+" entries",e):_n("an ARRAY",e);case 8:if("object"!=typeof e||null===e||cn(e))return _n("an OBJECT",e);var a=c;for(var s in e)if(e.hasOwnProperty(s)){if(o=un(n.b,e[s]),!At(o))return yt(i(wt,s,o.a));a=h(y(s,o.a),a)}return St(ut(a));case 9:for(var u=n.f,l=n.g,_=0;l.length>_;_++){if(o=un(l[_],e),!At(o))return o;u=u(o.a)}return St(u);case 10:return o=un(n.b,e),At(o)?un(n.h(o.a),e):o;case 11:for(var E=c,f=n.g;f.b;f=f.b){if(o=un(f.a,e),At(o))return o;E=h(o.a,E)}return yt(vt(ut(E)));case 1:return yt(i(bt,n.a,gn(e)));case 0:return St(n.a)}}function ln(n,e,t){for(var o=e.length,r=Array(o),a=0;o>a;a++){var s=un(n,e[a]);if(!At(s))return yt(i(Lt,a,s.a));r[a]=s.a}return St(t(r))}function cn(n){return Array.isArray(n)||"undefined"!=typeof FileList&&n instanceof FileList}function hn(n){return i(pt,n.length,(function(e){return n[e]}))}function _n(n,e){return yt(i(bt,"Expecting "+n,gn(e)))}function dn(n,e){if(n===e)return!0;if(n.$!==e.$)return!1;switch(n.$){case 0:case 1:return n.a===e.a;case 2:return n.b===e.b;case 5:return n.c===e.c;case 3:case 4:case 8:return dn(n.b,e.b);case 6:return n.d===e.d&&dn(n.b,e.b);case 7:return n.e===e.e&&dn(n.b,e.b);case 9:return n.f===e.f&&En(n.g,e.g);case 10:return n.h===e.h&&dn(n.b,e.b);case 11:return En(n.g,e.g)}}function En(n,e){var t=n.length;if(t!==e.length)return!1;for(var o=0;t>o;o++)if(!dn(n[o],e[o]))return!1;return!0}var fn=t((function(n,e){return JSON.stringify(In(e),null,n)+""}));function gn(n){return{$:0,a:n}}function In(n){return n.a}var Rn=gn(null);function mn(n){return{$:0,a:n}}function Tn(n){return{$:2,b:n,c:null}}var pn=t((function(n,e){return{$:3,b:n,d:e}})),Nn=t((function(n,e){return{$:4,b:n,d:e}})),On=0;function yn(n){var e={$:0,e:On++,f:n,g:null,h:[]};return bn(e),e}var Sn=!1,An=[];function bn(n){if(An.push(n),!Sn){for(Sn=!0;n=An.shift();)wn(n);Sn=!1}}function wn(n){for(;n.f;){var e=n.f.$;if(0===e||1===e){for(;n.g&&n.g.$!==e;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else{if(2===e)return void(n.f.c=n.f.b((function(e){n.f=e,bn(n)})));if(5===e){if(0===n.h.length)return;n.f=n.f.b(n.h.shift())}else n.g={$:3===e?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}}function Ln(n){return Tn((function(e){var t=setTimeout((function(){e(mn(O))}),n);return function(){clearTimeout(t)}}))}var vn={};function kn(n,e){var t={g:e,h:void 0},o=n.c,r=n.d,a=n.e,l=n.f;return t.h=yn(i(pn,(function n(e){return i(pn,n,{$:5,b:function(n){var i=n.a;return 0===n.$?s(r,t,i,e):a&&l?u(o,t,i.i,i.j,e):s(o,t,a?i.i:i.j,e)}})}),n.b))}var Dn=t((function(n,e){return Tn((function(t){n.g(e),t(mn(O))}))}));function Cn(n){return function(e){return{$:1,k:n,l:e}}}function Mn(n){return{$:2,m:n}}var Hn=[],Pn=!1;function Yn(n,e,t){if(Hn.push({p:n,q:e,r:t}),!Pn){Pn=!0;for(var o;o=Hn.shift();)Fn(o.p,o.q,o.r);Pn=!1}}function Fn(n,e,t){var o,r={};for(var a in Gn(!0,e,r,null),Gn(!1,t,r,null),n)(o=n[a]).h.push({$:"fx",a:r[a]||{i:c,j:c}}),bn(o)}function Gn(n,e,t,o){switch(e.$){case 1:var r=e.k,a=function(n,t,o){return i(n?vn[t].e:vn[t].f,(function(n){for(var e=o;e;e=e.t)n=e.s(n);return n}),e.l)}(n,r,o);return void(t[r]=function(n,e,t){return t=t||{i:c,j:c},n?t.i=h(e,t.i):t.j=h(e,t.j),t}(n,a,t[r]));case 2:for(var s=e.m;s.b;s=s.b)Gn(n,s.a,t,o);return;case 3:return void Gn(n,e.o,t,{s:e.n,t:o})}}function Bn(n){vn[n]&&B(3,n)}function Un(n,e){return Bn(n),vn[n]={e:$n,u:e,a:Wn},Cn(n)}var $n=t((function(n,e){return e}));function Wn(n){var e=[],t=vn[n].u,r=Ln(0);return vn[n].b=r,vn[n].c=o((function(n,o){for(;o.b;o=o.b)for(var a=e,i=In(t(o.a)),s=0;a.length>s;s++)a[s](i);return r})),{subscribe:function(n){e.push(n)},unsubscribe:function(n){var t=(e=e.slice()).indexOf(n);0>t||e.splice(t,1)}}}function xn(n,e){return Bn(n),vn[n]={f:jn,u:e,a:Kn},Cn(n)}var jn=t((function(n,e){return function(t){return n(e(t))}}));function Kn(n,e){var t=c,r=vn[n].u,a=mn(null);return vn[n].b=a,vn[n].c=o((function(n,e){return t=e,a})),{send:function(o){var a=i(sn,r,gn(o));At(a)||B(4,n,a.a);for(var s=a.a,u=t;u.b;u=u.b)e(u.a(s))}}}var Vn,qn=a((function(n,e,t,o,r){for(var a=n.length,i=r.length>=e+a,s=0;i&&a>s;){var u=r.charCodeAt(e);i=n[s++]===r[e++]&&(10===u?(t++,o=1):(o++,55296==(63488&u)?n[s++]===r[e++]:1))}return S(i?e:-1,t,o)})),Jn=o((function(n,e,t){return t.length>e?55296==(63488&t.charCodeAt(e))?n(A(t.substr(e,2)))?e+2:-1:n(A(t[e]))?"\n"===t[e]?-2:e+1:-1:-1})),zn=a((function(n,e,t,o,r){for(var a=r.indexOf(n,e),i=0>a?r.length:a+n.length;i>e;){var s=r.charCodeAt(e++);10===s?(o=1,t++):(o++,55296==(63488&s)&&e++)}return S(a,t,o)})),Zn="undefined"!=typeof document?document:{};function Xn(n,e){n.appendChild(e)}function Qn(n){return{$:0,a:n}}var ne,ee=t((function(n,e){return t((function(t,o){for(var r=[],a=0;o.b;o=o.b){var i=o.a;a+=i.b||0,r.push(i)}return a+=r.length,{$:1,c:e,d:se(t),e:r,f:n,b:a}}))}))(void 0),te=t((function(n,e){return t((function(t,o){for(var r=[],a=0;o.b;o=o.b){var i=o.a;a+=i.b.b||0,r.push(i)}return a+=r.length,{$:2,c:e,d:se(t),e:r,f:n,b:a}}))}))(void 0),oe=t((function(n,e){return{$:"a0",n:n,o:e}})),re=t((function(n,e){return{$:"a1",n:n,o:e}})),ae=t((function(n,e){return{$:"a2",n:n,o:e}})),ie=t((function(n,e){return{$:"a3",n:n,o:e}}));function se(n){for(var e={};n.b;n=n.b){var t=n.a,o=t.$,r=t.n,a=t.o;if("a2"!==o){var i=e[o]||(e[o]={});"a3"===o&&"class"===r?ue(i,r,a):i[r]=a}else"className"===r?ue(e,r,In(a)):e[r]=In(a)}return e}function ue(n,e,t){var o=n[e];n[e]=o?o+" "+t:t}function le(n,e){var t=n.$;if(5===t)return le(n.k||(n.k=n.m()),e);if(0===t)return Zn.createTextNode(n.a);if(4===t){for(var o=n.k,r=n.j;4===o.$;)"object"!=typeof r?r=[r,o.j]:r.push(o.j),o=o.k;var a={j:r,p:e};return(i=le(o,a)).elm_event_node_ref=a,i}if(3===t)return ce(i=n.h(n.g),e,n.d),i;var i=n.f?Zn.createElementNS(n.f,n.c):Zn.createElement(n.c);Vn&&"a"==n.c&&i.addEventListener("click",Vn(i)),ce(i,e,n.d);for(var s=n.e,u=0;s.length>u;u++)Xn(i,le(1===t?s[u]:s[u].b,e));return i}function ce(n,e,t){for(var o in t){var r=t[o];"a1"===o?he(n,r):"a0"===o?Ee(n,e,r):"a3"===o?_e(n,r):"a4"===o?de(n,r):("value"!==o&&"checked"!==o||n[o]!==r)&&(n[o]=r)}}function he(n,e){var t=n.style;for(var o in e)t[o]=e[o]}function _e(n,e){for(var t in e){var o=e[t];void 0!==o?n.setAttribute(t,o):n.removeAttribute(t)}}function de(n,e){for(var t in e){var o=e[t],r=o.f,a=o.o;void 0!==a?n.setAttributeNS(r,t,a):n.removeAttributeNS(r,t)}}function Ee(n,e,t){var o=n.elmFs||(n.elmFs={});for(var r in t){var a=t[r],i=o[r];if(a){if(i){if(i.q.$===a.$){i.q=a;continue}n.removeEventListener(r,i)}i=fe(e,a),n.addEventListener(r,i,ne&&{passive:2>hu(a)}),o[r]=i}else n.removeEventListener(r,i),o[r]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ne=!0}}))}catch(n){}function fe(n,e){function t(e){var o=t.q,r=un(o.a,e);if(At(r)){for(var a,i=hu(o),s=r.a,u=i?3>i?s.a:s.message:s,l=1==i?s.b:3==i&&s.stopPropagation,c=(l&&e.stopPropagation(),(2==i?s.b:3==i&&s.preventDefault)&&e.preventDefault(),n);a=c.j;){if("function"==typeof a)u=a(u);else for(var h=a.length;h--;)u=a[h](u);c=c.p}c(u,l)}}return t.q=e,t}function ge(n,e){return n.$==e.$&&dn(n.a,e.a)}function Ie(n,e,t,o){var r={$:e,r:t,s:o,t:void 0,u:void 0};return n.push(r),r}function Re(n,e,t,o){if(n!==e){var r=n.$,a=e.$;if(r!==a){if(1!==r||2!==a)return void Ie(t,0,o,e);e=function(n){for(var e=n.e,t=e.length,o=Array(t),r=0;t>r;r++)o[r]=e[r].b;return{$:1,c:n.c,d:n.d,e:o,f:n.f,b:n.b}}(e),a=1}switch(a){case 5:for(var i=n.l,s=e.l,u=i.length,l=u===s.length;l&&u--;)l=i[u]===s[u];if(l)return void(e.k=n.k);e.k=e.m();var c=[];return Re(n.k,e.k,c,0),void(c.length>0&&Ie(t,1,o,c));case 4:for(var h=n.j,_=e.j,d=!1,E=n.k;4===E.$;)d=!0,"object"!=typeof h?h=[h,E.j]:h.push(E.j),E=E.k;for(var f=e.k;4===f.$;)d=!0,"object"!=typeof _?_=[_,f.j]:_.push(f.j),f=f.k;return d&&h.length!==_.length?void Ie(t,0,o,e):((d?function(n,e){for(var t=0;n.length>t;t++)if(n[t]!==e[t])return!1;return!0}(h,_):h===_)||Ie(t,2,o,_),void Re(E,f,t,o+1));case 0:return void(n.a!==e.a&&Ie(t,3,o,e.a));case 1:return void me(n,e,t,o,pe);case 2:return void me(n,e,t,o,Ne);case 3:if(n.h!==e.h)return void Ie(t,0,o,e);var g=Te(n.d,e.d);g&&Ie(t,4,o,g);var I=e.i(n.g,e.g);return void(I&&Ie(t,5,o,I))}}}function me(n,e,t,o,r){if(n.c===e.c&&n.f===e.f){var a=Te(n.d,e.d);a&&Ie(t,4,o,a),r(n,e,t,o)}else Ie(t,0,o,e)}function Te(n,e,t){var o;for(var r in n)if("a1"!==r&&"a0"!==r&&"a3"!==r&&"a4"!==r)if(r in e){var a=n[r],i=e[r];a===i&&"value"!==r&&"checked"!==r||"a0"===t&&ge(a,i)||((o=o||{})[r]=i)}else(o=o||{})[r]=t?"a1"===t?"":"a0"===t||"a3"===t?void 0:{f:n[r].f,o:void 0}:"string"==typeof n[r]?"":null;else{var s=Te(n[r],e[r]||{},r);s&&((o=o||{})[r]=s)}for(var u in e)u in n||((o=o||{})[u]=e[u]);return o}function pe(n,e,t,o){var r=n.e,a=e.e,i=r.length,s=a.length;i>s?Ie(t,6,o,{v:s,i:i-s}):s>i&&Ie(t,7,o,{v:i,e:a});for(var u=s>i?i:s,l=0;u>l;l++){var c=r[l];Re(c,a[l],t,++o),o+=c.b||0}}function Ne(n,e,t,o){for(var r=[],a={},i=[],s=n.e,u=e.e,l=s.length,c=u.length,h=0,_=0,d=o;l>h&&c>_;){var E=(A=s[h]).a,f=(b=u[_]).a,g=A.b,I=b.b,R=void 0,m=void 0;if(E!==f){var T=s[h+1],p=u[_+1];if(T){var N=T.a,O=T.b;m=f===N}if(p){var y=p.a,S=p.b;R=E===y}if(R&&m)Re(g,S,r,++d),ye(a,r,E,I,_,i),d+=g.b||0,Se(a,r,E,O,++d),d+=O.b||0,h+=2,_+=2;else if(R)d++,ye(a,r,f,I,_,i),Re(g,S,r,d),d+=g.b||0,h+=1,_+=2;else if(m)Se(a,r,E,g,++d),d+=g.b||0,Re(O,I,r,++d),d+=O.b||0,h+=2,_+=1;else{if(!T||N!==y)break;Se(a,r,E,g,++d),ye(a,r,f,I,_,i),d+=g.b||0,Re(O,S,r,++d),d+=O.b||0,h+=2,_+=2}}else Re(g,I,r,++d),d+=g.b||0,h++,_++}for(;l>h;){var A;Se(a,r,(A=s[h]).a,g=A.b,++d),d+=g.b||0,h++}for(;c>_;){var b,w=w||[];ye(a,r,(b=u[_]).a,b.b,void 0,w),_++}(r.length>0||i.length>0||w)&&Ie(t,8,o,{w:r,x:i,y:w})}var Oe="_elmW6BL";function ye(n,e,t,o,r,a){var i=n[t];if(!i)return a.push({r:r,A:i={c:0,z:o,r:r,s:void 0}}),void(n[t]=i);if(1===i.c){a.push({r:r,A:i}),i.c=2;var s=[];return Re(i.z,o,s,i.r),i.r=r,void(i.s.s={w:s,A:i})}ye(n,e,t+Oe,o,r,a)}function Se(n,e,t,o,r){var a=n[t];if(a){if(0===a.c){a.c=2;var i=[];return Re(o,a.z,i,r),void Ie(e,9,r,{w:i,A:a})}Se(n,e,t+Oe,o,r)}else{var s=Ie(e,9,r,void 0);n[t]={c:1,z:o,r:r,s:s}}}function Ae(n,e){for(var t=0;e.length>t;t++){var o=e[t],r=o.t,a=be(r,o);r===n&&(n=a)}return n}function be(n,e){switch(e.$){case 0:return function(n){var t=n.parentNode,o=le(e.s,e.u);return o.elm_event_node_ref||(o.elm_event_node_ref=n.elm_event_node_ref),t&&o!==n&&t.replaceChild(o,n),o}(n);case 4:return ce(n,e.u,e.s),n;case 3:return n.replaceData(0,n.length,e.s),n;case 1:return Ae(n,e.s);case 2:return n.elm_event_node_ref?n.elm_event_node_ref.j=e.s:n.elm_event_node_ref={j:e.s,p:e.u},n;case 6:for(var t=e.s,o=0;t.i>o;o++)n.removeChild(n.childNodes[t.v]);return n;case 7:for(var r=(t=e.s).e,a=n.childNodes[o=t.v];r.length>o;o++)n.insertBefore(le(r[o],e.u),a);return n;case 9:if(!(t=e.s))return n.parentNode.removeChild(n),n;var i=t.A;return void 0!==i.r&&n.parentNode.removeChild(n),i.s=Ae(n,t.w),n;case 8:return function(n,e){var t=e.s,o=function(n,e){if(n){for(var t=Zn.createDocumentFragment(),o=0;n.length>o;o++){var r=n[o].A;Xn(t,2===r.c?r.s:le(r.z,e.u))}return t}}(t.y,e);n=Ae(n,t.w);for(var r=t.x,a=0;r.length>a;a++){var i=r[a],s=i.A,u=2===s.c?s.s:le(s.z,e.u);n.insertBefore(u,n.childNodes[i.r])}return o&&Xn(n,o),n}(n,e);case 5:return e.s(n);default:B(10)}}var we=r((function(n,e,t,o){return function(e,t,o,r,a){var u=i(sn,e,gn(t?t.flags:void 0));At(u)||B(2,Jt(u.a));var l={},_=(u=o(u.a)).a,d=function(e,t){var o=n.setup&&n.setup(e),r=n.view,a=Zn.title,u=Zn.body,l=function n(e){if(3===e.nodeType)return Qn(e.textContent);if(1!==e.nodeType)return Qn("");for(var t=c,o=e.attributes,r=o.length;r--;){var a=o[r];t=h(i(ie,a.name,a.value),t)}var u=e.tagName.toLowerCase(),l=c,_=e.childNodes;for(r=_.length;r--;)l=h(n(_[r]),l);return s(ee,u,t,l)}(u);return function(n,e){e(n);var t=0;function o(){t=1===t?0:(Le(o),e(n),1)}return function(r,a){n=r,a?(e(n),2===t&&(t=1)):(0===t&&Le(o),t=2)}}(t,(function(n){Vn=o;var t=r(n),i=ee("body")(c)(t.body),s=function(n,e){var t=[];return Re(n,e,t,0),t}(l,i);u=function(n,e,t,o){return 0===t.length?n:(function n(e,t,o,r){!function e(t,o,r,a,i,s,u){for(var l=r[a],c=l.r;c===i;){var h=l.$;if(1===h)n(t,o.k,l.s,u);else if(8===h)l.t=t,l.u=u,(_=l.s.w).length>0&&e(t,o,_,0,i,s,u);else if(9===h){l.t=t,l.u=u;var _,d=l.s;d&&(d.A.s=t,(_=d.w).length>0&&e(t,o,_,0,i,s,u))}else l.t=t,l.u=u;if(!(l=r[++a])||(c=l.r)>s)return a}var E=o.$;if(4===E){for(var f=o.k;4===f.$;)f=f.k;return e(t,f,r,a,i+1,s,t.elm_event_node_ref)}for(var g=o.e,I=t.childNodes,R=0;g.length>R;R++){i++;var m=1===E?g[R]:g[R].b,T=i+(m.b||0);if(!(i>c||c>T||(l=r[a=e(I[R],m,r,a,i,T,u)])&&(c=l.r)<=s))return a;i=T}return a}(e,t,o,0,0,t.b,r)}(n,e,t,o),Ae(n,t))}(u,l,s,e),l=i,Vn=0,a!==t.title&&(Zn.title=a=t.title)}))}(f,_),E=function(n,e){var t;for(var o in vn){var r=vn[o];r.a&&((t=t||{})[o]=r.a(o,e)),n[o]=kn(r,e)}return t}(l,f);function f(n,e){d(_=(u=i(r,n,_)).a,e),Yn(l,u.b,a(_))}return Yn(l,u.b,a(_)),E?{ports:E}:{}}(e,o,n.init,n.update,n.subscriptions)})),Le=("undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(n){return setTimeout(n,1e3/60)});"undefined"!=typeof document&&document,"undefined"!=typeof window&&window;var ve=t((function(n,e){return function(e){return Tn((function(t){Le((function(){var o=document.getElementById(e);t(o?mn(function(e){return e[n](),O}(o)):{$:1,a:Ys(e)})}))}))}(e)})),ke=o((function(n,e,t){return function(n,e,t,o){return{$:3,d:se(n),g:e,h:t,i:o}}(e,{a:n,b:t},De,Ce)}));function De(n){return i(Ge,n,Zn.createElement("div"))}function Ce(n,e){return(n.b!==e.b||n.a!==e.a)&&Ge(e)}var Me,He,Pe,Ye,Fe,Ge=t((function(n,e){return e.innerHTML=Be(n.b,{highlight:function(n,e){return!e&&Zu(t.defaultHighlighting)&&(e=t.defaultHighlighting.a),"undefined"!=typeof hljs&&e&&hljs.listLanguages().indexOf(e)>=0?hljs.highlight(e,n,!0).value:n},gfm:o=(t=n.a).githubFlavored.a,tables:o&&o.tables,breaks:o&&o.breaks,sanitize:t.sanitize,smartypants:t.smartypants}),e;var t,o})),Be=(He=(Me={}).exports={},function(){var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function e(e){this.tokens=[],this.tokens.links={},this.options=e||c.defaults,this.rules=n.normal,this.options.gfm&&(this.rules=this.options.tables?n.tables:n.gfm)}n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=s(n.item,"gm")(/bull/g,n.bullet)(),n.list=s(n.list)(/bull/g,n.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+n.def.source+")")(),n.blockquote=s(n.blockquote)("def",n.def)(),n._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",n.html=s(n.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,n._tag)(),n.paragraph=s(n.paragraph)("hr",n.hr)("heading",n.heading)("lheading",n.lheading)("blockquote",n.blockquote)("tag","<"+n._tag)("def",n.def)(),n.normal=l({},n),n.gfm=l({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=s(n.paragraph)("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|")(),n.tables=l({},n.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=n,e.lex=function(n,t){return new e(t).lex(n)},e.prototype.lex=function(n){return n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(n,!0)},e.prototype.token=function(e,t,o){var r,a,i,s,u,l,c,h,_;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},h=0;l.align.length>h;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;l.cells.length>h;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),this.tokens.push({type:"list_start",ordered:(s=i[2]).length>1}),r=!1,_=(i=i[0].match(this.rules.item)).length,h=0;_>h;h++)c=(l=i[h]).length,~(l=l.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=l.length,l=l.replace(this.options.pedantic?/^ {1,4}/gm:RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&h!==_-1&&(s===(u=n.bullet.exec(i[h+1])[0])||s.length>1&&u.length>1||(e=i.slice(h+1).join("\n")+e,h=_-1)),a=r||/\n\n(?!\s*$)/.test(l),h!==_-1&&(r="\n"===l.charAt(l.length-1),a||(a=r)),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(l,!1,o),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!o&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;l.align.length>h;h++)l.align[h]=/^ *-+: *$/.test(l.align[h])?"right":/^ *:-+: *$/.test(l.align[h])?"center":/^ *:-+ *$/.test(l.align[h])?"left":null;for(h=0;l.cells.length>h;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function o(n,e){if(this.options=e||c.defaults,this.links=n,this.rules=t.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?t.breaks:t.gfm:this.options.pedantic&&(this.rules=t.pedantic)}function r(n){this.options=n||{}}function a(n){this.tokens=[],this.token=null,this.options=n||c.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function i(n,e){return n.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(n,e){return n=n.source,e=e||"",function t(o,r){return o?(r=(r=r.source||r).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(o,r),t):RegExp(n,e)}}function u(){}function l(n){for(var e,t,o=1;arguments.length>o;o++)for(t in e=arguments[o])Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function c(n,t,o){if(o||"function"==typeof t){o||(o=t,t=null);var r,s,u=(t=l({},c.defaults,t||{})).highlight,h=0;try{r=e.lex(n,t)}catch(n){return o(n)}s=r.length;var _=function(n){if(n)return t.highlight=u,o(n);var e;try{e=a.parse(r,t)}catch(e){n=e}return t.highlight=u,n?o(n):o(null,e)};if(!u||3>u.length)return _();if(delete t.highlight,!s)return _();for(;r.length>h;h++)!function(n){"code"!==n.type?--s||_():u(n.text,n.lang,(function(e,t){return e?_(e):null==t||t===n.text?--s||_():(n.text=t,n.escaped=!0,void(--s||_()))}))}(r[h])}else try{return t&&(t=l({},c.defaults,t)),a.parse(e.lex(n,t),t)}catch(n){if(n.message+="\nPlease report this to https://github.com/chjj/marked.",(t||c.defaults).silent)return"<p>An error occured:</p><pre>"+i(n.message+"",!0)+"</pre>";throw n}}t._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,t._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,t.link=s(t.link)("inside",t._inside)("href",t._href)(),t.reflink=s(t.reflink)("inside",t._inside)(),t.normal=l({},t),t.pedantic=l({},t.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),t.gfm=l({},t.normal,{escape:s(t.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(t.text)("]|","~]|")("|","|https?://|")()}),t.breaks=l({},t.gfm,{br:s(t.br)("{2,}","*")(),text:s(t.gfm.text)("{2,}","*")()}),o.rules=t,o.output=function(n,e,t){return new o(e,t).output(n)},o.prototype.output=function(n){for(var e,t,o,r,a="";n;)if(r=this.rules.escape.exec(n))n=n.substring(r[0].length),a+=r[1];else if(r=this.rules.autolink.exec(n))n=n.substring(r[0].length),"@"===r[2]?(t=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),o=this.mangle("mailto:")+t):o=t=i(r[1]),a+=this.renderer.link(o,null,t);else if(this.inLink||!(r=this.rules.url.exec(n))){if(r=this.rules.tag.exec(n))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),n=n.substring(r[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):i(r[0]):r[0];else if(r=this.rules.link.exec(n))n=n.substring(r[0].length),this.inLink=!0,a+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(n))||(r=this.rules.nolink.exec(n))){if(n=n.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){a+=r[0].charAt(0),n=r[0].substring(1)+n;continue}this.inLink=!0,a+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(n))n=n.substring(r[0].length),a+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(n))n=n.substring(r[0].length),a+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(n))n=n.substring(r[0].length),a+=this.renderer.codespan(i(r[2],!0));else if(r=this.rules.br.exec(n))n=n.substring(r[0].length),a+=this.renderer.br();else if(r=this.rules.del.exec(n))n=n.substring(r[0].length),a+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(n))n=n.substring(r[0].length),a+=this.renderer.text(i(this.smartypants(r[0])));else if(n)throw Error("Infinite loop on byte: "+n.charCodeAt(0))}else n=n.substring(r[0].length),t=i(r[1]),a+=this.renderer.link(o=t,null,t);return a},o.prototype.outputLink=function(n,e){var t=i(e.href),o=e.title?i(e.title):null;return"!"!==n[0].charAt(0)?this.renderer.link(t,o,this.output(n[1])):this.renderer.image(t,o,i(n[1]))},o.prototype.smartypants=function(n){return this.options.smartypants?n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):n},o.prototype.mangle=function(n){if(!this.options.mangle)return n;for(var e,t="",o=n.length,r=0;o>r;r++)e=n.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),t+="&#"+e+";";return t},r.prototype.code=function(n,e,t){if(this.options.highlight){var o=this.options.highlight(n,e);null!=o&&o!==n&&(t=!0,n=o)}return e?'<pre><code class="'+this.options.langPrefix+i(e,!0)+'">'+(t?n:i(n,!0))+"\n</code></pre>\n":"<pre><code>"+(t?n:i(n,!0))+"\n</code></pre>"},r.prototype.blockquote=function(n){return"<blockquote>\n"+n+"</blockquote>\n"},r.prototype.html=function(n){return n},r.prototype.heading=function(n,e,t){return"<h"+e+' id="'+this.options.headerPrefix+t.toLowerCase().replace(/[^\w]+/g,"-")+'">'+n+"</h"+e+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(n,e){var t=e?"ol":"ul";return"<"+t+">\n"+n+"</"+t+">\n"},r.prototype.listitem=function(n){return"<li>"+n+"</li>\n"},r.prototype.paragraph=function(n){return"<p>"+n+"</p>\n"},r.prototype.table=function(n,e){return"<table>\n<thead>\n"+n+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},r.prototype.tablerow=function(n){return"<tr>\n"+n+"</tr>\n"},r.prototype.tablecell=function(n,e){var t=e.header?"th":"td";return(e.align?"<"+t+' style="text-align:'+e.align+'">':"<"+t+">")+n+"</"+t+">\n"},r.prototype.strong=function(n){return"<strong>"+n+"</strong>"},r.prototype.em=function(n){return"<em>"+n+"</em>"},r.prototype.codespan=function(n){return"<code>"+n+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(n){return"<del>"+n+"</del>"},r.prototype.link=function(n,e,t){if(this.options.sanitize){try{var o=decodeURIComponent((r=n,r.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,(function(n,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})))).replace(/[^\w:]/g,"").toLowerCase()}catch(n){return""}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return""}var r,a='<a href="'+n+'"';return e&&(a+=' title="'+e+'"'),a+">"+t+"</a>"},r.prototype.image=function(n,e,t){var o='<img src="'+n+'" alt="'+t+'"';return e&&(o+=' title="'+e+'"'),o+(this.options.xhtml?"/>":">")},r.prototype.text=function(n){return n},a.parse=function(n,e,t){return new a(e,t).parse(n)},a.prototype.parse=function(n){this.inline=new o(n.links,this.options,this.renderer),this.tokens=n.reverse();for(var e="";this.next();)e+=this.tok();return e},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var n=this.token.text;"text"===this.peek().type;)n+="\n"+this.next().text;return this.inline.output(n)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var n,e,t,o,r="",a="";for(t="",n=0;this.token.header.length>n;n++)t+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});for(r+=this.renderer.tablerow(t),n=0;this.token.cells.length>n;n++){for(e=this.token.cells[n],t="",o=0;e.length>o;o++)t+=this.renderer.tablecell(this.inline.output(e[o]),{header:!1,align:this.token.align[o]});a+=this.renderer.tablerow(t)}return this.renderer.table(r,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var i=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,i);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,c.options=c.setOptions=function(n){return l(c.defaults,n),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},c.Parser=a,c.parser=a.parse,c.Renderer=r,c.Lexer=e,c.lexer=e.lex,c.InlineLexer=o,c.inlineLexer=o.output,c.parse=c,void 0!==Me&&"object"==typeof He?Me.exports=c:"function"==typeof define&&define.amd?define((function(){return c})):this.marked=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),Me.exports),Ue={$:"Goals"},$e={$:"MainTitle"},We=r((function(n,e,t,o){return{$:"Array_elm_builtin",a:n,b:e,c:t,d:o}})),xe={$:"EQ"},je={$:"GT"},Ke={$:"LT"},Ve=o((function(n,e,t){for(;;){if("RBEmpty_elm_builtin"===t.$)return e;var o=t.d,r=n,a=s(n,t.b,t.c,s(Ve,n,e,t.e));n=r,e=a,t=o}})),qe=_,Je=function(n){return s(Ve,o((function(n,e,t){return i(qe,y(n,e),t)})),c,n)},ze=function(n){return function(n){return s(Ve,o((function(n,e,t){return i(qe,n,t)})),c,n)}(n.a)},Ze=D,Xe=o((function(n,e,o){var r=o.c,a=o.d,i=t((function(e,t){return s(Ze,"SubTree"===e.$?i:n,t,e.a)}));return s(Ze,i,s(Ze,n,e,a),r)})),Qe=function(n){return s(Xe,qe,c,n)},nt=x,et=t((function(n,e){return K(e)/K(n)})),tt=nt(i(et,2,32)),ot=[],rt=u(We,0,tt,ot,ot),at=function(n){return{$:"Leaf",a:n}},it=v,st=o((function(n,e,t){for(;;){if(!t.b)return e;var o=t.b,r=n,a=i(n,t.a,e);n=r,e=a,t=o}})),ut=function(n){return s(st,qe,c,n)},lt=t((function(n,e){for(;;){var t=i(it,32,n),o=t.b,r=i(qe,{$:"SubTree",a:t.a},e);if(!o.b)return ut(r);n=o,e=r}})),ct=m,ht=function(n){return n.a},_t=t((function(n,e){for(;;){var t=nt(e/32);if(1===t)return i(it,32,n).a;n=i(lt,n,c),e=t}})),dt=$,Et=t((function(n,e){return n(e)})),ft=j,gt=t((function(n,e){return p(n,e)>0?n:e})),It=function(n){return n.length},Rt=t((function(n,e){if(e.nodeListSize){var t=32*e.nodeListSize,o=ft(i(et,32,t-1)),r=n?ut(e.nodeList):e.nodeList,a=i(_t,r,e.nodeListSize);return u(We,It(e.tail)+t,i(gt,5,o*tt),a,e.tail)}return u(We,It(e.tail),tt,ot,e.tail)})),mt=L,Tt=a((function(n,e,t,o,r){for(;;){if(0>e)return i(Rt,!1,{nodeList:o,nodeListSize:t/32|0,tail:r});var a=at(s(mt,32,e,n));n=n,e-=32,t=t,o=i(qe,a,o),r=r}})),pt=t((function(n,e){if(n>0){var t=n%32;return l(Tt,e,n-t-32,n,c,s(mt,t,n-t,e))}return rt})),Nt=function(n){return{$:"Just",a:n}},Ot={$:"Nothing"},yt=function(n){return{$:"Err",a:n}},St=function(n){return{$:"Ok",a:n}},At=function(n){return"Ok"===n.$},bt=t((function(n,e){return{$:"Failure",a:n,b:e}})),wt=t((function(n,e){return{$:"Field",a:n,b:e}})),Lt=t((function(n,e){return{$:"Index",a:n,b:e}})),vt=function(n){return{$:"OneOf",a:n}},kt=function(n){var e=n.charCodeAt(0);return 55296>e||e>56319?e:1024*(e-55296)+n.charCodeAt(1)-56320+65536},Dt=function(n){var e=kt(n);return e>=97&&122>=e},Ct=function(n){var e=kt(n);return 90>=e&&e>=65},Mt=function(n){return Dt(n)||Ct(n)},Ht=function(n){var e=kt(n);return 57>=e&&e>=48},Pt=function(n){return Dt(n)||Ct(n)||Ht(n)},Yt=function(n){return s(st,t((function(n,e){return e+1})),0,n)},Ft=f,Gt=o((function(n,e,t){for(;;){if(p(n,e)>=1)return t;var o=n,r=e-1,a=i(qe,e,t);n=o,e=r,t=a}})),Bt=t((function(n,e){return s(Gt,n,e,c)})),Ut=t((function(n,e){return s(Ft,n,i(Bt,0,Yt(e)-1),e)})),$t=z,Wt=function(n){return n+""},xt=t((function(n,e){return i(q,n,E(e))})),jt=t((function(n,e){return d(i(V,n,e))})),Kt=function(n){return i(xt,"\n    ",i(jt,"\n",n))},Vt=fn,qt=t((function(n,e){return"\n\n("+Wt(n+1)+") "+Kt(Jt(e))})),Jt=function(n){return i(zt,n,c)},zt=t((function(n,e){n:for(;;)switch(n.$){case"Field":var t=n.a,o=n.b,r=function(){var n,e,o=(e=(n=t).charCodeAt(0),isNaN(e)?Ot:Nt(55296>e||e>56319?y(A(n[0]),n.slice(1)):y(A(n[0]+n[1]),n.slice(2))));if("Nothing"===o.$)return!1;var r=o.a,a=r.b;return Mt(r.a)&&i($t,Pt,a)}();n=o,e=i(qe,r?"."+t:"['"+t+"']",e);continue n;case"Index":o=n.b;var a="["+Wt(n.a)+"]";n=o,e=i(qe,a,e);continue n;case"OneOf":var s=n.a;if(s.b){if(s.b.b){var u=(e.b?"The Json.Decode.oneOf at json"+i(xt,"",ut(e)):"Json.Decode.oneOf")+" failed in the following "+Wt(Yt(s))+" ways:";return i(xt,"\n\n",i(qe,u,i(Ut,qt,s)))}n=o=s.a,e=e;continue n}return"Ran into a Json.Decode.oneOf with no possibilities"+(e.b?" at json"+i(xt,"",ut(e)):"!");default:var l=n.a,c=n.b;return(u=e.b?"Problem with the value at json"+i(xt,"",ut(e))+":\n\n    ":"Problem with the given value:\n\n")+Kt(i(Vt,4,c))+"\n\n"+l}})),Zt=gn,Xt=Un("persistLoadReq",Zt),Qt={$:"Black"},no=a((function(n,e,t,o,r){return{$:"RBNode_elm_builtin",a:n,b:e,c:t,d:o,e:r}})),eo=N,to={$:"RBEmpty_elm_builtin"},oo={$:"Red"},ro=a((function(n,e,t,o,r){if("RBNode_elm_builtin"===r.$&&"Red"===r.a.$){var a=r.b,i=r.c,s=r.d,u=r.e;return"RBNode_elm_builtin"===o.$&&"Red"===o.a.$?l(no,oo,e,t,l(no,Qt,o.b,o.c,o.d,h=o.e),l(no,Qt,a,i,s,u)):l(no,n,a,i,l(no,oo,e,t,o,s),u)}if("RBNode_elm_builtin"===o.$&&"Red"===o.a.$&&"RBNode_elm_builtin"===o.d.$&&"Red"===o.d.a.$){var c=o.d,h=o.e;return l(no,oo,o.b,o.c,l(no,Qt,c.b,c.c,c.d,c.e),l(no,Qt,e,t,h,r))}return l(no,n,e,t,o,r)})),ao=o((function(n,e,t){if("RBEmpty_elm_builtin"===t.$)return l(no,oo,n,e,to,to);var o=t.a,r=t.b,a=t.c,u=t.d,c=t.e;switch(i(eo,n,r).$){case"LT":return l(ro,o,r,a,s(ao,n,e,u),c);case"EQ":return l(no,o,r,e,u,c);default:return l(ro,o,r,a,u,s(ao,n,e,c))}})),io=o((function(n,e,t){var o=s(ao,n,e,t);return"RBNode_elm_builtin"===o.$&&"Red"===o.a.$?l(no,Qt,o.b,o.c,o.d,o.e):o})),so=io,uo=to,lo=s(so,"f_the_system","\n_Achievement unlocked:_\nF&ast;&ast;&ast; the system\n",s(so,"freedom","\n_Achievement unlocked:_\nFree to roam\n",s(so,"transfer_station","\n_Achievement unlocked:_\nTransfer station\n",s(so,"fools_errand_achievement","\n_Achievement unlocked:_\nFool's errand\n",s(so,"get_caffeinated_quest_achievement","\n_Achievement unlocked:_\nGet caffeinated\n",uo))))),co=s(so,"fallAsleep","\nToday's the day.  I busted my ass, but I think it will work.  I better get my damn promotion.\n\nI just wish I wasn't so tired.\n---\nTwo more stops. Maybe I can steal a wink or two before I get to the station. I'll just close my eyes for a minute.\n---\n...\n---\n\"Sir. Sir!\"\n---\nWhoa... what?  What's going on?\n\nA janitor is shaking my shoulder.\n\n\"We're almost at the end of the line, sir. You have to wake up.\"\n---\nEnd of the line?\n\nShit, I feel asleep!  I missed my stop!  What station is this?\n\nOh my God, I'm in so much trouble!  I have to get back to my stop.\n",s(so,"endThursday","\nI'm so tired.  I've been up all night working on this damn proposal, and there's still a lot more work to be done. Mr. Harris better appreciate it.\n",s(so,"endWednesday","\nThis train is two minutes late again.  This is becoming more and more of a problem lately.  They've got to do something about it.\n---\nI'm not looking forward to talking to Mr. Harris this morning.  This proposal is going to be a disaster.  Figures I get stuck with it.\n---\nBut I've got to make it work.\n",s(so,"endTuesday","\nIt's going to be tough getting this proposal put together by Friday, but I've got to do it.  I just wish I had more time to make it good.\n---\nAlso, It would be great to see Henry again. I've got to remember to get back to him.\n",s(so,"endMonday","\nI'm curious what my boss has in mind for this proposal.  It's nice he thought of me.  Maybe this will finally get me the promotion he's been promising.\n",s(so,"forcePlayerToReadEmails","\n{I have a few minutes before my train arrives.  I could check my emails while I wait.|It's kind of my routine to reread my emails before heading in.}\n",s(so,"notGoingToWork","\n { That's not my station. |}I have to go to {the office|work}{ at Broadway Street Station|}.\n ",s(so,"firstMeetSkaterDude","\nI've seen this young punk before, riding his skateboard up and down the platform.  He almost ran into me once.  The signs clearly say \"No skateboarding allowed.\"\n---\nOh great, now he's jumping the turnstile.  He probably doesn't even have a ticket.  You know, we've got rules for a reason.  When people like him disrespect them, it's the rest of us who have to pay.\n",s(so,"BENCH_BUM","\n{Some college kid is sprawled out across the whole bench. I wish he'd move. I'd like to just sit down.\n---\n\"Hi there. Could you sit up please? I'd like to sit while I wait for my train.\"\n---\nHe just ignores me.  Maybe he didn't hear me?\n|\n\"Hey!  I'd like to sit down, please.\"\n---\n\"Fuck off... I.. arghhh...\"\n---\nHe must be drunk.  I don't think he's getting up.\n|\nI guess I'm standing.\n}\n",s(so,"TRASH_DIGGER","\n{\"Spare some change?\"\n---\nI've seen that guy almost every day for years.  He always asks for money.  I used to give him some, but eventually stopped.  I work very hard to make a living.\n|\nHe's still at it.  Wonder what he thinks he'll find.\n}\n",s(so,"get_caffeinated_quest_3","\nNo thank you.\n",s(so,"drink_old_soda","\nUgh, this tastes disgusting.  How long has it been in there?\n",s(so,"get_caffeinated_quest_2","\n{This thing stole my quarters.  I want my soda!\n\nI know it's dumb, but I kick the machine so hard my foot hurts.\n---\nOK, calm down Steve.  The hard part is done, just focus on the getting to work.\n---\nWait, I think I hear something...\n---\nA soda dropped out!  Yes!\n}\n",s(so,"get_caffeinated_quest_1",'\n{The "Out of Order" sign is gone. Maybe it will work?\n\nSince I can\'t get my coffee, I might as well get my caffeine fix from somewhere.\n---\nGreat, the button doesn\'t work and it\'s not giving my change back. Damn.\n|\nThe "Out of Order" sign might be gone, but I know better.\n}\n',s(so,"sodaMachineFixed",'\nWow, the "Out of Order" sign is gone. Did they actually fix it?\n',s(so,"sodaMachineBroken","\n{An \"Out of Order\" sign is stuck to the front.  This thing has been broken since I moved here.\n\nNot that I've had a real hankering for a soda, but it's just kind of annoying.\n|\nIt's out of order.\n}\n",s(so,"SODA_MACHINE","\nI wonder how long the cans have been in that old thing?\n",s(so,"LOUD_PAYPHONE_LADY",'\n{\n"I\'ve been here for 30 damn minutes!  When the hell are you going to help me out?!"\n---\nShe sure seems upset.\n---\n"HOW THE FUCK ARE YOU GOING TO CALL ME BACK?! I\'M ON A FUCKING PAYPHONE, YOU IDIOT!"\n---\nWow, you\'d think people would try to take care of these matters at home. Yeesh.\n|\nI want to stay very far away from her.\n}\n',s(so,"COFFEE_CART","\nIt's closed. I hope Carl comes back.\n",s(so,"coffeeCartFriday","\nHuh, that's strange.  It's closed.  I really need my coffee.  Today of all days!\n",s(so,"coffeeCartThursday",'\n{Instead of Carl, there\'s some young lady behind the stand, looking at her phone.\n---\n"You\'re not Carl."\n\n"Nope. Was called in last minute. Guess his wife just went into labor or somethin\'. Can I get you anything?"\n\n"Carl\'s married?"\n\n"Guess so,  I don\'t know the guy. You getting something or not?"\n\n"Sure. Coffee. Black."\n\n"Here you go. See ya."\n|I miss Carl.}\n',s(so,"coffeeCartWednesday",'\n{"Morning Steve.  You alright?"\n\n"Fill it up to the top, Carl. I\'m going to need every last drop today."\n\n"You got it.  Take it easy Steve. Don\'t want to work too hard."\n\n"Easy for you to say, Carl. But I\'ll try. Thanks!"\n|I\'ve got plenty already, and plenty of work to do too.}\n',s(so,"coffeeCartTuesday",'\n{"The usual for you today, Steve?"\n\n"Yes please."\n\n"Enjoy."\n|"Need anything else?"\n\n"No, I\'m fine."}\n',s(so,"coffeeCartMonday",'\n{Carl runs the little coffee stand at my local station.  The coffee is decent, and it\'s nice to see his smiling face each morning.\n---\n"Morning, Carl! Can I just get the usual?"\n\n"Sure thing, Steve. That\'ll be a buck twenty five."\n\n"Here you go, Carl, exact change. Thanks. Have a good one."\n\n|"See you tomorrow."|"See you tomorrow."|"Don\'t miss your train."}\n',s(so,"checkEmailsDay5","\n{\nEmail 1\n\n    From: Jason Harris\n    To: Steve Perry\n    Sent: Friday, 5:00am\n    Subject: WHERE THE HELL ARE YOU?\n---\n    I WANT TO RUN THROUGH THE PRESENTATION BEFORE THE CLIENTS GET HERE.\n    GET YOUR ASS DOWN HERE RIGHT AWAY!\n|\nMaybe I should call in sick.\n}\n",s(so,"checkEmailsDay4","\n{\nEmail 1\n\n    From: Jason Harris\n    To: Steve Perry\n    Sent: Thursday, 4:27am\n    Subject: (Subject)\n---\n    Steve, our clients are going to be here tomorrow whether you're ready or not. You're going to\n    need to PUSH HARDER. I don't care what you have to do to put this thing together, just GET IT DONE.\n\n    BRING ME WHAT YOU HAVE ASAP.\n\n---\nEmail 2\n\n    From: Henry Thorne\n    To: Steve Perry\n    Sent: Thursday, 5:45am\n    Subject: Today?\n---\n    Hey, Steve\n\n    I'm in the city today and I haven't heard back from you. I'm sure you're busy, but it would really\n    be nice to see you while I'm down. My plane leaves tomorrow, so today is probably it. You can\n    call me at my old number if you get this in time and we can plan something out. It hasn't\n    changed.\n\n    Hope to talk to you soon.\n|\nHow can Mr Harris ask me to push harder? I'm working my ass off!\n}\n",s(so,"checkEmailsDay3","\n{\nEmail 1\n\n    From: Jason Harris\n    To: Steve Perry\n    Sent: Wednesday, 5:45am\n    Subject: Pure Risk\n---\n    Steve,\n\n    What you handed me today WON'T work. The Premiums we offer do NOT cover these plans.\n    Half of these are life quality expenses. We NEED to think about the bottom dollar here. We're\n    two days from the proposal meeting. You've got to do better than this.\n\n    Put something better together today and get it to me by tonight. You're running out of time.\n\n---\nReply (Unsent)\n\n    Dear Mr. Harris,\n\n    Sir, I have to disagree. I feel that these plans are essential for our customers. If you'd just look\n    over the papers I sent you about the\n\n---\nReply\n\n    Dear, Mr. Harris\n\n    Yes, sir. I'll make some changes.\n\n|\nHave to cut more. Have to work harder. Have to keep moving. This will be worth it. Right?\n}\n",s(so,"checkEmailsDay2","\n{\nEmail 1\n\n    From: Jason Harris\n    To: Steve Perry\n    Sent: Tuesday, 6:10am\n    Subject: Good Things!\n---\n    Steve,\n\n    I liked the ideas that you brought up yesterday. But I got word that the new clients are pushing up\n    the meeting to Friday! You're going to have to put this thing in HIGH gear, Steve. I can't hand them\n    half assed work.\n\n    Don't let me down.\n---\nReply\n\n    Dear Mr. Harris,\n\n    Thanks for the update. But Friday is a little soon isn't it? I just want to put something\n    together that will really help our customers. I may have to cut a lot of the ideas we spoke\n    about.\n\n    But I'll do my best, sir!\n\n---\nEmail 2\n\n    From: Henry Thorne\n    To: Steve Perry\n    Sent: Tuesday, 6:29am\n    Subject: Stevey!\n---\n    Hey Steve!\n\n    Long time no talk! Just checking in with you and letting you know I'm going to be in the city in a\n    few days. It's supposed to be a business trip and it's only for a day, but I thought it's be nice to drop\n    by and catch up. I know things have been difficult since we last talked.\n\n    Just let me know when you're free and I'll make something work.\n\n    See you soon!\n|\nThat's all the emails.  How am I supposed to get this done by Friday?\n}\n",s(so,"checkEmailsDay1","\n{There's no service, but I can view my emails.\n---\nEmail 1\n\n    From: Jason Harris\n    To: Steve Perry\n    Sent: Monday, 5:15am\n    Subject: I've Got a Job for You\n\n    ---\n    Steve,\n\n    I've got something big for you.\n    We've landed some important clients. The boys upstairs want you to wow them with a new\n    proposal. You're one of our senior agents and you've been in the department for, what, 6 years?\n\n    I'm giving this opportunity to you.  Be at my office at 6:30 am this Monday and we can talk over the details.\n---\n\nReply\n\n    Dear Mr. Harris,\n\n    I've actually been with the company for eight years, but no need to worry, sir. I'm happy to finally\n    be given the opportunity to do some real good for the company. I've got a few big ideas that I feel\n    could really help our customers in a really big way.\n\n    I'll be there bright and early, sir. I can't wait to start on this project together.\n\n---\nEmail 2\n\n    From: Janice Franz\n    To: Steve Perry\n    Sent: Monday, 6:05am\n    Subject: RE: RE: Job Opportunity\n---\n    Hi Mr. Steve Perry\n\n    My name is Janis and I'm reaching out on behalf of Embrace Insurance. I came across your resume\n    in our system and I believe you would make a perfect fit for our team!\n    If you're looking for a change or would simply like to see what options are available, we would\n    love to set up a meeting soon!\n\n    We look forward to your response!\n|\nStill no service, but Mr. Harris is waiting for me at the office.\n}\n",s(so,"firstInteractionWithCommuter1","\n{Another commuter waiting on the train.  I say hello and she says hello back.\n|I think one hello is enough when talking to complete strangers.}\n",s(so,"title_intro","\nSteve,\n---\nSteve,\n\nI've got something big for you.\n---\nSteve,\n\nI've got something big for you.\n\nCome by my office first thing Monday morning.\n",uo))))))))))))))))))))))))))))))),ho=s(so,"use_secret_passage_way","",s(so,"disembark","",s(so,"ridingTheTrain","",s(so,"checkMap","",s(so,"goToLinePlatform","",s(so,"goToLineTurnstile","",s(so,"goToLobby","",s(so,"nextDay","",uo)))))))),_o=s(io,"meetConductorFirstTime",'\n"No one is supposed to be back here right now! What are you doing here?"\n\nNow that he\'s close up, he seems a lot different than the other security guards. His uniform even seems a little too big for him.  He does look flustered, though.\n---\n"I-I\'m sorry, sir. {INFRACTIONS_GREEN_BUTTON.pressed? The computer was turned off.  I just pressed the button to turn it on|I followed all of the steps like the poster said}, but the whole thing broke down."\n\nHe seems real upset.\n---\n"That\'s typical.  Everything around here is breaking down under too much load."\n\nHe looks in the room as if expecting to find someone else.\n---\n"I\'m sorry pal, I didn\'t mean to yell at you.  They aren\'t supposed to be taking people here today.  It\'s closed.  For pest control spraying."\n\n"Spraying?"\n\n"Look, just go.  The exit is down the hallway behind me.  Three lefts and a right and you\'re out.  I\'ve got to take care of something."\n---\nI guess I got off easy.  I didn\'t see any rats or bugs or anything in there though.\n---\n"Hey, buddy!  Hang on a minute."\n\nUh oh.\n---\nHe holds something out to me.\n\n"Here, take this.  Don\'t want you to end up back here again."\n---\nIt\'s an Orange Line pass!  That\'s great.\n\nWhat a strange guy.\n',s(io,"escapingInfractionRoom","\nIt's open! The reseting computer must have reset the locks. Seems like a flaw in the design, but I'll take it.\n---\nThe door opens up to the maze of hallways. I think I can remember the path back to the station platform.\n\nIt was left, left, right, straight till the water cooler, then another left, or was it right--\n---\n\"Hey, what are you doing back here?\"\n---\nShit, another security guard.\n\nHe's looking right at me.\n\nHe looks pissed...\n",s(io,"pourSodaOnInfractionsMachine","\nThis damn system!\n\nIn an uncharacteristic moment of weakness, I pop open this can of soda I still have for some reason and pour it all over the damn machine.\n\nIt sizzles and sparks, and the whole thing goes off-line, then resets.\n",s(io,"breakInfractionAutomationSystem","\nMaybe it will start if I press this.\n---\nNothing happens.\n---\n...\n---\nOh no.  The computer is making a terrible sound.\n---\nMaybe it's starting up.\n---\nNope.  It's rebooting.  But it looks like it froze.\n\nI'm stuck! What did I do? What did I do?\n",s(io,"INFRACTIONS_PRINTER","\nIt's an old printer attached to the computer. It looks like it barely works.\n",s(io,"infractionAutomationStep3","\n{Nothing's coming out! Did something break?\n---\nSomething must have went wrong because the computer seems to be rebooting!\n\nDamn it! Why isn't anything working!  What do I do now?\n|\nThe whole damn system is broken and I'm stuck!\n}\n",s(io,"INFRACTIONS_COMPUTER","\n{INFRACTIONS_ROOM_DOOR.infraction_step=0?  The computer doesn't seem to be on. But there is a [green lit button](INFRACTIONS_GREEN_BUTTON) on it's front.}\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=2?  Everything is sent and I just have to get my printed ticket. I wonder how much this is going to cost me.}\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=3?  It's stuck on the blue screen of death! }\n",s(io,"infractionAutomationStep2","\nI can see all of my personal info on the dusty computer monitor. My name, age, address. Everything. It all seems up to date, though that picture certainly isn't.\n\nI'll just going to hit send and get this over with.\n---\n...\n---\nThis thing is sure taking a long time.\n---\nThere it goes. Now it's asking me to select my violation. \"Fare Evasion\" sounds so official.  I hope this doesn't go on a permanent record. I don't know if I'll ever live this down.\n---\nThere. It's sent. How long will I have to wait now for this to print?\n",s(io,"INFRACTIONS_CARD_READER","\n{INFRACTIONS_ROOM_DOOR.infraction_step=1?  I can already see my personal information on the computer screen.  No need to scan my Red Line Pass again. }\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=2?  They already  have my info.  I don't want to get fined again! }\n\n{INFRACTIONS_ROOM_DOOR.infraction_step=3?  The computer is still rebooting and the whole system is broken. Damn it! Why isn't anything working!\n}\n",s(io,"infractionAutomationStep1","\nWell, It's a card reader, and the only card I have on me is my Red Line Pass. It's worth a try.\n---\n*BEEP*\n---\nAha! The computer seems to be booting up... very slowly. Where did they dig up this antique? It makes our computers at the office look new. As long as it's working I guess.\n",s(io,"readingInfrationsPoster","\n{_Violators of the law! Due to high volumes of fare evasion, vandalism, and littering, all minor infractions will be dealt with by our new automated system. Please read carefully the following instructions as Transit Authorities Fine Distribution has recently changed:_\n---\n_Step 1: Approach computer terminal in center of room (WARNING: Do not press the big green button)._\n---\n_Step 2:  Scan a state issued ID, Transit Line Pass, or input social security number and verify the listed personal information. System will power on after input._\n---\n_Step 3: Select minor infraction the violator is accused of (WARNING: you are being monitored, any attempt to supply misinformation will be met with harsh consequences!)._\n---\n_Step 4: Press send. The information provided will now be processed and verified by a member of Transit Authority. Whilst this is happening the violator may fill out a Violation Dispute Document on the computer or a Violation Apology Document (WARNING: All documents are subject to be read at Transit Authorities earliest convenience)._\n---\n_Step 5:  If all the information is correct, a fine ticket will print out next to the computer and the door will be unlocked. Once the ticket has been removed the violator may leave the Detention Room._\n---\n_Thank you and have a nice day!_\n---\nWow, this seems overly complicated. I'm never going to break the law again.\n|\n_Violators of the law! Due to high volumes of fare evasion..._\n\nBlah, blah blah... let's see, scan your pass... check the computer... print ticket.\n\nHmmm.\n}\n",s(io,"INFRACTIONS_ROOM_DOOR","\n{It's locked. I'm trapped. What am I supposed to do? And how do I get out  of here? They can't keep me in here like this.\n---\nCan they?\n|{?\nIt's locked.\n|\nStill locked.\n|\nMaybe if I jiggle the handle a few more times...\n|\nNope. It's locked.\n|\nWait a second. I think I got it! Oh, no. Just kidding. Still locked.\n}}\n",s(io,"TICKET_INSPECTOR",'\n"Where am I!?"\n\n"This is the Central Guard Station at St. Mark\'s. Follow the instructions on the poster."\n\n"But--"\n---\nThe steel door slams shut before I can get another word out and he is gone.\n',s(io,"caughtOnOrangeLineHeadingToOther","\nOh no, I got on the wrong train!  Mark said 73rd Street Station, how did I mess this up?\n---\nIt's ok, take a few breaths.  I'll just get off at the next stop, then catch the right train.  Then I can grab my briefcase, hopefully everything is still in there, and I can buy a ticket back to my station and get to work and give the presesntation and get my promotion and everything will be fine.\n---\n\"Excuse me sir, can I see your ticket or pass please?\"\n---\n...\n---\nOh.  Shit.\n",s(io,"caughtOnOrangeLineHeadingTo73rd","\nI'm so close.  This has been one crazy morning, but I'll just grab my briefcase now, hopefully everything is still in there, and I can buy a ticket back to my station and get to work and give the presesntation and get my promotion and everything will be fine.\n---\n\"Excuse me sir, can I see your ticket or pass please?\"\n---\n...\n---\nOh.  Shit.\n",s(io,"jumpTurnstileAfterTaklingToMark","\nOk, I've done this once before, I'll just do it the same way the skater punk showed me.  Nice and easy...\n---\nMade it!  That wasn't so bad.  I'm starting to get the hang of it.\n",s(io,"pleasantriesWithMark","\nHe's still describing the broom closet...\n",s(io,"markTellsAboutBroomCloset",'\nHis clothes are covered in dirt and holes. He sits on the tile floor with a sign.\n\nThe sign reads, "Hi, I\'m Mark. Anything helps. God Ble$$."\n---\nWell, that was easy.\n---\nI quickly explain the situation, but he doesn\'t seem to be following any of it.\n\nThis was a waste of time!\n---\n"Did you say briefcase?"\n\n"Yeah, it was stolen.  I was told you might have found it."\n\nNow that I say it, it sounds really dumb.  Why did I think this would work?\n---\nHis eyes go blank for a few moments, then with a sudden jolt, he\'s back again.\n\n"Yeah, bout 10 minutes ago. One of the rail kiddies was lugging around this real fancy thing."\n\n"Oh my God, really?! Did you say rail kitty?  Never mind.  Tell me, where did he go?"\n---\n"Hold your horses. He hangs out with a real rough group, bunch of nabbers and grabbers. But ol\' Mark\'s seen where they horde their stash.  An old broom closet at 73rd Street Station, lock doesn\'t even work--"\n---\n"That\'s great, thanks!  Gotta go!"\n\nI leave the bum still talking to himself about the broom closet.\n',s(io,"GREEN_SUIT_MAN","\nHis suit looks like it costs more than my rent.  I'm not going to bother him.\n",s(io,"SPIKY_HAIR_GUY",'\n{{PLAYER.find_briefcase=2?"Excuse me, Mark?"\n\n"Sorry, bud. Wrong guy."\n|\nThat\'s not Mark.\n}\n|\nThat\'s not Mark.\n}\n',s(io,"SHIFTY_MAN","\n{He stands in the shadows of the platform away from the crowds and he seems to jump at every loud noise. This guys has to be up to something.\n|\n{PLAYER.find_briefcase=2?\"Excuse me, sir? Your name wouldn't happen to be Mark would it?\"\n---\n\"Beat it, shit head. I'm waiting for someone.\"\n|\nHe's still up to no good.\n}\n|\nHe's still up to no good.\n}\n",s(io,"ODD_KEY","\nI wonder what this is for. It's probably just junk.\n",s(io,"findKeyInTrashCan","\nIt's just a trash can. Nothing important here.\n---\n...\n---\nWait. There's something inside.\n\nI better not regret this...\n---\nThis is a strange key.  I think I'll hold onto it. Just in case.\n",s(io,"followSkaterDudeToCapitalHeights","\nI just broke the law. I'm riding without a ticket or a pass.  This isn't right.\n---\nIs that guy staring at me? He knows I jumped. He knows I did something wrong. Everyone knows. I have to get out of here, I can't breath. I--\n\n\"Hey, man. Chill the fuck out.  You don't want to draw attention to us.\"\n---\n\"Speaking of which... I can't be seen around Capitol Heights, so you're gonna have to do this next part alone.  Just look for Mark.  You got that?  Mark.\"\n\nThe train approaches our station.\n---\n\"Wait, how will I know what he looks like?\"\n\n\"I'll be waiting for you down at 104th Street Station.  Come find me there when you find your briefcase.  And don't try running off without paying me. I got eyes and ears everywhere down here, man. If you don't find me, I'll find you.\"\n---\nHe shoves me off the train onto the platform.\n",s(io,"jumpTurnstileWithSkaterDude","\nHere goes nothing...\n",s(io,"followSkaterDudeToOrangeLine","\n\"My guy's at Capitol Heights Station.\"\n\n\"But I don't have tickets for the orange line!\"\n---\n\"You don't need any of that. Just hop the stile. It don't cost a thing.\"\n\nWithout another word he's over the turnstile in one swift movement. No alarms sound, no security guards running.\n\nNothing.\n\n\"Come on, man. It ain't nothin. Hurry up, train's about to leave.\"\n---\nHe makes it sound so easy. But I can't just break the law.  This punk's used to it, but what if I get caught?\n\nThen again what if I don't get my proposal back?\n",s(io,"forcePlayerToFollowSkaterDudeToCapitolHeights","\n\"Yo, that's the wrong train!  We're headed to Capitol Heights.\"\n",s(io,"forcePlayerToFollowSkaterDudeOntoOrangeLine",'\n"Hey! Where you going? We gotta ride the orange line."\n\n"But I don\'t have a ticket."\n\n"So?"\n',s(io,"helpFromSkaterDude",'\n{Aw damn!  It\'s that skater punk that\'s always goofing around my station.\n\nHe lights up a cigarette even though this is clearly a no smoking area, and gazes at me with smug amusement.\n---\n"I\'m not crying.  I\'m just... under a lot of stress."\n\n"Something of yours get snatched?"\n\n"Why would you say that?"\n---\nHe flicks ashes onto the floor.\n\n"Seen a few suits like you dragging around the pig sty. Not sure why, it\'s been closed all week.  None of \'em cried though."\n---\n"I wasn\'t-- never mind.  Did the others get any help?"\n\n"Nah, cops are never any help.  Especially today, they\'re all hung up at Broadway Station for some reason.  Your junk\'s probably been dumped in a trashcan somewhere.  That\'s what usually happens."\n\n"That\'s great!  Maybe we can still find it."\n---\nThe punk takes his time finishing off his cigarette before finally responding.\n\n"Doubt it, the bums will beat us to it.  What\'s so important about it anyway?  Just buy another one."\n\n"Damn!  No, I need to get it back at all costs. It\'s got a very important presentation in it."\n\nHe looks at me with a glimmer in his eye.\n---\n"Well...  I happen to know the bum\'s ringleader.  I could take you to him."\n\n"Yes!  Please!"\n\n"What\'s it worth to you?"\n---\n"What do you mean, you want cash?  I guess I could give you a hundred--"\n\n"A thousand."\n\n"No way, I--"\n\nHe jumps on his skate board and starts rolling away.\n\n"Wait!  OK, a thousand.  But not until I see some results.  Who do I talk to?"\n\n"Follow me. We got a train to catch."\n---\nHe rides off on his skateboard over to the orange line.\n|\n"Let\'s go, orange line\'s this way."\n}\n',s(io,"findingSecurityDepotClosed","\nIt's closed. Of course it's closed! The one time I need the subway security and they're off doing God knows what.\n---\nWhat am I going to do? Everything was in that Briefcase.  My wallet, my reports, and worst of all my proposal! The key to finally turning my life around. Without it I may as well just walk in front of the next train.\n---\nI followed the rules. I pay my taxes on time. I make sure to do everything right. And people can still just up and break the law and nobody does a thing about it. Shitty people run rampant while people like me are left to suffer.\n---\nMr. Harris is going to kill me. What the hell am I going to do?\n---\n...\n---\n\"Hey, man. Are you crying?\"\n\nWho said that?\n",s(io,"panic","\nWhy is this happening to me?!  I always follow the rules.  I work hard.  But I get walked over all my life.  And now some crook is going to make me miss my presentation and my promotion!  It's just not fair.\n---\nI'm going to have to take matters into my own hands.  Maybe I can find the thief and arrest him or something.\n---\nThis is a bad idea.\n\nI better just report this to the authorities somewhere.\n",s(io,"ignoreGuardsAdvice","\nIf those guards at Metro Center can't help me, what are the chances that any of the other guards will be any better? Maybe I can find the thief on my own and make a citizens arrest. Or something.\n---\nThis is a bad idea.\n",s(io,"followGuardsAdvice",'\n{"Someone at the Security Depot better be able to help me. I have to get my proposal back!"|}\n',s(io,"SECURITY_OFFICERS",'\n"Have a nice day sir."\n',s(io,"tellCommuter1AboutStolenBriefcase",'\n{COMMUTER_1.friendliness>0?\n{"Did you see a man run by with my briefcase I was carrying? He just robbed me."\n---\n"Oh my God, that\'s terrible! I think I saw someone with a briefcase like yours head for the trains. But it\'s hard to tell, there\'s so many of you business types with similar briefcases."\n\n"Oh man, I\'ve got to get it back somehow.  I\'m so screwed."\n\n"I hope you find it!"\n|\n"Did you find it yet?"\n}\n|\n{"Pardon me, miss! Did you see a man run through here with a briefcase?"\n\n"Um, yes? There\'s a lot of those around."\n---\n"No, he was a thief! He took my briefcase!"\n\n"Sorry, sir. I can\'t help you."\n---\nUseless!\n|\nShe\'s no help.\n}\n}\n',s(io,"tellOfficersAboutStolenBriefcase",'\n{\n"Help! Help! I\'ve been robbed! Some crook just took my briefcase!"\n\n"I\'m sorry, but the exit is closed sir--"\n---\n"I don\'t care about that! My presentation is gone!  I need you to do something!"\n\n"Please calm down, sir. We need people to clear this station. Please take any concerns you have to the Security Depot at Spring Hill Station. We apologize for any inconvenience and hope you have a nice day."\n---\n"But I can\'t go to work with out it. My life will be over!"\n\n"Have a nice day, sir."\n---\nThey aren\'t even listening to me.  Why aren\'t they helping me?\n\nI guess I can check out the Security Depot.  Maybe they\'ll actually do something.\n|\n"Have a nice day sir."\n}\n',s(io,"briefcaseStolen","\nJeez!  Someone just ran into me.\n\n\"Ow! Hey! Watch where you're going!\"\n---\nWait. Where's my briefcase?\n---\nNo. No no no no no no no no no. No.\n---\nI've been robbed... My presentation... It's gone!  I... I need to get help. Now.\n",s(io,"noticeGirlInYellow","\nI can't help noticing this girl.  There's something about her, like she doesn't belong.  Her dress is the brightest thing down here.  She sticks out like a dandelion growing through the cracks in the sidewalk.\n---\nThe crowd closes around her for a second, blocking my view.  I wait for a minute, but she seems to have disappeared.\n---\nI only saw her for a split second.  Did I imagine her?\n",s(io,"askCommuter1AboutDelay","\n{COMMUTER_1.friendliness>0?\n{It's that woman I saw on Monday.\n\n\"Excuse me, miss? What's going on? Why isn't anyone moving?\"\n\n\"Oh, Hi! Those security guards locked the gates. They're not budging. All they'll say is that there is some incident above ground and they're not letting anyone through.\"\n---\n\"But I can't stay here. I have to get to work.  I have an important presentation today.\"\n\n\"I know.  If I'm late one more time I'm bound to get fired.  I've got to figure out some other way out of here.\"\n|\nLooks like she's just as stuck as I am.\n}\n|\n{\"Excuse me, miss?\"\n|\nShe's ignoring me. The nerve of some people.}\n}\n",s(io,"askOfficersAboutDelay",'\n{\nOh good, some officers are here.  I can find out what the hold up is.\n\n"Excuse me, ma\'am? I--"\n\nShe cuts me off mid sentence.\n---\n"This exit is closed sir. There\'s an incident going on above ground and we\'re not letting anyone through \'till we get the all clear. You will have to wait like all the others."\n---\n"But I work up there! I\'m going to be late if I don\'t--"\n\nAgain she cuts me off.\n|}\n"If you are unable to wait, take the train to the next stop and walk from there."\n\n"But I--"\n\n"Have a nice day sir."\n---\nWhy aren\'t these officers doing their jobs?\n',s(io,"leavingBroadwayStationPrematurely","\nThis is my stop, where else would I need to go?\n",s(io,"ANGRY_CROWD","\n{BRIEFCASE.location=PLAYER?\n{What's going on over here? No one seems to be moving and everyone seems pretty angry.\n\nSome people are shouting about the doors being locked.\n---\n|}\nI can't seem to push my way through all these angry people.  Now what?\n|\n{They haven't budged.  Apparently no one saw me get robbed.  Or they just don't care.\n---\nThe mob seems to be getting angrier. I hope they open those doors soon or this could get ugly.}\n}\n",s(io,"EXIT","\n{ANGRY_CROWD.location=BROADWAY_STREET? There's a big crowd of people blocking my view, but it looks like the exits have their shutters down.  What the hell is going on here?|It's still locked.}\n",s(io,"delaysAtBroadwayStreetStation",'\nEverything\'s fine. It was just a little detour, I\'ve still got time. At least I\'m wide awake now.\n---\nThe loud speaker buzzes.\n\n"Attention passengers, due to some unforeseen events you may experience delays at Broadway Street Station.  Thank you for your understanding and have a nice day."\n---\nWhat? What do they mean "delays?"\n',s(io,"notGoingToWorkAgain","\nI've got to get to Broadway Street Station.  Any more wrong stops and I'm really going to be late.\n",s(io,"getMap","\n{It's a map of the whole subway.{BRIEFCASE.location=PLAYER?   It's only 6:15. If I leave here now I should be able to make it to work on time.}\n---\nThere's also little map pamphlets here as well.  I'll take one with me just in case. Don't want to get lost again!\n\n(check MAP by pressing \"M\")\n|}\n",s(io,"askMaintenanceManForDirections","\n{\"Excuse me, sir! How can I get to Broadway Street Station as quickly as possible?\"\n---\n\"Damn it, can't you see I'm busy?  Go and check the damn map if you're lost. It's that big map looking thing on the wall over there.\"\n---\n\"Uh, okay. Thank you.\"\n|\nHe's busy and I don't want to get yelled at again.\n}\n",uo))))))))))))))))))))))))))))))))))))))))))))))),Eo=s(io,"workersComplainingAboutClosuresOnTrain",'\nThree men in construction worker uniforms huddle over their coffee thermoses looking really frustrated.\n\n"How could they shut down a whole damn station? No warnin\' or nothin\'!"\n---\n"Not sure. And it\'s a big station too. Musta been pretty serious to be worth pissing off half the city. We won\'t be the only ones walking to work."\n---\n"I heard someone walked in front of a train!"\n\n"Shut up, Donny. That ain\'t true."\n\nThey all curse in unison.\n',s(io,"womenTalkingAboutHotdogManOnTrain",'\n"Oh, God, what do you mean?"\n\nTwo women are speaking rather loudly in the seat behind me. Don\'t they know they\'re bugging people?\n---\n"Just like I said! I was at Twin Brooks Station and as I was boarding the train I saw a giant hot dog sitting on one of the benches, crying his eye\'s out. Such an odd thing."\n\n"What do you suppose he was crying about?"\n---\n"I don\'t know. I guess you could say I hadn\'t mustard up the courage to ask! HA!"\n\n"Oh, Hannah, you\'re terrible."\n---\nJesus Christ.\n',s(io,"check_wet_jeans","\n{But maybe someone left something in there. Desperate times call for desperate measures.\n---\nUgh... They're warm...\n---\nHey, there's a quarter in the front pocket.  Jackpot!\n\nNot sure that was worth it, though. I should probably burn my hands.\n|\nWell, it worked the first time, maybe these have some money too...\n---\nYup.  The subway delivers again.\n}\n",s(io,"wetPantsOnTrain","\n{The car is empty. Just me, empty seats... and what looks to be a wet pair of discarded [jeans](check_wet_jeans) lying in the seat in across from me. Ick.\n|\nThe car is empty. Just me, empty seats... and what looks to be a wet pair of discarded [jeans](check_wet_jeans)....\n\nWait a minute!  Is that the same pair?  Or are there multiple wet people without pants down here...\n|\nOh no... more wet [jeans](check_wet_jeans)!\n|\n}\n",s(io,"persist_sitting_in_saved_seat",'\nI\'m tired of being pushed around! I\'m sitting down!\n\n"Out of the way, Ma\'am!"\n---\nOnce she sees that I\'m going to sit whether she\'s there or not, she slinks back into her seat and presses her back hard against the window. Her eye\'s are wide.\n\nIt pays to be a little assertive sometimes.\n---\n"You\'re sitting on him."\n---\n"YOU\'RE SITTING ON HIM!"\n\nHer screech fills the car and everyone is staring at us. Actually I think they\'re staring at me...\n---\n"HE CAN"T BREATHE, GET OFF OF HIM NOW!"\n---\nThe other passengers chime in.\n\n"C\'mon man, just move."\n"Yeah, leave her alone."\n"Just fuck off so she\'ll shut up.\nShe wasn\'t hurting anyone."\n"What an asshole."\n---\nJeesh, I just wanted to sit down, and now I\'m the bad guy?\n\nThe train stops at my stop and I run out as fast as I can.\n\nI just wanted to sit down...\n',s(io,"attempt_to_sit_in_saved_seat","\n\"Pardon me, Ma'am. You're not aloud to save seats. So if you'll excuse me, I'd like to sit down.\"\n\n\"This seat's taken!  He's here!\"\n\nWho's here?  I don't see anyone in the seat.\n\n\"Get out of here!  Leave us alone.\"\n---\nHer eye's look everywhere but at me, and she now lays sprawled out over both seats. I don't think this is going anywhere.\n\nThis isn't fair though. I've a [right](persist_sitting_in_saved_seat) to that seat as much as she does.\n---\nBut in this case, it's best to slowly walk away...\n\nMy stop's coming up anyways.\n",s(io,"savedSeatOnTrain","\nWow, this car is packed. There isn't a single place to sit. Just my luck.\n\nOh, there's an empty seat back there!\n---\nA strange looking woman is covering it with her hands for some reason.\n\nBut you're not supposed to save seats, so I'll just [sit down](attempt_to_sit_in_saved_seat).\n---\nOh, well. I'll just stand. I'd rather not make a scene. My stop's coming up anyways.\n",s(io,"jumpTurnstileFortySecondStreet","\nOkay, the first time didn't go so hot, but maybe I can do it this time.\n\nThis is it, Steve. No turning back. It's either get this proposal back, or get fired.\n---\nNo one's looking. No guards in sight. Don't think about the consequences. Just jump and run.\n---\nHere.\n---\nWe.\n---\nGo!\n",s(io,"questionJumpingTurnstiles","\nI'm not the type to jump turnstiles.\n---\nWell...\n---\nMaybe I should [jump anyway](just_do_it).\n",s(io,"tryToJumpTurnstileWithRepairManWatching","\nI can't jump it with that repair guy here, he'll report me.\n",s(io,"passageLocked","\nI guess it locked behind me. No going back now.\n",s(io,"confrontConductor",'\nI know what it is, he looks like the security guard who yelled at me before.  But now he\'s a repair man?\n\nI shout out to him.  "Hey, excuse me!"\n---\nHe doesn\'t turn around.  I call out again.\n---\nHe stops what he is doing and looks around.\n\nI do know this guy.\n\n"Aren\'t you that guy from Central Security?"\n\n"Nope."\n---\n"You bailed me out, remember? Gave me an Orange pass and everything?"\n\n"Nope."\n---\nWhat\'s going on here?  There\'s no mistaking it. This is him.  It\'s hard not to remember that grizzle.\n\n"What are you doing here? And what\'s up with the uniform?"\n---\nHe finally looks me in the eye and his expression changes.\n\n"You ever think about what runs these trains?"\n\n"Uh, no. Not really."\n---\n"Well maybe you should."\n\nWith that he takes off, heading deeper into the tunnel for the oncoming train.\n---\nWhat the hell just happened?\n',s(io,"catchConductorMessingWithPanel","\nHe tinkers away on an electric panel on the wall.\n---\n...\n---\nThere's [something](confront_repairman) about that guy...\n",s(io,"SECURITY_CAMERA_FORTY_SECOND_STREET","\n{You know, I'm surprised I never noticed these before.\n|}\nThey must have this whole place under surveillance.\n{---\nMaybe I can locate the thief and see where he goes if I can find the security footage.  They must have a surveillance room down here somewhere.|}\n",s(io,"ELECTRIC_PANEL","\nHmm... the lock is busted.  Lots of wires and blinking lights inside.  This is the panel that odd repairman-slash-security guard was messing with...\n",s(io,"exitPassagewayAtFortySecondStreet","\nThis passageway lets out in a different station.\n\nI don't see the thief anywhere though.  Maybe he outran me?  Or took a different turn?\n",s(io,"chaseThiefAgain","\nThere's a big \"DO NOT ENTER\" sign.  But the door is unlocked...\n---\n*Creak*\n---\nThis leads to a dark, dank, twisty passage.\n---\nWhat the hell, I'm going for it.\n",s(io,"collectedEnoughChangeToCallBoss",'\nI have the change. Guess there\'s no more avoiding it.\nHere we go.\n---\n*Ring* *Ring*\n---\n"Hello, this is In your Hands Insurance Agency, how may I direct your call?"\n\n"Hey Paula, this is Steve. Can I-"\n---\n"Steve? Steve who? You\'re going to have to be a little more specific, sir."\n\n"Steve. Steve Perry. Insurance agent, office 213. We talked about your cat for like, twenty minutes in the break room last week."\n---\n"Okay Mr. Kerry. How may I direct your call?"\n\n"Can I speak to Mr. Harris please? It\'s very urgent."\n\n"Mr. Harris is very busy, sir. What is the nature of the call?"\n---\n"Dammit Paula, just put Jason on the phone, will you?"\n\nShe murmurs something unpleasant, but makes the transfer.\n---\nOkay, so what do I say? My briefcase and proposal were stolen, please don\'t fire me?\n\nI can feel his hands around my throat already. Damn it.\n---\n"Where the HELL are you with my proposal, Steve?"\n\n"Ah! Good morning Mr. Harris!"\n---\n"Cut the bullshit. You were supposed to be HERE an hour and a half ago --".\n\n"About that sir... I\'ve had a little trouble..."\n---\nMr. Harris goes into a rant before I can explain any more.  He is yelling so loud that I have to hold the phone away from my ear.\n\nA train pulls onto the platform.  The only passenger that exits is an odd looking man in a pulled up blue hoody.\n\nWe\'re the only two on the platform and he gives me a once-over.  Mr. Harris keeps yelling.\n---\nThis guy looks familiar.\n\nIt\'s the thief!\n---\n"That\'s the guy-- hey stop!"\n\nThe thief recognizes me too and turns and runs.  Mr. Harris stops his tirade in surprise.\n\n"What did you say to me Steve?  You want me to stop?  Why don\'t you--"\n\n"Sorry Mr. Harris, I have to run.  I\'ll see you with the proposal very soon.  Bye!"\n\n*CLICK*\n---\nThe man disappears around a concrete pillar.\n\nI chase after him, just in time to see him dash through an obscure maintenance door.\n\nI want my briefcase back.\n\nI\'m going after him.\n',s(io,"useChangeFromMotherToCallBoss",'\nI\'ve got this change from that woman with the annoying kid. It\'s just 50 cents, she probably won\'t miss it. Plus that kid is probably better off without all that sugar.\n---\n*Ring* *Ring*\n---\n"Hello, this is In your Hands Insurance Agency, how may I direct your call?"\n\n"Hey Paula, this is Steve. Can I-"\n---\n"Steve? Steve who? You\'re going to have to be a little more specific, sir."\n\n"Steve. Steve Perry. Insurance agent, office 213. We talked about your cat for like, twenty minutes in the break room last week."\n---\n"Okay Mr. Kerry. How may I direct your call?"\n\n"Can I speak to Mr. Harris please? It\'s very urgent."\n\n"Mr. Harris is very busy, sir. What is the nature of the call?"\n---\n"Dammit Paula, just put Jason on the phone, will you?"\n\nShe murmurs something unpleasant, but makes the transfer.\n---\nOkay, so what do I say? My briefcase and proposal were stolen, please don\'t fire me?\n\nI can feel his hands around my throat already. Damn it.\n---\n"Where the HELL are you with my proposal, Steve?"\n\n"Ah! Good morning Mr. Harris!"\n---\n"Cut the bullshit. You were supposed to be HERE an hour and a half ago --".\n\n"About that sir... I\'ve had a little trouble..."\n---\nMr. Harris goes into a rant before I can explain any more.  He is yelling so loud that I have to hold the phone away from my ear.\n\nA train pulls onto the platform.  The only passenger that exits is an odd looking man in a pulled up blue hoody.\n\nWe\'re the only two on the platform and he gives me a once-over.  Mr. Harris keeps yelling.\n---\nThis guy looks familiar.\n\nIt\'s the thief!\n---\n"That\'s the guy-- hey stop!"\n\nThe thief recognizes me too and turns and runs.  Mr. Harris stops his tirade in surprise.\n\n"What did you say to me Steve?  You want me to stop?  Why don\'t you--"\n\n"Sorry Mr. Harris, I have to run.  I\'ll see you with the proposal very soon.  Bye!"\n\n*CLICK*\n---\nThe man disappears around a concrete pillar.\n\nI chase after him, just in time to see him dash through an obscure maintenance door.\n\nI want my briefcase back.\n\nI\'m going after him.\n',s(io,"girlInYellowSecondEncounter","\nIt's that girl again!  She really sticks out down here.  Oh, she sees me.\n---\n\"Excuse me sir, would you like to buy some flowers? Only 50 cents for a bundle.\"\n\nShe hold up a cardboard box with bunches of various weeds and flowers held together by rubber bands. They look like they were plucked from every public garden and sidewalk crack in the city.  Not worth 50 cents.\n---\nSuddenly she spots someone behind me.  A moment of worry crosses her face, then she giggles and dashes away.\n\nI turn around to see who startled her.  It's just a maintenance person.\n---\nWhen I turn back, she has completely disappeared!\n---\nWhere did she go?\n\nAm I imagining things?\n",s(io,"stealMusiciansChangeSecondTime",'\nI guess another quarter might be useful...\n---\nThe musician suddenly speaks in a surprisingly low voice, "Stealing from a blind man.  I guess you need that more than I do."\n---\nShit!\n',s(io,"stealMusiciansChange","\nI snatch two dirty quarters from the top of the pile and pocket them quickly so no one sees.\n\nThe violinist keeps on playing.\n---\nThis isn't right, but it is just 50 cents. He's probably not even going to notice that it's missing. I mean, how could he?\n",s(io,"ABANDONED_JACKET","\n{PLAYER.call_boss=1?\n{Maybe I'll just check the pockets for change. I mean, it'll probably just get thrown out anyway.\n---\n...\n---\nNope, nothing. Ah, well. It was worth a look anyways.\n|\nThe pockets are empty.  No change in here.\n}\n|\n{It's lying on the bench like someone just forgot it. It's pretty worn out so I sort of doubt they'll be coming back for it.\n|It's just a discarded jacket. Nobody's coming back for it.}\n}\n",s(io,"throwAwayPosters","\nI'll just toss these posters in here. I mean, I've got more important things to do than looking around for \"Jonathan.\"\n",s(io,"askBusinessmanForChange",'\n"Say, you don\'t happen to have 50 cents, do you?"\n\n"And what have you done to earn, may I ask?"\n---\n"No, I just need 50 cents for the--"\n\n"I didn\'t ask what you needed it for, I\'m asking what you\'ve done to deserve it."\n---\nWhat the hell?\n---\n"Listen, I--"\n\n"No, you listen. Pay is given to those that work. Sitting on your ass begging people for money is not work. You think I got to where I am today by "asking" for what I wanted?"\n---\n"Forget about it. I can--"\n\n"No, I worked for what I wanted and took it. Success is not founded by beggars, but by choosers."\n---\nBefore I can say another word, the man steps through the turnstile and doesn\'t look back.\n\nWhat an asshole.\n',s(io,"tryToHangRedundantDogPosters","\nI've got a few posters left, but this station already has one.\n",s(io,"tryToHangDogPosterOnWrongLine","\nThat lady in the pink poncho wanted me to hang these on the Red line.\n",s(io,"putUpLastMissingDogPoster","\nThis station doesn't have a poster yet.  Here, I'll hang one up now.\n\nThere, that's the last one.  Hope someone finds \"Jonathan.\"\n",s(io,"putUpMissingDogPoster","\nThis station doesn't have a poster yet.  Here, I'll hang one up now.\n",s(io,"lookAtHangingDogPosters","\n{How sad!  He must be so scared down here.  |\nSays the dog's name is Jonathan. Weird name for a dog.\n|\nMaybe I should make one of these for my briefcase.\n\nNaw, that's stupid. These things never work.\n|\n$3000 reward? Damn, I'm in the wrong business. How would \"Dog Bounty Hunter\" look on a business card. Hmmmm...\n|\nI wonder if he's been found yet.\n}\n",s(io,"getDogPostersFromDistressedWoman","\nShe's wearing a pink poncho, maybe she's expecting rain in the subway?\n\nOh no, she's walking towards me.  I look away.\n---\n\"Oh, thank goodness. You look like a capable young man. Could I ask for an itsy bitsy favor from you? It won't take long, and you'd be saving a life.\"\n---\nShe shoves a handful of posters at me.\n\n\"Thanks!  I lost my little dog, Jonathan, down here.  I'm hanging up these posters hoping someone will find him.  Just hang these up on the Red Line for me.\"\n\nBefore I can respond she dashes after someone else.\n",s(io,"tryingToCallBossWithCellphone","\nI still don't have any service down here.  I'd have to go above ground to make a call.  I guess I could do that, but I'm in no hurry.  And it's probably raining.  And this is my big opportunity to use a payphone for once.\n",s(io,"ponderingCallingBossOnTrain","\n{Mr. Harris is going to hate me.  I'm really not looking forward to calling him.\n|||\nMr. Harris is still waiting.  I should probably call.\n---\nWell, I guess I can put it of a little longer.\n||||\nI've spent a lot of time down here.  I better get back to Mr. Harris.\n||||\nMr. Harris has probably given up on me.  I guess I could stay down here all day.\n---\nAll week...\n---\nAll year?\n}\n",s(io,"needCoinsForPayphone","\n{Hmm, there's no dial tone.\n---\nOh yeah, you've got to pay for these things.  Shoot, and I don't have enough change.  No wonder they're disappearing.\n---\nGuess I'll have to ask around for change. I mean, how hard can it to be to get 50 cents?\n---\nI'm not really in any rush to talk to Mr. Harris anyways.\n|\nIt costs 50 cents to use. Better start begging for change.  I'm going to need the practice.\n}\n",s(io,"checkBroomClosetButNotBriefcase","\nI finally made it. This is my last chance. It has to be in here.\n---\n*Click*\n---\nWell, it's unlocked.\n---\n*Creeeeeeaaak*\n---\nIt's dark, but I don't need to flip the switch to see that there's nothing in here but cleaning supplies.\n\nOf course there's nothing in here. What was I expecting?\n---\nDamn I wanted it to be true.\n---\n...\n---\nMy proposal is gone, and without that, no promotion. Hell, who am I kidding?  It's way past 6:30, I probably don't even have a job anymore.\n---\nI guess it's time to call Mr. Harris and tell him what happened.  I better find a phone.\n---\nDamn, and I was so close to that promotion. I would have had it made.\n",uo))))))))))))))))))))))))))))))))))),fo=s(io,"maintenanceManAtOneHundredFourthStreet","\n{He looks to be working indiscriminately on a wall of pipes. Taping here, hammering there, lots of wrenching. It doesn't look like much is being fixed though, in fact this whole station seems like a Case 27B - 6 waiting to happen.  Maybe I should leave my card.\n---\nHe doesn't seem to notice me, but he's muttering to himself, something about \"this whole damn place is falling apart.\"\n\nBetter give him his space.\n|\nNow he's either hammering a very rusty pipe or wrenching a bent nail.\n|\nMaybe I should offer him a hand.\n---\nHa ha, good one Steve!\n---\nWhy am I so fascinated with his maintenance guy?\n}\n",s(io,"FLUORESCENT_LIGHTS","\n{~Ugh, it's giving me a headache.\n|\nHow hard is it to get someone out here to fix this thing?\n|\nIt. Won't. Stop. But I can't look away.\n}\n",s(io,"CONSTRUCTION_AREA","\nHalf of the platform is draped in yellow tape and littered with orange cones. I remember hearing about this hefty construction project going on around here, but at this rate they're never going to finish.\n",s(io,"TROPICAL_T_SHIRT_MAN","\nHe easily stands out from the crowd and he looks to be utterly lost. Maybe he's from out of town?\n---\n{He's got a map, but it doesn't seem to be doing him much good. He just keeps looking from his map to the signs overhead.\n---\nI like his shirt though.\n|\nHe still looks lost.  I'm just getting the subway layout figured out myself.\n}\n",s(io,"CUSTODIAN","\n{He's asleep on a bench.  This place is a wreck! How does he still have a job?\n|\nHe's asleep. He should really do his job.\n\nI'm going to wake him up.\n---\nNo, I can't do that.  Maybe he's just on his break.\n|\nWow, still on break.\n}\n",s(io,"NEWSPAPER_VENDING_MACHINE","\nThe door's been forced open and all the papers cleaned out. Didn't think anyone read the paper anymore, let alone stole them.\n",s(io,"OVERTURNED_TRASHCAN","\n{~Looks like someone kicked it over. Half eaten food, stained newspapers, and other junk are splayed over the platform. Why do people have to be so senselessly destructive?\n|\nI'm not going to clean it up. Who knows what that stuff is covered in.\n}\n",s(io,"ADVERTISEMENT","\nIt's a giant poster advertising a hot new off-road vehicle. Four wheel drive, the highest safety test awards, great gas mileage, and... out of the price range of anyone one who steps foot in the subway.  Who do they think their selling to?\n",s(io,"FAKE_COP","\n{Oh my god, it's a police officer! I'm saved! He has to help me!\n\n\"Officer! Officer! I need your help!\"\n\nI tell him the whole story. My proposal, the missed stop, the thief. I even spill about jumping the turnstile. I don't care, I just need help.\n---\nHe doesn't say a word while I talk. It's tough to read him with his aviators on, but I think he's really listening.\n\nI finally finish and he stays quiet for a minute, then he takes off his sunglasses.\n---\n\"Wow, man. That's a crazy fucking story. What are you going to do?\"\n\n\"Uh, I thought you could help. You're a cop. You help people!\"\n---\n\"Oh... Oh! You're talking about my costume! Sorry, man, I ain't no cop. I'm on my way to my girlfriends costume brunch party. I told her this was fucking weird, but women, am I right bud?\"\n\n\"God damn it. I've got to go.\"\n\n\"Well, hey man, good luck finding your ring or whatever!\"\n|\nIt's not a police officer. It's just an idiot in a costume.\n}\n",s(io,"MAGAZINE_STAND","\n{~Biking, cars, computers, tabloid gossip. There's a zine for everything.\n|\nMaybe I should get a hobby. Golf? No. Guns? Nah ah. Cars?\n\nI think I'll just stick to doing nothing.\n|\n\"End of the World? Top 10 Reasons Why You Should Be Very, Very Afraid.\"  Wow, they'll really try anything to get you to buy these tabloids. Resorting to top ten lists. Yeesh.\n|\nThe old man smiles toothily at me he sits behind the rack of magazines. I think he wants me to buy something.\n}\n",s(io,"SECRET_SERVICE_TYPE_GUY","\n{He's just standing against the wall, not doing anything. He doesn't even react to the passing crowds or trains. If he's trying not to look suspicious, he's not doing a very good job.\n|\nOh shit, I think he's watching me. Eeek!\n}\n",s(io,"COMMUTERS_ST_MARKS","\nVarious people come and go through the busy station.\n",s(io,"BIRD","\nIt's flying all over the place, barely missing the passing commuters. I'm not sure how it got in here, but it seems scared. Hopefully it finds it's way out.\n",s(io,"MURAL","\nIt's a mosaic mural made out of many different colors of glass. I think it's supposed to be some type of abstract piece, because I can't make out what it's supposed to be. It looks pretty though. I think.\n",s(io,"CENTRAL_GUARD_OFFICE_ENTRANCE","\nI really dodged a bullet there, I have no desire to go back.\n",s(io,"coffee_ruined",'\nI toss a quarter in the cup.\n---\n*SPLASH*\n\n"Hey, what the fuck, asshole? That was my coffee!"\n\n"Oh, I\'m sorry! I thought-"\n---\n"Just fuck off, will ya?"\n---\n...\n---\n"Um... could I have my quarter back?"\n---\nHe just scowls.  Guess not.\n',s(io,"SLEEPING_MAN","\n{SLEEPING_MAN.coffee_ruined?  At least he didn't ask me to get him another coffee.\n|\nHe's sitting on the ground with a shabby hat drawn over his face he's got a Styrofoam cup in front of him. Looks like he could use some {CHANGE.location=PLAYER.amount>0? [CHANGE](help_a_guy_out) | change}.\n}\n",s(io,"LIVING_STATUE","\nKind of cool... I bet they are really bored.\n",s(io,"OLD_LADIES",'\n{"...the state of this city has really gone down hill since-"\n\n"I agree, all the radio talks about anymore is the homeless crisis-"\n\n"And the crime rate."\n\n"Did you hear about that man that jumped off that bank building yesterday? Laid on the side walk for nearly an hour before-"\n|\n"-nothing new, Maggy was nearly run down on MacArthur Street last week on her way to the bridge game."\n\n"-probably a drunk driver.  I heard there\'s more of them these days than-"\n|\n"Go, go, go. That\'s all these people know how to do."\n\n"-can\'t live that way."\n\n"- won\'t last long."\n\n"When\'s our train getting here? It\'s always late."\n|\nThey\'re still chattering without a single pause. I bet a single second of silence would drive them mad.\n}\n',s(io,"TRASHED_NEWSPAPERS","\n{It's a pile of trashed newspapers by a bench. They look pretty gross.  Hey, what's that? There's something in there.\n---\n...\n---\nAHH!\nIT\"S A FUCKING RAT!\n|\nNO!\n------------------------------------------\nNEVER!\n|\nGAH!\n}\n",s(io,"MAINTENANCE_DOOR_IRIS_LAKE_TO_WEST_MULBERRY","\nIt's locked.\n",s(io,"GRAFFITI_IRIS_LAKE","\n{It covers one of the walls from floor to ceiling. This station looks severely unused, but how can the authorities just leave this here?\n|\nThese things are always so hard to read. Most of it illegible but I can make out the words \"Wild West\". I can't be sure though. If you're going to break the law, why not at least make what you're saying legible?\n}\n",s(io,"CONCERT_POSTER","\n{It's a poster for some kind of concert. Not sure what type of music it is, but telling from all the skulls, tigers, and half naked women colorfully scribbled in the margins I don't think I'd like it very much.\n|\nIt's a poster for a rock concert, or something. I'm not much for music.\n}\n",s(io,"check_coin_return","\nMaybe there's some change left in the coin return, let me check.\n---\n...\n---\nHey, a quarter!  Nice.\n",s(io,"VENDING_MACHINE","\nIt's an old snack machine. I don't recognize any of these brands. How long has it been since they changed these out? Ugh.\n",s(io,"FRANKS_FRANKS","\n{MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1>1?\nI may have helped one get a job, but I still don't like hot dogs.\n|\nI'm not really a hot dog guy.}\n",s(io,"BUSINESS_MAN","\nHe looks busy.\n",s(io,"inspectPasses","\nI have a Red Line Pass{ORANGE_LINE_PASS.location=PLAYER? and an Orange Line Pass}.\n\n{It gets me anywhere on the Red Line, but I really only use it to get to work and back home.|}\n\n{ORANGE_LINE_PASS.new?\nI got the Orange Line Pass from the security guard guy.  Now I can ride the Orange Line without getting caught.\n}\n",s(io,"PAYPHONE_SEVENTY_THIRD_STREET","\nIt's a payphone. Not much use for those things anymore with everyone having cellphones these days.\n",s(io,"BROOM_CLOSET","\nIt's just a broom closet. Plenty of toilet paper and cleaning products, but no briefcase.{ If I ever see that Mark guy again, I swear, I'll...  I won't do anything. I'll probably be squatting next to him in a week or so.|}\n",s(io,"SECURITY_DEPOT_SPRING_HILL_STATION","\nIt's closed. It's good to see where my tax dollars are going.\n",s(io,"MAINTENANCE_MAN","\nHe's still at it, fixing the... well, whatever it is he's fixing.\n",s(io,"MARCYS_PIZZA","\nI haven't eaten here before, but it looks popular.  It's packed, even this time of day.\n",s(io,"BUSTLING_CROWD",'\n{Wow, this station is crowded. Everyone seems to be rushing off to somewhere.|\n{?"Hey, watch it!" |\n"Excuse me. Pardon me."|\n"Make way, I\'ve got a train to catch."\n}}\n',s(io,"BROKEN_PAYPHONE","\n{Now that everyone's got cell phones, there's not much use for those things any more.  That's just as well, it's |Well, it used to be a payphone. Now it's } just a gutted payphone stand with stray wires poking out.\n",s(io,"MUSICIAN","\nHe's playing an old cracked violin with a hat out in front of him for spare change.\n\nHe has a sign: \"Blind, Homeless Veteran. Anything helps. God Bless.\"\n\nThe music sounds nice, but I wouldn't call that a real job.\n{PLAYER.call_boss>0?\n---\nThen again, he's got quite a lot of [change](musicians_change) in his hat.\n|}\n",s(io,"DOLLAR_BILL","\nA wrinkled dollar bill.\n",s(io,"CHANGE","\nI have {CHANGE.format_amount} in change.\n",s(io,"SODA","\nThis soda is probably really old and gross.\n",s(io,"SCHOOL_CHILDREN","\n{A few children play some kind of game on one of the benches. One kid stands tall on the bench laughing and jeering while the other children scamper around below, clawing and grabbing at him.\n---\nAn unspoken rule seems to keep them from just climbing on the bench and pushing him off. But after a few attempts, one of the kids manages to grab his arm and tugs hard, bringing the standing boy down on top of him. A scream, a crash, then laughter and the kids are picking themselves up and scurrying towards the bench again, fighting to see who gets to stand on the bench next.\n---|}\nChildren aren't supposed to be down here unsupervised. And that game looks dangerous. Where are their parents?\n",s(io,"WOMAN_IN_ODD_HAT",'\n{She\'s dressed very finely and has an air about her that seems to scream "High class." Her hat resembles some kind of bird or a very angry fern.\n---\n"Pardon me, Ma\'am. I--"\n\n"I haven\'t got any change."\n\n"No, I was actually--"\n\n"I haven\'t a clue of the time either. Please leave me alone."\n---\n"I just--"\n\n"Leave me be" she snorts as she turns her back to me.\n\nI guess that\'s that.\n|\nI\'m not going to try to talk to her again.\n}\n',s(io,"DRINKING_FOUNTAIN","\n{?\nNo.\n|\nNot in a million years.\n|\nI'll never be thirsty enough to risk drinking from that.\n|\nI can see a piece of chewed bubble gum stuck to the spout.\n}\n",s(io,"MISSIONARIES",'\n{\nOne of them tries to get my attention.\n\n"You look like you\'ve lost something important."\n---\n"Uh... yeah. How did you guess?"\n---\n"You look like all the others, so many people wandering around in this world, looking for themselves.  Well I can help you, I\'ve got this wonderful pamphlet that I\'d like to share with you..."\n---\n"Oh, sorry. I\'ve got to run. My, uh, my train is about to leave."\n---\n"Just take a pamphlet with you!"\n|\nI should have known. I fell right into that.\n}\n',s(io,"trashcan","\n{?I'm not about to rummage through the trash.\n|\nI've got a weird feeling about this can. Maybe it wouldn't hurt to take a quick look.\n---\n...\n---\nNothing but trash.\n|\nWaste of time.\n|\nWonder who takes out the garbage down here.\n|\nJust garbage.\n|\nThere's nothing but junk in here. Just as it should be.\n|\nNothing but trash in here.\n}\n\n---\n\n{*.missing_dog_poster.location=PLAYER?\nI'm lugging around these missing dog posters.  I don't want to go hang them all up, maybe I should just [throw them away](throw_away_posters) instead.\n}\n---\n{MASCOT_PAPERS.location=PLAYER?\nThis resume is a joke.  Even if I deliver it nobody's going to hire this guy.  Maybe I should do him a favor and just [toss it](throw_away_mascot_papers).\n}\n",s(io,"BULLETIN_BOARD","\n{Maybe somebody has posted about my missing briefcase.\n---\nNope, nothing.  Darn.|\nStill nothing about my briefcase, but if I'm ever in need of a house cleaner or want to join a lame garage band, I know where to look.}\n",s(io,"SOGGY_JACKET","\n{I don't really have time to look at every piece of discarded junk in the subway. My proposal is gone, my life is falling apart.  Maybe I should focus on that.|Gross.}\n",s(io,"outOfServiceStations","\nPLEASE NOTICE: Normal service disruption is in effect.\n\n{$.name} Station is temporarily out of service.  Please use alternative options.\n\nThank you and we apologize for the inconvenience.\n",s(io,"jumpTurnstileFail","{?I'm not the type to jump turnstiles.|I don't want to get caught.|Better to stick to the lines I have passes for.}",s(io,"SAFETY_WARNING_POSTER",'\n"ATTENTION: Pickpockets and thieves operate in this area. Report any suspicious behavior to your nearest Security Guard Station"\n{---\nThat\'s just great.  I wish people would just follow the rules.\n|}\n',s(io,"COFFEE","\n{PLAYER.day=1?  Carl's Coffee has been fueling me for years. Can't imagine surviving a Monday without it.}\n{PLAYER.day=2?  Mmm, that's good coffee.}\n{PLAYER.day=3?  I'm going to need a barrel of this if I'm going to get this proposal done by Friday. What is Mr. Harris thinking?  }\n{PLAYER.day=4?  It tastes bitter.}\n",s(io,"GRAFFITI_EAST_MULBERRY","That's just vulgar.  Why do people have to mess things up?",s(io,"ORANGE_LINE_PASS","I got this from the security guard guy.  Now I can ride the Orange Line without getting caught.",s(io,"RED_LINE_PASS","This gets me anywhere on the Red Line, but I really only use it to get to work and back home.",s(io,"notebookInstructions","\n{I have my notebook with me today to keep track of everything.\n\n(Click the notebook icon or press 'n' to toggle the notebook from now on)\n|}\n",s(io,"BRIEFCASE","My portable office, all my work is in it.",uo))))))))))))))))))))))))))))))))))))))))))))))))))))))),go=s(io,"man_in_hot_dog_suit_wants_more",'\n"Thanks, bud. You won\'t regret this!"\n',s(io,"hot_dog_man_rebuffed","\n{\"What did Frank say?  Did he say anything?  Did he turn me down?  Oh no, he turned me down, didn't he.  I'm a failure.  I'll never be a hot dog man.  Ohhhhhh.....\"\n|\nThe guy is still crying.  What a weenie.\n}\n{||Heh heh.  Weenie.}\n",s(io,"throw_away_mascot_papers","\nThere.  Who makes a resume to be a hot dog anyway?\n",s(io,"check_up_on_hot_dog_guy_at_franks_franks","\nWow, he got here fast.\n\nHe's already at it.  Looks like he's having the time of his life.  But everyone mostly ignores him.  At least he's happy.\n\nHe's coming over to talk to me.\n---\n\"Oh, man. I didn't think I'd get the chance to thank you! But... Thank you! You don't know how much you've just changed my life!\"\n\nHe hugs me tight.\n\n\"Uh, don't mention it. Please.\"\n---\n\"Oh, and here's a little tip someone gave me, it's all yours for the help you're doing me.\"\n\nHe drops 2 quarters in my hand and waves as he rushes back to his stand.  Is this what he meant by \"worth while?\"\n",s(io,"give_mascot_papers_to_frank",'\nThe stand is greasy looking and the man behind it even greasier.\n\n"Yo, wanna \'dog? Only a buck fifty."\n---\n"No thanks, but are you Frank? I... uh... hear you\'re looking for a hot dog guy."\n\n"Oh yeah? What experience you got?"\n\n"Oh!  No, not for me. It\'s for my... client. A real stand-up guy.  Here\'s his resume."\n---\nFrank looks it over and whistles.\n\n"Hey, this looks good.  You cant imagine the weirdos that try to get this sort of gig. I\'ll give him a ring."\n---\nWell, Steve, today you\'re going to make a weirdo very happy. Good on you.\n',s(io,"MASCOT_PAPERS","\nResume for the man in the hot dog suit.\n\nWow, he means business.\n",s(io,"meet_the_man_in_the_hot_dog_suit","\n{It's a man... in a grubby looking hot dog suit.\n\nI guess I've seen weirder things down in the subway.\n\nBut... it looks like he is... crying?\n---\n\"DON'T LOOK AT ME!\"\n\n\"I'm sorry.  Are you... are you alright?\"\n\nHe looks up at me and his face brightens up.  He pats the bench for me to join him, but the size of his suit makes it hard to sit. I think I'll just stand.\n---\n\"Listen, buddy. You ever feel like no matter how hard you try, the world manages to find new ways of bringing you right back down?\"\n---\n\"Well, actually--\"\n\n\"I know! Like take me for instance. I've been at this mascot game for years. I've done baseball games, sign flipping, children's pizza play houses. I've been around the rotisserie and back again. But this was my one chance. A chance for the big times.\"\n---\n\"Listen, I really don't have time for this. I've got my own problems right now.\"\n\n\"Hey just hear me out. I'll be brief.  I need to get a job at a hot dog stand, but I can't without a respectable reference to butter me up.  You look like a respectable sort.  Will you be my representation?\"\n---\nThat's my cue to slowly walk away...\n\nBut the guy jumps up and tosses his resume in my hands.\n\n\"Listen, stop by Frank's Franks on University Station.  Ask for Frank, drop off my papers, tell him I'm a swell guy.  Do this for me and I'll make it worth your while.\"\n---\nWhy does this keep happening to me? Am I a freak magnet or something?\n\n\"Thanks, bud. You won't regret this!\"\n|\n\"Hey, did you talk to Frank at Frank's Franks for me yet? I can't just sit around on my buns all day!\"\n}\n",s(io,"ratty_hat_man_advice_5","\n\"Hey you!  I've been on a wild goose chase all over this subway system following your nonsense advice.  Have you seen my briefcase or haven't you?\"\n---\n\"Briefcase?  I haven't heard of any briefcase.  You really shouldn't talk to strangers.  Now if you'll excuse me, I have to go.\"\n",s(io,"ratty_hat_man_advice_4",'\nOh no, not again.\n---\n"Brief case.  Thief\'s face.  Safe place.  Iris Lake."\n',s(io,"ratty_hat_man_advice_3",'\nThere he is again.\n\n"Proposal.  I\'ve got a proposal.  A proposal to make."\n\n"Ok, I\'ll bite."\n---\n"My friends, they know.  Samual, Walter and Mark.  Go to them.  Say hello."\n',s(io,"ratty_hat_man_advice_2","\nHey, it's that guy again.  Oh no, he saw me.  Now he's approaching me.\n---\n\"I have your case.\"\n---\n\"Wait, what?\"\n---\n\"Forty third.  That's where it's at.  That's where it's all at.\"\n\nAgain, he dashes away.\n",s(io,"ratty_hat_man_advice_1",'\nHe\'s staring at me from across the room and mumbling to himself.\n\nWait a minute, did he just say something about a briefcase?\n---\n"Excuse me, I thought I just heard you mention--"\n\nHe holds up his finger with the utmost importance.\n\n"Holds your things.  That\'s what you need.  A place to hold your things.  Where are your things?"\n\n"Um... my briefcase was stolen.  Do you know something?"\n---\n"Ah... briefcase!  Yes.  West Mulberry.  East.  No, West.  Mulberry.  Yes."\n\n"Are you saying you saw it at West Mulberry?"\n\n"West Mulberry.  West Mulberry."\n\nWith that he turns and scampers away.\n',s(io,"noMoreScreamingChild","\nThe kid has stopped screaming and the mother looks very relieved.  So am I.\n",s(io,"giveSodaToScreamingChild",'\nHere\'s your soda. I didn\'t know what flavor to get."\n\nWithout hesitation the child snatches the can from my hand and starts guzzling it down.\n\n"Thank you so much!  Nice to know there are still decent people around."\n',s(io,"getSodaForScreamingChild","\nI put 50 cents in and a soda comes out.  Hope it's the right flavor.\n",s(io,"keepBotheringMother",'\n{"Did you find any soda?"\n\n"Um... not yet."\n|"So are you going to get me a soda or not?"\n}\n',s(io,"offerToHelpScreamingChild",'\n"Hey, I could go get you a soda if you want..."\n---\n"Oh my God, yes, please!  Here, take some change to buy it.  Thank you!"\n',s(io,"offerYourSodaToScreamingChild",'\n"Say, I actually have a soda.  I didn\'t drink it yet.  Do you want it?"\n---\n"Gross!  I don\'t want your weird soda!  Get away from me!"\n',s(io,"offerYourSodaToScreamingChildFromSoda",'\n"Say, I actually have a soda.  I didn\'t drink it yet.  Do you want it?"\n---\n"Gross!  I don\'t want your weird soda!  Get away from me!"\n',s(io,"meetingScreamingChild","\nThe child is screaming his head off.  It's actually very annoying.  Even his mother looks like she can barely take any more of it.  She looks at me apologetically.\n---\n\"I'm sorry, he won't calm down.  He wants a soda, but I can't leave this spot because I'm waiting for someone.\"\n---\nThis situation seems bad for everyone.\n",uo)))))))))))))))))))),Io=o((function(n,e,t){for(;;){if("RBEmpty_elm_builtin"===t.$)return e;var o=t.e,r=n,a=s(n,t.b,t.c,s(Io,n,e,t.d));n=r,e=a,t=o}})),Ro=t((function(n,e){return s(Io,io,e,n)})),mo=s(st,Ro,uo,d([ho,go,lo,co,_o,Eo,fo])),To=t((function(n,e){n:for(;;){if("RBEmpty_elm_builtin"===e.$)return Ot;var t=e.c,o=e.d,r=e.e;switch(i(eo,n,e.b).$){case"LT":n=n,e=o;continue n;case"EQ":return Nt(t);default:n=n,e=r;continue n}}})),po=t((function(n,e){return"Just"===e.$?e.a:n})),No=function(n){return i(po,"ERROR: can't find content for key "+n,i(To,n,mo))},Oo=Mn,yo=Oo(c),So=function(n){return n},Ao=function(n){return{$:"State",a:n}},bo=Ao({lastInteractionId:"Start",lastMatchedRuleId:"Begin",searchText:""}),wo=t((function(n,e){return y({debugState:e.debug?Nt(bo):Ot,gameOver:!1,history:c,loaded:!1,noteBookPage:Ue,pendingChanges:Ot,persistKey:"",ruleMatchCounts:uo,scene:$e,showMap:!1,showNotebook:!1,showSelectScene:e.debug,showTranscript:!1,story:i(jt,"---",No("title_intro")),transcript:c,worldModel:n},e.debug?yo:Xt("autosave"))})),Lo=function(n){return{$:"ExistingSaves",a:n}},vo={$:"ListSaves"},ko=function(n){return{$:"LoadScene",a:n}},Do={$:"Loaded"},Co=function(n){return{$:"Persist",a:n}},Mo={$:"Continue"},Ho=function(n){return{$:"Interact",a:n}},Po={$:"NoOp"},Yo={$:"Splash"},Fo={$:"ToggleMap"},Go={$:"ToggleNotebook"},Bo=function(n){return!n},Uo=function(n){return!n.b},$o=t((function(n,e){var t="Title"===n.scene.$;if(!n.loaded||n.showSelectScene)return Po;switch(e){case" ":return t?Ho("next_day"):n.showMap?Fo:n.showNotebook?Go:I(n.scene,Yo)?Mo:Uo(n.story)?Po:Mo;case"m":return Fo;case"n":return Go;default:return Po}})),Wo=en,xo=xn("keyPress",Wo),jo=nn,Ko=xn("loaded",jo),Vo=xn("persistListChanged",{$:5,c:O}),qo=rn,Jo=on,zo=function(n){return{$:3,b:n}},Zo=function(n){return{$:0,a:n}},Xo=xn("persistListRes",i(qo,(function(n){return i(qo,(function(e){return Zo(y(n,e))}),i(Jo,1,zo(Wo)))}),i(Jo,0,Wo))),Qo=xn("persistLoadRes",zo(Wo)),nr=t((function(n){return n})),er=o((function(n,e,t){return n(e(t))})),tr=Mn,or=function(n){return{$:"Achievement",a:n}},rr={$:"Arriving"},ar={$:"CentralGuardOffice"},ir={$:"Disembark"},sr={$:"DisembarkStory"},ur={$:"End"},lr={$:"InTransit"},cr={$:"Lobby"},hr={$:"Passageway"},_r={$:"SubwaySounds"},dr=function(n){return{$:"Title",a:n}},Er=function(n){return{$:"Train",a:n}},fr=t((function(n,e){return b(e,{status:n})})),gr=o((function(n,e,t){return e(n(t))})),Ir=t((function(n,e){return"Just"===e.$?n(e.a):Ot})),Rr=o((function(n,e,t){return i(Ir,i(gr,(function(n){return n.stats}),To(e)),i(To,n,t))})),mr=function(n){var e=s(Rr,"PLAYER","day",n);n:for(;"Just"===e.$;)switch(e.a){case 1:return"Monday morning";case 2:return"Tuesday morning";case 3:return"Wednesday morning";case 4:return"Thursday morning";case 5:return"Friday morning";default:break n}return"ERROR can't get PLAYER.day"},Tr={$:"Blue"},pr={$:"Green"},Nr={$:"Orange"},Or={$:"Purple"},yr={$:"Red"},Sr={$:"Yellow"},Ar=function(n){switch(n){case"RED_LINE":return Nt(yr);case"YELLOW_LINE":return Nt(Sr);case"GREEN_LINE":return Nt(pr);case"ORANGE_LINE":return Nt(Nr);case"BLUE_LINE":return Nt(Tr);case"PURPLE_LINE":return Nt(Or);default:return Ot}},br=t((function(n,e){return"Just"===i(To,n,e).$})),wr=o((function(n,e,t){return i(Ir,(function(n){return i(br,n,t)?Nt(n):Ot}),i(Ir,i(gr,(function(n){return n.links}),To(e)),i(To,n,t)))})),Lr=function(n){return i(Ir,Ar,s(wr,"PLAYER","line",n))},vr=function(n){return i(po,"ERROR getting the current location of player from worldmodel",s(wr,"PLAYER","location",n))},kr=Rn,Dr=Un("lowerMusicVolume",(function(){return kr})),Cr=function(n){return y(n,yo)},Mr=W,Hr=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$&&"RBNode_elm_builtin"===n.e.$){if("RBNode_elm_builtin"===n.e.d.$&&"Red"===n.e.d.a.$){var e=n.d,t=n.e,o=t.b,r=t.c,a=(h=t.d).d,i=h.e,s=t.e;return l(no,oo,h.b,h.c,l(no,Qt,n.b,n.c,l(no,oo,e.b,e.c,e.d,e.e),a),l(no,Qt,o,r,i,s))}var u=n.d,c=n.e,h=(o=c.b,r=c.c,c.d);return s=c.e,l(no,Qt,n.b,n.c,l(no,oo,u.b,u.c,u.d,u.e),l(no,oo,o,r,h,s))}return n},Pr=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$&&"RBNode_elm_builtin"===n.e.$){if("RBNode_elm_builtin"===n.d.d.$&&"Red"===n.d.d.a.$){var e=n.b,t=n.c,o=n.d,r=o.d,a=o.e,i=n.e,s=i.b,u=i.c,c=i.d,h=i.e;return l(no,oo,o.b,o.c,l(no,Qt,r.b,r.c,r.d,r.e),l(no,Qt,e,t,a,l(no,oo,s,u,c,h)))}var _=n.d,d=n.e;return s=d.b,u=d.c,c=d.d,h=d.e,l(no,Qt,e=n.b,t=n.c,l(no,oo,_.b,_.c,_.d,a=_.e),l(no,oo,s,u,c,h))}return n},Yr=e(7,Fe=function(n,e,t,o,r,a,i){if("RBNode_elm_builtin"===a.$&&"Red"===a.a.$)return l(no,t,a.b,a.c,a.d,l(no,oo,o,r,a.e,i));n:for(;;){if("RBNode_elm_builtin"===i.$&&"Black"===i.a.$){if("RBNode_elm_builtin"===i.d.$){if("Black"===i.d.a.$)return Pr(e);break n}return Pr(e)}break n}return e},(function(){return function(n){return function(e){return function(t){return function(o){return function(r){return function(a){return Fe(0,n,e,t,o,r,a)}}}}}}})),Fr=function(n){if("RBNode_elm_builtin"===n.$&&"RBNode_elm_builtin"===n.d.$){var e=n.a,t=n.b,o=n.c,r=n.d,a=r.d,i=n.e;if("Black"===r.a.$){if("RBNode_elm_builtin"===a.$&&"Red"===a.a.$)return l(no,e,t,o,Fr(r),i);var s=Hr(n);if("RBNode_elm_builtin"===s.$){var u=s.e;return l(ro,s.a,s.b,s.c,Fr(s.d),u)}return to}return l(no,e,t,o,Fr(r),i)}return to},Gr=t((function(n,e){if("RBEmpty_elm_builtin"===e.$)return to;var t,o,r,a,s,u,c,h,_=e.a,d=e.b,E=e.c,f=e.d,g=e.e;if(0>p(n,d)){if("RBNode_elm_builtin"===f.$&&"Black"===f.a.$){var I=f.d;if("RBNode_elm_builtin"===I.$&&"Red"===I.a.$)return l(no,_,d,E,i(Gr,n,f),g);var R=Hr(e);if("RBNode_elm_builtin"===R.$){var m=R.e;return l(ro,R.a,R.b,R.c,i(Gr,n,R.d),m)}return to}return l(no,_,d,E,i(Gr,n,f),g)}return i(Br,n,(o=n,r=e,a=_,s=d,u=E,c=f,h=g,7===(t=Yr).a?t.f(o,r,a,s,u,c,h):t(o)(r)(a)(s)(u)(c)(h)))})),Br=t((function(n,e){if("RBNode_elm_builtin"===e.$){var t=e.a,o=e.b,r=e.c,a=e.d,s=e.e;if(I(n,o)){var u=function(n){for(;;){if("RBNode_elm_builtin"!==n.$||"RBNode_elm_builtin"!==n.d.$)return n;n=n.d}}(s);return"RBNode_elm_builtin"===u.$?l(ro,t,u.b,u.c,a,Fr(s)):to}return l(ro,t,o,r,a,i(Gr,n,s))}return to})),Ur=t((function(n,e){var t=i(Gr,n,e);return"RBNode_elm_builtin"===t.$&&"Red"===t.a.$?l(no,Qt,t.b,t.c,t.d,t.e):t})),$r=o((function(n,e,t){var o=e(i(To,n,t));return"Just"===o.$?s(io,n,o.a,t):i(Ur,n,t)})),Wr=t((function(n,e){return"Just"===e.$?Nt(n(e.a)):Ot})),xr=t((function(n,e){return"Just"===e.$?St(e.a):yt(n)})),jr=t((function(n,e){return"Ok"===e.$?St(n(e.a)):yt(e.a)})),Kr=r((function(n,e,t,o){if(o.b){var r=o.a,a=o.b;if(a.b){var l=a.a,c=a.b;if(c.b){var h=c.a,_=c.b;if(_.b){var d=_.b;return i(n,r,i(n,l,i(n,h,i(n,_.a,t>500?s(st,n,e,ut(d)):u(Kr,n,e,t+1,d)))))}return i(n,r,i(n,l,i(n,h,e)))}return i(n,r,i(n,l,e))}return i(n,r,e)}return e})),Vr=o((function(n,e,t){return u(Kr,n,e,0,t)})),qr=t((function(n,e){return s(Vr,t((function(e,t){return n(e)?i(qe,e,t):t})),c,e)})),Jr=function(n){return""===n},zr=function(n){return n.trim()},Zr=t((function(n,e){return s(Vr,t((function(e,t){return i(qe,n(e),t)})),c,e)})),Xr=o((function(n,e,t){return{col:e,problem:t,row:n}})),Qr=function(n){return s(Xr,n.row,n.col,n.problem)},na=t((function(n,e){n:for(;;)switch(n.$){case"Empty":return e;case"AddRight":var t=n.b;n=n.a,e=i(qe,t,e);continue n;default:var o=n.b;n=n.a,e=i(na,o,e);continue n}})),ea=t((function(n,e){var t=(0,n.a)({col:1,context:c,indent:1,offset:0,row:1,src:e});return"Good"===t.$?St(t.b):yt(i(na,t.b,c))})),ta=t((function(n,e){var t=i(ea,n,e);return"Ok"===t.$?St(t.a):yt(i(Zr,Qr,t.a))})),oa=function(n){return n.length},ra=t((function(n,e){return{$:"Bad",a:n,b:e}})),aa=o((function(n,e,t){return{$:"Good",a:n,b:e,c:t}})),ia=function(n){return{$:"Parser",a:n}},sa=t((function(n,e){return{$:"AddRight",a:n,b:e}})),ua=r((function(n,e,t,o){return{col:e,contextStack:o,problem:t,row:n}})),la={$:"Empty"},ca=t((function(n,e){return i(sa,la,u(ua,n.row,n.col,e,n.context))})),ha=(Pe={$:"ExpectingEnd"},ia((function(n){return I(oa(n.src),n.offset)?s(aa,!1,O,n):i(ra,!1,i(ca,n,Pe))}))),_a=o((function(n,e,t){var o=e.a,r=t.a;return ia((function(e){var t=o(e);if("Bad"===t.$)return i(ra,t.a,h=t.b);var a=t.a,u=t.b,l=r(t.c);if("Bad"===l.$){var c=l.a,h=l.b;return i(ra,a||c,h)}c=l.a;var _=l.c;return s(aa,a||c,i(n,u,l.b),_)}))})),da=t((function(n,e){return s(_a,nr,n,e)})),Ea=o((function(n,e,t){for(;;){var o=i(it,32,n),r=o.a,a=o.b;if(0>p(It(r),32))return i(Rt,!0,{nodeList:e,nodeListSize:t,tail:r});n=a,e=i(qe,at(r),e),t+=1}})),fa=function(n){return n.b?s(Ea,n,c,0):rt},ga=4294967295>>>32-tt,Ia=k,Ra=o((function(n,e,t){for(;;){var o=i(Ia,ga&e>>>n,t);if("SubTree"!==o.$)return i(Ia,ga&e,o.a);n-=tt,e=e,t=o.a}})),ma=t((function(n,e){var t=e.a,o=e.b,r=e.c,a=e.d;return 0>n||p(n,t)>-1?Ot:p(n,function(n){return n>>>5<<5}(t))>-1?Nt(i(Ia,ga&n,a)):Nt(s(Ra,o,n,r))})),Ta=t((function(n,e){return 0>p(n,e)?n:e})),pa=t((function(n,e){for(;;){if(!e.b)return!1;var t=e.b;if(n(e.a))return!0;n=n,e=t}})),Na=t((function(n,e){return!i(pa,i(er,Bo,n),e)})),Oa=function(n){return{$:"Done",a:n}},ya=function(n){return{$:"Loop",a:n}},Sa=t((function(n,e){var t=e.a;return ia((function(e){var o=t(e);if("Bad"===o.$)return i(ra,o.a,c=o.b);var r=o.a,a=o.c,u=(0,n(o.b).a)(a);if("Bad"===u.$){var l=u.a,c=u.b;return i(ra,r||l,c)}return l=u.a,s(aa,r||l,u.b,u.c)}))})),Aa=function(n){var e=n.a;return ia((function(n){var t=e(n);return"Bad"===t.$?i(ra,!1,t.b):s(aa,!1,t.b,t.c)}))},ba=t((function(n,e){return{$:"Token",a:n,b:e}})),wa=function(n){return i(ba,n,{$:"Expecting",a:n})},La=zn,va=r((function(n,e,t,o){return i(sa,la,u(ua,n,e,t,o))})),ka=function(n){return function(n){var e=n.a,t=n.b;return ia((function(n){var o=l(La,e,n.offset,n.row,n.col,n.src),r=o.a,a=o.b,c=o.c;return I(r,-1)?i(ra,!1,u(va,a,c,t,n.context)):s(aa,0>p(n.offset,r),O,{col:c,context:n.context,indent:n.indent,offset:r,row:a,src:n.src})}))}(wa(n))},Da=J,Ca=t((function(n,e){var t=e.a;return ia((function(e){var o=t(e);if("Bad"===o.$)return i(ra,o.a,o.b);var r=o.b,a=o.c;return s(aa,o.a,i(n,s(Da,e.offset,a.offset,e.src),r),a)}))})),Ma=function(n){return i(Ca,nr,n)},Ha=t((function(n,e){return s(_a,Et,n,e)})),Pa=function(n){return ia((function(e){return(0,n(O).a)(e)}))},Ya=t((function(n,e){var t=e.a;return ia((function(e){var o=t(e);if("Good"===o.$){var r=o.c;return s(aa,o.a,n(o.b),r)}return i(ra,o.a,o.b)}))})),Fa=function(n){return"Loop"===n.$?{$:"Loop",a:n.a}:{$:"Done",a:n.a}},Ga=r((function(n,e,t,o){n:for(;;){var r=(0,t(e).a)(o);if("Good"===r.$){var a=r.a,u=r.b,l=r.c;if("Loop"===u.$){n=n||a,e=u.a,t=t,o=l;continue n}return s(aa,n||a,u.a,l)}return a=r.a,i(ra,n||a,r.b)}})),Ba=t((function(n,e){return ia((function(t){return u(Ga,!1,n,e,t)}))})),Ua=t((function(n,e){return i(Ba,n,(function(n){return i(Ya,Fa,e(n))}))})),$a=t((function(n,e){return{$:"Append",a:n,b:e}})),Wa=o((function(n,e,t){for(;;){if(!t.b)return i(ra,!1,e);var o=t.b,r=(0,t.a.a)(n);if("Good"===r.$)return r;var a,s=(a=r).b;if(a.a)return a;n=n,e=i($a,e,s),t=o}})),xa=function(n){return ia((function(e){return s(Wa,e,la,n)}))},ja=function(n){return e={$:"Problem",a:n},ia((function(n){return i(ra,!1,i(ca,n,e))}));var e},Ka=function(n){return ia((function(e){return s(aa,!1,n,e)}))},Va=qn,qa=function(n){var e=n.a,t=n.b,o=!Jr(e);return ia((function(n){var r=l(Va,e,n.offset,n.row,n.col,n.src),a=r.a,u=r.b,c=r.c;return I(a,-1)?i(ra,!1,i(ca,n,t)):s(aa,o,O,{col:c,context:n.context,indent:n.indent,offset:a,row:u,src:n.src})}))},Ja=qa,za=function(n){return Ja(i(ba,n,{$:"ExpectingSymbol",a:n}))},Za=t((function(n,e){return{$:"Seed",a:n,b:e}})),Xa=function(n){var e=n.b;return i(Za,1664525*n.a+e>>>0,e)},Qa=function(n){var e=n.a,t=277803737*(e^e>>>4+(e>>>28));return(t>>>22^t)>>>0},ni=t((function(n,e){return function(n){return{$:"Generator",a:n}}((function(t){var o=0>p(n,e)?y(n,e):y(e,n),r=o.a,a=o.b-r+1;if(a-1&a){var i=(-a>>>0)%a>>>0;return function(n){for(;;){var e=Qa(n),t=Xa(n);if(p(e,i)>=0)return y(e%a+r,t);n=t}}(t)}return y(((a-1&Qa(t))>>>0)+r,Xa(t))}))})),ei=t((function(n,e){return(0,n.a)(e)})),ti=t((function(n,e){return s(Io,o((function(e,t,o){return i(n,e,t)?s(io,e,t,o):o})),uo,e)})),oi=o((function(n,e,t){return"Nothing"===e.$?Ot:"Nothing"===t.$?Ot:Nt(i(n,e.a,t.a))})),ri=a((function(n,e,t,o,r){if("SpecificStat"===t.$){var a=t.a;return I(i(eo,i(po,0,i(To,n,r.stats)),a),e)}var u=t.a,l=t.b;return i(po,!1,i(Wr,ct(e),s(oi,eo,i(To,n,r.stats),i(Ir,i(gr,(function(n){return n.stats}),To(l)),i(To,u,o)))))})),ai=t((function(n,e){return i(br,n,e.a)})),ii=t((function(n,e){return i(ai,n,e.tags)})),si=o((function(n,e,t){return i(po,c,i(Wr,(function(o){return i(Na,(function(n){return s(li,n,t,o)}),e)?d([y(n,o)]):c}),i(To,n,t)))})),ui=r((function(n,e,o,r){if("SpecificLink"===e.$)return i(po,!1,i(Wr,t((function(n,e){if("Match"===n.$){var t=n.b;return I(n.a,e)&&!Uo(s(si,e,t,o))}return!Uo(s(si,e,t=n.a,o))}))(e.a),i(To,n,r.links)));var a=e.a,u=e.b;return i(po,!1,s(oi,ct,i(To,n,r.links),i(Ir,i(gr,(function(n){return n.links}),To(u)),i(To,a,o))))})),li=t((function(n,e){switch(n.$){case"HasTag":return ii(n.a);case"HasStat":return u(ri,n.a,n.b,n.c,e);case"HasLink":return s(ui,n.a,n.b,e);default:return i(er,Bo,i(li,n.a,e))}})),ci=t((function(n,e){return Je(i(ti,t((function(t,o){return i(Na,(function(n){return s(li,n,e,o)}),n)})),e))})),hi=t((function(n,e){return"Match"===n.$?s(si,n.a,n.b,e):i(ci,n.a,e)})),_i=t((function(n,e){return{$:"CompareLink",a:n,b:e}})),di=t((function(n,e){return{$:"CompareStat",a:n,b:e}})),Ei=t((function(n,e){return{$:"HasLink",a:n,b:e}})),fi=o((function(n,e,t){return{$:"HasStat",a:n,b:e,c:t}})),gi=t((function(n,e){return{$:"Match",a:n,b:e}})),Ii=function(n){return{$:"MatchAny",a:n}},Ri=function(n){return{$:"SpecificLink",a:n}},mi=t((function(n,e){var t=function(e){n:for(;;)switch(e.$){case"HasStat":if("CompareStat"===e.c.$&&"$"===e.c.a)return s(fi,e.a,e.b,i(di,n,e.c.b));break n;case"HasLink":if("SpecificLink"===e.b.$){if("Match"===e.b.a.$&&"$"===e.b.a.a)return i(Ei,e.a,Ri(i(gi,n,e.b.a.b)));break n}if("$"===e.b.a)return i(Ei,e.a,i(_i,n,e.b.b));break n;default:break n}return e};if("MatchAny"===e.$)return Ii(i(Zr,t,o=e.a));var o=e.b;return i(gi,function(e){return"$"===e?n:e}(e.a),i(Zr,t,o))})),Ti=function(n){return Jr(n)?ja("cannot be empty"):Ka(n)},pi=t((function(n,e){return o=i(Zr,n,e),s(st,t((function(n,e){return"Ok"===n.$?i(jr,qe(n.a),e):yt(n.a)})),St(c),o);var o})),Ni={$:"Looping"},Oi={$:"Randomly"},yi={$:"Sticking"},Si=za("|"),Ai=za("}"),bi=za("{"),wi=t((function(n,e){return i(pa,(function(e){return I(e,n)}),e)})),Li=o((function(n,e,t){return i(xt,e,i(jt,n,t))})),vi=Jn,ki=a((function(n,e,t,o,r){for(;;){var a=s(vi,n,e,r.src);if(I(a,-1))return s(aa,0>p(r.offset,e),O,{col:o,context:r.context,indent:r.indent,offset:e,row:t,src:r.src});I(a,-2)?(n=n,e+=1,t+=1,o=1,r=r):(n=n,e=a,t=t,o+=1,r=r)}})),Di=function(n){return ia((function(e){return l(ki,n,e.offset,e.row,e.col,e)}))},Ci=Di,Mi=function(n){return function(n){var e=n.a,t=n.b,o=!Jr(e);return ia((function(n){var r=l(Va,e,n.offset,n.row,n.col,n.src),a=r.a,u=r.b,c=r.c;return I(a,-1)||s(vi,(function(n){return Pt(n)||I(n,A("_"))}),a,n.src)>=0?i(ra,!1,i(ca,n,t)):s(aa,o,O,{col:c,context:n.context,indent:n.indent,offset:a,row:u,src:n.src})}))}(i(ba,n,{$:"ExpectingKeyword",a:n}))},Hi=function(n){return"Ok"===n.$?Ka(n.a):ja(n.a)},Pi=i(Sa,Ti,Ma(i(da,Ka(O),Ci((function(n){return!i(wi,n,d([A("{"),A("}"),A("|")]))}))))),Yi=t((function(n,e){return"Ok"===e.$?St(e.a):yt(n(e.a))})),Fi=t((function(n,e){if(e.b){var o=e.b;return i(qe,e.a,s(Vr,t((function(e,t){return i(qe,n,i(qe,e,t))})),c,o))}return c})),Gi=function(n){return i(xt,"",i(Fi,"; ",i(Zr,(function(n){return function(n){switch(n.$){case"Expecting":return"expecting '"+n.a+"'";case"ExpectingInt":return"expecting int";case"ExpectingHex":return"expecting hex";case"ExpectingOctal":return"expecting octal";case"ExpectingBinary":return"expecting binary";case"ExpectingFloat":return"expecting float";case"ExpectingNumber":return"expecting number";case"ExpectingVariable":return"expecting variable";case"ExpectingSymbol":return"expecting symbol '"+n.a+"'";case"ExpectingKeyword":return"expecting keyword '"+n.a+"'";case"ExpectingEnd":return"expecting end";case"UnexpectedChar":return"unexpected char";case"Problem":return"problem "+n.a;default:return"bad repeat"}}(n.problem)+" at row "+Wt(n.row)+", col "+Wt(n.col)}),n)))},Bi=function(n){return qa(wa(n))},Ui=function(n){return{$:"HasTag",a:n}},$i=function(n){return{$:"Not",a:n}},Wi=function(n){return{$:"SpecificStat",a:n}},xi=t((function(n,e){return ia((function(t){var o=s(vi,n,t.offset,t.src);return I(o,-1)?i(ra,!1,i(ca,t,e)):I(o,-2)?s(aa,!0,O,{col:1,context:t.context,indent:t.indent,offset:t.offset+1,row:t.row+1,src:t.src}):s(aa,!0,O,{col:t.col+1,context:t.context,indent:t.indent,offset:o,row:t.row,src:t.src})}))})),ji=i(Sa,Ti,Ma(i(da,i(da,Ka(O),i(xi,Mt,{$:"UnexpectedChar"})),Ci((function(n){return Pt(n)||i(wi,n,d([A("_"),A("-"),A(":"),A("#"),A("+")]))}))))),Ki=(Ye=i(Sa,i(gr,(function(n){for(var e=0,t=n.charCodeAt(0),o=43==t||45==t?1:0,r=o;n.length>r;++r){var a=n.charCodeAt(r);if(48>a||a>57)return Ot;e=10*e+a-48}return r==o?Ot:Nt(45==t?-e:e)}),i(gr,Wr(Ka),po(ja("not an int")))),Ma(Ci(Ht))),xa(d([i(Ha,i(da,Ka((function(n){return-n})),za("-")),Ye),Ye]))),Vi=i(Sa,Ti,Ma(i(da,Ka(O),Ci((function(n){return Pt(n)||i(wi,n,d([A("_"),A(":"),A("#")]))}))))),qi=xa(d([i(Ya,nr(Ii),za("*")),i(Ya,nr(gi("$")),za("$")),i(Ya,gi,ji)]));function Ji(){return i(Ha,i(Ha,Ka(t((function(n,e){return n(e)}))),qi),zi())}function zi(){var n=r((function(n,e,t,o){return ya(i(qe,e?$i(o(t)):o(t),n))})),e=t((function(n,e){return i(Ha,i(Ha,i(da,i(da,Ka(e),Mi("("+n)),Ci(ct(A(" ")))),i(da,xa(d([i(Ya,nr("$"),Bi("$")),ji])),za("."))),i(da,Vi,za(")")))}));return i(Ua,c,(function(t){return xa(d([i(Ha,i(Ha,i(Ha,i(da,Ka(n(t)),za(".")),xa(d([i(Ya,nr(!0),za("!")),Ka(!1)]))),Vi),xa(d([i(Ha,i(da,Ka(So),za(">")),xa(d([i(e,"stat",o((function(n,e,t){return s(fi,t,je,i(di,n,e))}))),i(Ya,(function(n){return function(e){return s(fi,e,je,Wi(n))}}),Ki)]))),i(Ha,i(da,Ka(So),za("<")),xa(d([i(e,"stat",o((function(n,e,t){return s(fi,t,Ke,i(di,n,e))}))),i(Ya,(function(n){return function(e){return s(fi,e,Ke,Wi(n))}}),Ki)]))),i(Ha,i(da,Ka(So),za("=")),xa(d([i(Ya,(function(n){return function(e){return s(fi,e,xe,Wi(n))}}),Ki),i(Ya,(function(){return function(n){return i(Ei,n,Ri(i(gi,"$",c)))}}),za("$")),i(Ya,(function(n){return function(e){return i(Ei,e,Ri(i(gi,n,c)))}}),ji),i(e,"stat",o((function(n,e,t){return s(fi,t,xe,i(di,n,e))}))),i(e,"link",o((function(n,e,t){return i(Ei,t,i(_i,n,e))}))),i(Ha,i(da,Ka(So),za("(")),i(da,i(Ya,(function(n){return function(e){return i(Ei,e,Ri(n))}}),Ji()),za(")")))]))),Ka((function(n){return Ui(n)}))]))),Ka(Oa(t))]))}))}try{var Zi=Ji();Ji=function(){return Zi};var Xi=zi();zi=function(){return Xi}}catch(n){throw"Some top-level definitions from `NarrativeEngine.Syntax.RuleParser` are causing infinite recursion:\n\n  ┌─────┐\n  │    matcherParser\n  │     ↓\n  │    queriesParser\n  └─────┘\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.0/halting-problem to learn how to fix it!"}var Qi,ns=function(n){return i(Yi,Gi,i(ta,i(da,Zi,ha),n))},es=function(n){var e=xa(d([i(Ha,i(da,Ka(So),bi),xa(d([Aa(function(n){var e=function(e){return!Uo(i(hi,e,n.worldModel))};return i(Sa,(function(t){var o,r,a=t.a,u=t.b,l=t.c;return"Ok"===(o=i(jr,Na(i(gr,mi(n.trigger),e)),i(pi,ns,i(Zr,zr,i(jt,"&",a))))).$?(r=o.a?u:l,ia((function(n){return s(aa,!0,r,n)}))):ja(o.a)}),i(Ha,i(Ha,i(Ha,Ka(o((function(n,e,t){return S(n,e,t)}))),i(da,i(Sa,Ti,Ma(ka("?"))),za("?"))),Pa((function(){return es(n)}))),xa(d([i(Ha,i(da,Ka(So),Si),i(da,Pa((function(){return es(n)})),Ai)),i(Ya,nr(""),Ai)]))))}(n)),Aa(function(n){var e=i(Zr,(function(n){var e=n.a;return i(da,Ka(n.b),Mi(e))}),Je(n.propKeywords));return i(Sa,Hi,i(Ha,i(Ha,Ka(t((function(e,t){return t(s(Li,"$",n.trigger,e))}))),i(da,i(Sa,Ti,Ma(Ci((function(n){return!i(wi,n,d([A("{"),A("."),A("|"),A("}")]))})))),za("."))),i(da,xa(e),Ai)))}(n)),Aa(function(n){return i(Ha,i(Ha,Ka(t((function(e,t){switch(e.$){case"Randomly":return i(po,"ERROR finding correct cycling text",(o=i(Mr,Yt(t),i(ei,i(ni,0,200),(r=n.cycleIndex*oa(n.trigger),a=Xa(i(Za,0,1013904223)),Xa(i(Za,a.a+r>>>0,a.b)))).a),i(ma,o,fa(t))));case"Looping":return i(po,"ERROR finding correct cycling text",i(ma,i(Mr,Yt(t),n.cycleIndex),fa(t)));default:return i(po,"ERROR finding correct cycling text",i(ma,i(Ta,Yt(t)-1,n.cycleIndex),fa(t)))}var o,r,a}))),xa(d([i(Ya,nr(Ni),za("~")),i(Ya,nr(Oi),za("?")),Ka(yi)]))),i(Ua,c,(function(e){return xa(d([i(Ya,nr(ya(i(qe,"",e))),Si),i(Ya,nr(Oa(ut(i(qe,"",e)))),Ai),i(Ha,i(Ha,Ka(t((function(n,e){return e(n)}))),Pa((function(){return es(n)}))),xa(d([i(Ya,nr((function(n){return ya(i(qe,n,e))})),Si),i(Ya,nr((function(n){return Oa(ut(i(qe,n,e)))})),Ai)])))]))})))}(n))]))),Pi])),r=t((function(n,e){return ya(w(n,e))}));return i(Ha,Ka(So),i(Ua,"",(function(n){return xa(d([i(Ya,r(n),e),Ka(Oa(n))]))})))},ts=function(n){return i(da,es(n),ha)},os=t((function(n,e){var t=i(ta,ts(n),e);if("Ok"===t.$){var o=t.a;return i(qr,i(er,i(er,Bo,Jr),zr),i(jt,"---",o))}return d(["ERROR could not parse: "+e])})),rs=r((function(n,e,o,r){var a,u=function(n){return"$"===n?o:n},l=(a=d([y("name",i(gr,u,(function(e){return i(jr,(function(n){return n.name}),i(xr,"Unable to find entity for id: "+e,i(To,e,n.worldModel)))}))),y("description",i(gr,u,i(gr,No,St))),y("format_amount",i(gr,u,(function(e){return i(xr,"Error looking up 'amount' stat on "+e,i(Wr,(function(n){return"$"+Wt(n/100|0)+"."+((e=i(Mr,100,n))?Wt(e):"00");var e}),s(Rr,e,"amount",n.worldModel)))})))]),s(st,t((function(n,e){return s(io,n.a,n.b,e)})),uo,a)),c=s($r,e,(function(n){return Nt(i(po,1,i(Wr,dt(1),n)))}),n.ruleMatchCounts);return y(i(os,{cycleIndex:i(po,0,i(To,e,n.ruleMatchCounts)),propKeywords:l,trigger:o,worldModel:n.worldModel},r),c)})),as=Un("persistDeleteReq",Zt),is=Un("persistListReq",(function(){return kr})),ss=t((function(n,e){return gn(s(st,function(n){return t((function(e,t){return t.push(In(n(e))),t}))}(n),[],e))})),us=Un("persistSaveReq",(function(n){var e=n.b;return i(ss,So,d([Zt(n.a),ss(Zt)(e)]))})),ls=Un("playMusic",Zt),cs=Un("playSound",Zt),hs=Un("queueNextLoop",(function(){return kr})),_s=Un("restoreMusicVolume",(function(){return kr})),ds=Un("stopMusic",(function(){return kr})),Es=Un("stopSound",Zt),fs=t((function(n,e){return y(e.a,n(e.b))})),gs=t((function(n,e){var t=e.b;return i(fs,(function(n){return Oo(d([n,t]))}),n(e.a))})),Is=t((function(n,e){return{links:e.links,name:n.name,stats:e.stats,tags:e.tags}})),Rs=t((function(n,e){return y(n,{name:e})})),ms=d([i(Rs,"PLAYER.chapter=0.day=1.location=EAST_MULBERRY.destination=BROADWAY_STREET","Steve"),i(Rs,"BRIEFCASE.item.location=PLAYER","Briefcase"),i(Rs,"RED_LINE_PASS.pass.item.location=PLAYER.valid_on=RED_LINE","Red Line metro pass"),i(Rs,"ORANGE_LINE_PASS.pass.item.valid_on=ORANGE_LINE","Orange Line metro pass"),i(Rs,"CELL_PHONE.item.location=PLAYER.new","Cell phone"),i(Rs,"MAP.item.map.silent","Subway map"),i(Rs,"NOTEBOOK.item.new","I keep track of my daily plans in this."),i(Rs,"DOLLAR_BILL.item.location=offscreen","Dollar bill"),i(Rs,"CHANGE.item.location=offscreen.amount=0","Loose change"),i(Rs,"SODA.item.location=offscreen","Soda"),i(Rs,"CENTRAL_GUARD_OFFICE.location","Central Guard Office"),i(Rs,"LOBBY.location","Station Lobby"),i(Rs,"COFFEE.item.location=offscreen","Coffee"),i(Rs,"TRASH_DIGGER.character.location=offscreen","Man digging in the trash"),i(Rs,"SKATER_DUDE.character.location=offscreen","Skater dude"),i(Rs,"BENCH_BUM.character.location=offscreen","Guy sleeping on a bench"),i(Rs,"MISSING_DOG_POSTER_1.item.missing_dog_poster","Missing dog poster"),i(Rs,"MISSING_DOG_POSTER_2.item.missing_dog_poster","Missing dog poster"),i(Rs,"MISSING_DOG_POSTER_3.item.missing_dog_poster","Missing dog poster"),i(Rs,"MISSING_DOG_POSTER_4.item.missing_dog_poster","Missing dog poster"),i(Rs,"MISSING_DOG_POSTER_5.item.missing_dog_poster","Missing dog poster"),i(Rs,"COFFEE_CART.character.location=EAST_MULBERRY","Coffee cart"),i(Rs,"COMMUTER_1.character.location=EAST_MULBERRY","Woman in a maroon jacket"),i(Rs,"LOUD_PAYPHONE_LADY.character.location=EAST_MULBERRY","Loud woman on payphone"),i(Rs,"GRAFFITI_EAST_MULBERRY.item.location=EAST_MULBERRY","Graffiti on the wall"),i(Rs,"SODA_MACHINE.item.broken.location=EAST_MULBERRY","Soda vending machine"),i(Rs,"SOGGY_JACKET.item.location=WEST_MULBERRY","Soggy looking jacket"),i(Rs,"BULLETIN_BOARD.item.location=WEST_MULBERRY","Bulletin board"),i(Rs,"DRINKING_FOUNTAIN.item.location=WEST_MULBERRY","Rusty drinking fountain"),i(Rs,"OVERTURNED_TRASHCAN.item.location=WEST_MULBERRY","Overturned trashcan"),i(Rs,"CUSTODIAN.character.location=WEST_MULBERRY","Custodian"),i(Rs,"WOMAN_IN_ODD_HAT.character.location=CHURCH_STREET","A woman with an odd hat"),i(Rs,"SCHOOL_CHILDREN.character.location=CHURCH_STREET","A group of school children"),i(Rs,"MOTHER.character.screaming_child_quest=0.location=CHURCH_STREET","Mother and child"),i(Rs,"MISSIONARIES.character.location=CHURCH_STREET","Missionaries"),i(Rs,"SAFETY_WARNING_POSTER.item.location=TWIN_BROOKS","Safety message poster"),i(Rs,"MAP_POSTER.item.map.location=TWIN_BROOKS","Map on the wall"),i(Rs,"MAINTENANCE_MAN.character.location=TWIN_BROOKS","Maintenance man"),i(Rs,"MAN_IN_HOT_DOG_SUIT.character","Man in a hot dog suit"),i(Rs,"MASCOT_PAPERS.item","Mascot papers"),i(Rs,"NEWSPAPER_VENDING_MACHINE.item.location=TWIN_BROOKS","Newspaper vending machine"),i(Rs,"EXIT.item.location=BROADWAY_STREET","Exit"),i(Rs,"SECURITY_OFFICERS.character.location=BROADWAY_STREET","Security officers"),i(Rs,"ANGRY_CROWD.character.location=BROADWAY_STREET","A large crowd of people"),i(Rs,"GIRL_IN_YELLOW.character.location=BROADWAY_STREET","Girl in yellow dress"),i(Rs,"MUSICIAN.character.location=CONVENTION_CENTER","Man playing violin"),i(Rs,"MAN_IN_RATTY_HAT.character.location=CONVENTION_CENTER","Man in a ratty brown hat"),i(Rs,"BUSTLING_CROWD.character.location=CONVENTION_CENTER","Bustling crowds of people"),i(Rs,"MARCYS_PIZZA.item.fixed.location=CONVENTION_CENTER","Marcy's Pizza"),i(Rs,"SECURITY_DEPOT_SPRING_HILL_STATION.item.location=SPRING_HILL","Security Depot"),i(Rs,"MISSING_DOG_POSTER_0.item.missing_dog_poster.location=SPRING_HILL","Missing dog poster"),i(Rs,"TRASH_CAN_CAPITOL_HEIGHTS.item.trashcan.location=CAPITOL_HEIGHTS","Trash can"),i(Rs,"ODD_KEY.item","Odd key"),i(Rs,"SHIFTY_MAN.character.location=CAPITOL_HEIGHTS","Shifty looking man"),i(Rs,"MARK.character.location=CAPITOL_HEIGHTS","{PLAYER.find_briefcase>2?Mark|Guy with cardboard sign}"),i(Rs,"SPIKY_HAIR_GUY.character.location=CAPITOL_HEIGHTS","Guy with Spiky Hair"),i(Rs,"GREEN_SUIT_MAN.character.location=CAPITOL_HEIGHTS","Man in a fancy green suit"),i(Rs,"BROOM_CLOSET.item.location=SEVENTY_THIRD_STREET","Broom closet"),i(Rs,"DISTRESSED_WOMAN.character.location=SEVENTY_THIRD_STREET","Woman in a pink poncho"),i(Rs,"PAYPHONE_SEVENTY_THIRD_STREET.item.location=SEVENTY_THIRD_STREET","Payphone"),i(Rs,"TRASH_CAN_SEVENTY_THIRD_STREET.item.trashcan.location=SEVENTY_THIRD_STREET","Trash can"),i(Rs,"BUSINESS_MAN.character.location=SEVENTY_THIRD_STREET","Slick looking business man"),i(Rs,"ABANDONED_JACKET.item.location=SEVENTY_THIRD_STREET","Abandoned jacket"),i(Rs,"MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET.item.passage_to=FORTY_SECOND_STREET.location=SEVENTY_THIRD_STREET.hidden","Maintenance door"),i(Rs,"MAINTENANCE_DOOR_FORTY_SECOND_STREET_TO_SEVENTY_THIRD_STREET.item.passage_to=SEVENTY_THIRD_STREET.location=FORTY_SECOND_STREET","Maintenance door"),i(Rs,"GRIZZLED_REPAIRMAN.character.location=FORTY_SECOND_STREET","Grizzled repairman"),i(Rs,"ELECTRIC_PANEL.item.hidden.location=FORTY_SECOND_STREET","Electric panel"),i(Rs,"SECURITY_CAMERA_FORTY_SECOND_STREET.item.security_camera.location=FORTY_SECOND_STREET","Security camera"),i(Rs,"FRANKS_FRANKS.item.fixed.location=UNIVERSITY","Frank's Franks hot dog stand"),i(Rs,"SECRET_SERVICE_TYPE_GUY.character.location=UNIVERSITY","Man in sunglasses and suit"),i(Rs,"MAGAZINE_STAND.item.location=UNIVERSITY","Magazine stand"),i(Rs,"FAKE_COP.character.location=UNIVERSITY","Police officer"),i(Rs,"ADVERTISEMENT.item.location=UNIVERSITY","Advertisement poster"),i(Rs,"BROKEN_PAYPHONE.item.location=ST_MARKS","Broken payphone"),i(Rs,"CENTRAL_GUARD_OFFICE_ENTRANCE.item.location=ST_MARKS","Guard Station Entrance"),i(Rs,"MURAL.item.location=ST_MARKS","Mural"),i(Rs,"BIRD.item.location=ST_MARKS","A bird!"),i(Rs,"COMMUTERS_ST_MARKS.character.location=ST_MARKS","Commuters"),i(Rs,"TROPICAL_T_SHIRT_MAN.character.location=ST_MARKS","Man in a bright tropical T-shirt"),i(Rs,"VENDING_MACHINE.item.location=ONE_HUNDRED_FORTH_STREET","Snack machine"),i(Rs,"CONSTRUCTION_AREA.item.location=ONE_HUNDRED_FORTH_STREET","Roped off area"),i(Rs,"FLUORESCENT_LIGHTS.item.location=ONE_HUNDRED_FORTH_STREET","Flickering fluorescent lights"),i(Rs,"TRASH_CAN_ONE_HUNDRED_FOURTH_STREET.item.trashcan.location=ONE_HUNDRED_FORTH_STREET","Trash can"),i(Rs,"TICKET_INSPECTOR.character.location=CENTRAL_GUARD_OFFICE","Ticket inspector"),i(Rs,"INFRACTIONS_INSTRUCTIONS_POSTER.item",'"Infractions Instructions" poster'),i(Rs,"INFRACTIONS_COMPUTER.item","Computer"),i(Rs,"INFRACTIONS_PRINTER.item","Printer"),i(Rs,"INFRACTIONS_GREEN_BUTTON.item","Green button"),i(Rs,"INFRACTIONS_ROOM_DOOR.item","Solid door"),i(Rs,"INFRACTIONS_CARD_READER.item","Card reader"),i(Rs,"GRIZZLED_SECURITY_GUARD.character","Grizzled security guard"),i(Rs,"CONCERT_POSTER.item.location=IRIS_LAKE","Poster"),i(Rs,"GRAFFITI_IRIS_LAKE.item.location=IRIS_LAKE","Graffiti"),i(Rs,"MAINTENANCE_DOOR_IRIS_LAKE_TO_WEST_MULBERRY.item.passage_to=WEST_MULBERRY.location=IRIS_LAKE.locked","Maintenance door"),i(Rs,"TRASHED_NEWSPAPERS.item.location=IRIS_LAKE","Pile of crumpled newspapers "),i(Rs,"OLD_LADIES.character.location=NORWOOD","Old women in floral dresses"),i(Rs,"TRASH_CAN_NORWOOD.item.trashcan.location=NORWOOD","Trash can"),i(Rs,"LIVING_STATUE.character.location=NORWOOD","Living statue"),i(Rs,"SLEEPING_MAN.character.location=NORWOOD","Man sleeping on ground"),i(Rs,"ONE_HUNDRED_FORTH_STREET.station","104th Street"),i(Rs,"FORTY_SECOND_STREET.station","42nd Street"),i(Rs,"SEVENTY_THIRD_STREET.station","73rd Street"),i(Rs,"BROADWAY_STREET.station","Broadway Street"),i(Rs,"BURLINGTON.station","Burlington"),i(Rs,"CAPITOL_HEIGHTS.station","Capitol Heights"),i(Rs,"CHURCH_STREET.station","Church Street"),i(Rs,"CONVENTION_CENTER.station","Convention Center"),i(Rs,"EAST_MULBERRY.station","East Mulberry"),i(Rs,"FAIRVIEW.station","Fairview"),i(Rs,"HIGHLAND.station","Highland"),i(Rs,"IRIS_LAKE.station","Iris Lake"),i(Rs,"MACARTHURS_PARK.station","MacArthur's Park"),i(Rs,"MUSEUM.station","Museum"),i(Rs,"NORWOOD.station","Norwood"),i(Rs,"PARK_AVE.station","Park Street"),i(Rs,"RIVERSIDE.station","Riverside"),i(Rs,"SAMUAL_STREET.station","Samual Street"),i(Rs,"SPRING_HILL.station","Spring Hill"),i(Rs,"ST_MARKS.station","St. Mark's"),i(Rs,"TWIN_BROOKS.station","Twin Brooks"),i(Rs,"UNIVERSITY.station","University"),i(Rs,"WALTER_HILL.station","Walter Hill"),i(Rs,"WESTGATE.station","Westgate"),i(Rs,"WEST_MULBERRY.station","West Mulberry"),i(Rs,"RED_LINE.line","Red line"),i(Rs,"YELLOW_LINE.line","Yellow line"),i(Rs,"GREEN_LINE.line","Green line"),i(Rs,"ORANGE_LINE.line","Orange line"),i(Rs,"BLUE_LINE.line","Blue line"),i(Rs,"PURPLE_LINE.line","Purple line")]),Ts=Di((function(n){return I(n,A(" "))||I(n,A("\n"))||I(n,A("\r"))})),ps=function(n){return{$:"Set_elm_builtin",a:n}},Ns=t((function(n,e){return ps(s(io,n,O,e.a))})),Os=t((function(n,e){return b(e,{tags:i(Ns,n,e.tags)})})),ys=uo,Ss=uo,As=ps(uo),bs=As,ws=o((function(n,e,t){return b(t,{links:s(io,n,e,t.links)})})),Ls=o((function(n,e,t){return b(t,{stats:s(io,n,e,t.stats)})})),vs=(Qi=t((function(n,e){return e(n)})),i(Ua,{links:ys,stats:Ss,tags:bs},(function(n){return xa(d([i(Ha,i(Ha,i(da,i(da,Ka(Qi),Ts),za(".")),Vi),xa(d([i(Ha,i(da,Ka(So),za("=")),xa(d([i(Ya,(function(e){return function(t){return ya(s(ws,t,e,n))}}),ji),i(Ya,(function(e){return function(t){return ya(s(Ls,t,e,n))}}),Ki)]))),Ka((function(e){return ya(i(Os,e,n))}))]))),Ka(Oa(n))]))}))),ks=i(Ha,i(Ha,Ka(t((function(n,e){return y(n,e)}))),ji),i(da,vs,ha)),Ds=t((function(n,e){var t=e.a;return i(Yi,Gi,i(jr,fs(n(e.b)),i(ta,ks,t)))})),Cs=i(t((function(n,e){var o=t((function(n,e){return y("Entity def: "+n,e)}));return s(st,t((function(e,t){var r=e.a,a=i(Ds,n,e);if("Ok"===a.$){var s=a.a;return i(jr,i(io,s.a,s.b),t)}var u=a.a;if("Ok"===t.$)return yt(d([i(o,r,u)]));var l=t.a;return yt(i(qe,i(o,r,u),l))})),St(uo),e)})),Is,ms),Ms=C,Hs=t((function(n,e){return o=ns(t=n),i(hi,"Ok"===o.$?o.a:i(Ms,"ERROR parsing matcher:"+t+"\n"+o.a,i(gi,"PARSING_ERROR",c)),e);var t,o})),Ps=t((function(n,e){return!Uo(i(Hs,n,e))})),Ys=function(n){return{$:"NotFound",a:n}},Fs=function(n){return{$:"Perform",a:n}},Gs=mn,Bs=Gs(O),Us=pn,$s=t((function(n,e){return i(Us,(function(e){return Gs(n(e))}),e)})),Ws=o((function(n,e,t){return i(Us,(function(e){return i(Us,(function(t){return Gs(i(n,e,t))}),t)}),e)})),xs=Dn,js=t((function(n,e){var t=e.a;return function(n){return Tn((function(e){e(mn(yn(n)))}))}(i(Us,xs(n),t))}));vn.Task={b:Bs,c:o((function(n,e){return i($s,(function(){return O}),(t=i(Zr,js(n),e),s(Vr,Ws(qe),Gs(c),t)));var t})),d:o((function(){return Gs(O)})),e:t((function(n,e){return Fs(i($s,n,e.a))})),f:void 0};var Ks,Vs,qs,Js,zs,Zs,Xs,Qs,nu,eu,tu,ou,ru,au,iu,su,uu=Cn("Task"),lu=t((function(n,e){return uu(Fs(i($s,n,e)))})),cu=an,hu=function(n){switch(n.$){case"Normal":return 0;case"MayStopPropagation":return 1;case"MayPreventDefault":return 2;default:return 3}},_u=X,du=Z,Eu=ve("focus"),fu=T,gu=t((function(n,e){n:for(;;){if(n>0){if(e.b){n-=1,e=e.b;continue n}return e}return e}})),Iu=Ln,Ru=t((function(n,e){return"Ok"===e.$?e.a:n})),mu=Nn,Tu=t((function(n,e){return uu(Fs(i(mu,i(er,i(er,Gs,n),yt),i(Us,i(er,i(er,Gs,n),St),e))))})),pu=function(n){return n.b?Nt(n.a):Ot},Nu=g,Ou=function(n){return n.b},yu=o((function(n,e,t){return!Uo(i(hi,i(mi,n,t),e))})),Su=o((function(n,e,t){if("SpecificTrigger"===t.$)return I(e,t.a);if("Match"===t.a.$){var o=t.a;return I(o.a,e)&&!Uo(i(hi,o,n))}return!Uo(i(hi,i(gi,e,t.a.a),n))})),Au=function(n){var e=n.trigger,o=n.conditions,r=function(n){return Yt("Match"===n.$?n.b:n.a)},a="SpecificTrigger"===e.$?0:"Match"===e.a.$?100+r(e.a):0+r(e.a);return s(st,t((function(n,e){return"Match"===n.$?10+r(n)+e:0+r(n)+e})),0,o)+a},bu=o((function(n,e,o){return pu(ut(i(Nu,i(gr,Ou,Au),Je(i(ti,t((function(e,t){return s(Su,o,n,t.trigger)&&i(Na,i(yu,n,o),t.conditions)})),e)))))})),wu=o((function(n,e,t){return b(t,{stats:s(io,n,i(po,0,i(To,n,t.stats))-e,t.stats)})})),Lu=o((function(n,e,t){return b(t,{stats:s(io,n,i(po,0,i(To,n,t.stats))+e,t.stats)})})),vu=t((function(n,e){return ps(i(Ur,n,e.a))})),ku=t((function(n,e){return b(e,{tags:i(vu,n,e.tags)})})),Du=o((function(n,e,t){return s($r,n,Wr(e),t)})),Cu=o((function(n,e,r){var a=function(n){return"$"===n?e:n},u=o((function(n,e,t){switch(e.$){case"AddTag":return s(Du,n,Os(e.a),t);case"RemoveTag":return s(Du,n,ku(e.a),t);case"SetStat":return s(Du,n,i(Ls,o=e.a,e.b),t);case"IncStat":return s(Du,n,i(Lu,o=e.a,e.b),t);case"DecStat":return s(Du,n,i(wu,o=e.a,e.b),t);default:if("SpecificLinkTarget"===e.b.$)return s(Du,n,i(ws,o=e.a,a(u=e.b.a)),t);var o=e.a,r=e.b,u=r.a;return i(po,t,i(Wr,(function(e){return s(Du,n,i(ws,o,e),t)}),i(Ir,i(gr,(function(n){return n.links}),To(r.b)),i(To,a(u),t))))}})),l=function(n){return st(u(n))};return s(st,t((function(n,e){if("Update"===n.$){var o=n.b;return s(l,a(n.a),e,o)}var r=n.a;return o=n.b,s(st,t((function(n,e){return s(l,n.a,e,o)})),e,i(hi,Ii(r),e))})),r,n)})),Mu=t((function(n,e){return Ao(b(e.a,{lastInteractionId:n}))})),Hu=t((function(n,e){return Ao(b(e.a,{lastMatchedRuleId:n}))})),Pu=t((function(n,e){return Ao(b(e.a,{searchText:n}))})),Yu=t((function(n,e){var t=e.pendingChanges;if("Just"===t.$){var o=t.a,r=o.a,a=o.b;return i(gs,i(Gu,n,o.c),y(b(e,{pendingChanges:Ot,worldModel:s(Cu,a,r,e.worldModel)}),yo))}return y(e,yo)})),Fu=r((function(n,e,t,o){return o.showSelectScene||!o.loaded?s(Bu,n,t,o):y(o,i(lu,nr(t),Iu(e)))})),Gu=o((function(n,e,t){switch(e){case"notebookInstructions":return y(b(t,{showNotebook:!0}),yo);case"NOTEBOOK":return y(b(t,{showNotebook:!t.showNotebook}),yo);case"checkMap":return y(b(t,{showMap:!t.showMap}),yo);case"goToLobby":return y(b(t,{scene:cr}),yo);case"get_caffeinated_quest_2":return u(Fu,n,300,or("get_caffeinated_quest_achievement"),t);case"ratty_hat_man_advice_5":return u(Fu,n,300,or("fools_errand_achievement"),t);case"meetConductorFirstTime":return i(gs,s(Fu,n,300,or("transfer_station")),y(b(t,{scene:cr}),yo));case"jumpTurnstileFortySecondStreet":return i(gs,s(Fu,n,300,or("freedom")),y(b(t,{scene:ur}),yo));case"pourSodaOnInfractionsMachine":return u(Fu,n,300,or("f_the_system"),t);case"fallAsleep":return y(t,Es("music/song1/piano2"));case"briefcaseStolen":return y(t,ls("music/song2"));case"nextDay":return y(b(t,{scene:cr}),I(t.scene,dr("Monday morning"))?Oo(d([cs("sfx/subway_ambient_loop"),i(lu,nr(_r),Iu(8e3))])):yo);default:var o=e;return i(wi,o,d(["use_secret_passage_way","chaseThiefAgain"]))?i(gs,s(Fu,n,1600,ir),y(b(t,{scene:hr}),yo)):i(wi,o,d(["goToLineTurnstile","followSkaterDudeToOrangeLine"]))?y(b(t,{scene:(r=i(po,yr,Lr(t.worldModel)),{$:"Turnstile",a:r})}),yo):i(wi,o,d(["goToLinePlatform","jumpTurnstileWithSkaterDude","jumpTurnstileAfterTaklingToMark"]))?y(b(t,{scene:{$:"Platform",a:i(po,yr,Lr(t.worldModel))}}),yo):i(wi,o,d(["caughtOnOrangeLineHeadingTo73rd","caughtOnOrangeLineHeadingToOther"]))?y(b(t,{scene:ar}),yo):i(wi,o,d(["endMonday","endTuesday","endWednesday","endThursday"]))?y(b(t,{scene:dr(mr(t.worldModel))}),yo):y(t,yo)}var r})),Bu=o((function(n,e,o){if(o.gameOver)return Cr(o);switch(e.$){case"NoOp":return Cr(o);case"Persist":switch(e.a.$){case"ListSaves":return y(o,is(O));case"Load":var r=e.a.a;return y(b(o,{loaded:!1}),Oo(d([ds(O),Xt(r)])));case"Save":var a=e.a;return y(o,us(y(r=a.a,a.b)));case"Delete":return y(o,as(r=e.a.a));case"ExistingSaves":var l=e.a.a;return y(b(o,{noteBookPage:(g=l.b,{$:"SavedGames",a:g}),persistKey:l.a}),i(Tu,(function(){return Po}),Eu("persistKeyInput")));default:return y(b(o,{persistKey:e.a.a}),yo)}case"Loaded":return y(b(o,{loaded:!0}),cs("music/song1/piano2"));case"LoadScene":if(e.a.b){var h=e.a;return i(gs,(function(n){return y(b(n,{loaded:!0,scene:function(){var e=n.scene;switch(e.$){case"Train":case"Turnstile":case"Platform":return cr;default:return e}}(),showMap:!1,showNotebook:!1,showSelectScene:!1,story:"MainTitle"===n.scene.$?n.story:c}),Oo(d([cs("sfx/subway_ambient_loop"),i(lu,nr(_r),Iu(8e3))])))}),s(st,t((function(e,t){return i(gs,Yu(n),i(gs,i(Bu,n,Ho(e)),t))})),y(i(wo,i(Ru,uo,Cs),{debug:!I(o.debugState,Ot)}).a,yo),h))}return y(o,yo);case"Interact":var _=e.a;return i(gs,(function(e){var t=y(e.scene,e.story);return"Train"!==t.a.$||t.b.b?y(e,yo):u(Fu,n,3e3,Mo,e)}),i(gs,(function(n){return I(n.debugState,Ot)?y(n,yo):y(b(n,{transcript:w(n.transcript,i(qe,_,n.story))}),yo)}),i(gs,i(Uu,n,_),i(gs,(function(e){return"Nothing"===e.pendingChanges.$?y(e,yo):i(Yu,n,e)}),y(b(o,{history:w(o.history,d([_]))}),yo)))));case"ToggleNotebook":return y(i(Ps,"NOTEBOOK.!new",o.worldModel)?b(o,{showNotebook:!o.showNotebook}):o,yo);case"ToggleNotebookPage":return y(b(o,{noteBookPage:e.a}),yo);case"ToggleMap":return y(i(Ps,"MAP.location=PLAYER",o.worldModel)?b(o,{showMap:!o.showMap}):o,yo);case"ToggleTranscript":return y(b(o,{showTranscript:!o.showTranscript}),yo);case"BoardTrain":var E=e.a;return i(gs,s(Fu,n,2e3,Ho(e.b)),y(b(o,{scene:Er({line:E,status:lr})}),Oo(d([cs("sfx/subway_departure"),cs("sfx/subway_whistle"),Es("sfx/ambience_crowd_loop"),Dr(O),us(y("autosave",o.history))]))));case"Continue":return Yt(o.story)>1?y(b(o,{story:i(gu,1,o.story)}),yo):i(gs,(function(e){var t=e.scene;switch(t.$){case"Train":var o=t.a;return i(gs,s(Fu,n,500,{$:"StopSound",a:"sfx/subway_departure"}),i(gs,s(Fu,n,3e3,ir),y(b(e,{scene:Er(i(fr,rr,o))}),cs("sfx/subway_arrival2"))));case"MainTitle":return y(b(e,{scene:Yo}),Oo(d([cs("sfx/subway_departure"),i(lu,nr({$:"PlaySound",a:"sfx/subway_whistle"}),Iu(2e3))])));case"Splash":return y(b(e,{scene:dr(mr(e.worldModel))}),Es("sfx/subway_departure"));case"Title":return y(e,Es("sfx/subway_departure"));default:return y(e,yo)}}),i(gs,Yu(n),y(b(o,{story:c}),yo)));case"PlaySound":return y(o,cs(e.a));case"PlayMusic":return y(o,ls(e.a));case"StopSound":return y(o,Es(e.a));case"SubwaySounds":return y(o,Oo(d([cs("sfx/subway_arrival"),i(lu,nr(_r),Iu(37e3))])));case"Achievement":return y(b(o,{story:d([No(e.a)])}),yo);case"Disembark":var f=vr(o.worldModel);return i(gs,s(Fu,n,500,sr),y(b(o,{scene:cr}),Oo(d([_s(O),hs(O),i(wi,f,d(["BROADWAY_STREET","CONVENTION_CENTER","CAPITOL_HEIGHTS","UNIVERSITY","ST_MARKS"]))?cs("sfx/ambience_crowd_loop"):yo]))));case"DisembarkStory":return s(Uu,n,"disembark",o);default:return y(b(o,{debugState:i(Wr,Pu(e.a),o.debugState)}),yo)}var g})),Uu=o((function(n,e,t){var o=s(bu,e,n,t.worldModel);if("Nothing"===o.$){var r=i(Wr,i(gr,Hu("no matching rule"),Mu(e)),t.debugState),a=i(Ps,e+".silent",t.worldModel)?y(c,t.ruleMatchCounts):u(rs,t,e,e,No(e)),l=a.a,h=a.b;return i(gs,i(Gu,n,e),y(b(t,{debugState:r,ruleMatchCounts:h,story:l}),yo))}var _=o.a,d=_.a,E=_.b,f=(r=i(Wr,i(gr,Hu(d),Mu(e)),t.debugState),u(rs,t,d,e,No(d)));return h=f.b,i(gs,Uo(l=f.a)?Yu(n):Cr,y(b(t,{debugState:r,pendingChanges:Nt(S(e,E.changes,d)),ruleMatchCounts:h,story:l}),yo))})),$u=function(n){return{$:"DebugSeachWorldModel",a:n}},Wu=ee("div"),xu=ee("span"),ju=Qn,Ku=t((function(n,e){return i(ae,n,Zt(e))})),Vu=Ku("className"),qu=oe,Ju=t((function(n,e){return i(qu,n,{$:"Normal",a:e})})),zu=function(n){return i(Ju,"click",Zo(n))},Zu=function(n){return"Just"===n.$},Xu=ke({defaultHighlighting:Ot,githubFlavored:Nt({breaks:!1,tables:!1}),sanitize:!0,smartypants:!1}),Qu=i(Wu,d([Vu("Scene MainTitleScene")]),d([i(Wu,d([Vu("MainTitleContent")]),d([i(Xu,c,"![title](img/title.jpg)\n\nThe end of Part 1 - Thank you for playing!")]))])),nl=ee("img"),el=function(n){return i(Ku,"src",/^\s*(javascript:|data:text\/html)/i.test(e=n)?'javascript:alert("This is an XSS vector. Please use ports or web components instead.")':e);var e},tl={$:"Distractions"},ol=function(n){return{$:"PersistKeyUpdate",a:n}},rl=t((function(n,e){return{$:"Save",a:n,b:e}})),al=function(n){return{$:"ToggleNotebookPage",a:n}},il=d([S("GIRL_IN_YELLOW.who_was_girl_in_yellow_quest","Who was that girl in yellow?",d(["",""])),S("MOTHER.screaming_child_quest","Stop the kid from screaming.",d(["Find a soda for the kid",""])),S("DISTRESSED_WOMAN.missing_dog_posters_quest","Hang up the missing dog posters.",d(["","","","","",""])),S("MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1","Help the hot dog mascot work at Fort Frank",d(["","",""]))]),sl=d([S("PLAYER.present_proposal","Present proposal",d(["Get to work by 6:30am","Get to work by 6:45am","Get to work by 7:00am",""])),S("PLAYER.find_briefcase","Find stolen briefcase!",d(["Report it stolen?","Talk to Mark @ Spring Hill?","Broom closet @ 73rd",""])),S("PLAYER.call_boss","Call Mr. Harris",d(["",""]))]),ul=o((function(n,e,t){n:for(;;){if(n>0){if(e.b){var o=e.a;n-=1,e=e.b,t=i(qe,o,t);continue n}return t}return t}})),ll=t((function(n,e){return ut(s(ul,n,e,c))})),cl=o((function(n,e,t){if(e>0){var o=y(e,t);n:for(;;){e:for(;;){if(!o.b.b)return t;if(!o.b.b.b){if(1===o.a)break n;break e}switch(o.a){case 1:break n;case 2:var r=o.b;return d([r.a,r.b.a]);case 3:if(o.b.b.b.b){var a=o.b,u=a.b;return d([a.a,u.a,u.b.a])}break e;default:if(o.b.b.b.b&&o.b.b.b.b.b){var l=o.b,h=l.b,_=h.b,E=_.b,f=E.b;return i(qe,l.a,i(qe,h.a,i(qe,_.a,i(qe,E.a,n>1e3?i(ll,e-4,f):s(cl,n+1,e-4,f)))))}break e}}return t}return d([o.b.a])}return c})),hl=t((function(n,e){return s(cl,0,n,e)})),_l=ee("h3"),dl=ee("input"),El=ee("li"),fl=ee("p"),gl=ee("ul"),Il=function(n){return Vu(i(xt," ",i(Zr,ht,i(qr,Ou,n))))},Rl=Ku("id"),ml=Ku("value"),Tl=t((function(n,e){return i(qu,n,{$:"Custom",a:e})})),pl=function(n){return y(n,!0)},Nl=t((function(n,e){return i(qu,n,{$:"MayStopPropagation",a:e})})),Ol=tn,yl=t((function(n,e){return s(Vr,Ol,e,n)})),Sl=i(yl,d(["target","value"]),Wo),Al=function(n){return i(Nl,"input",i(cu,pl,i(cu,n,Sl)))},bl=i(Wu,d([Vu("Scene Splash")]),d([i(Wu,d([Vu("MainTitleContent")]),d([i(Xu,c,"![title](img/title.jpg)"),i(xu,d([Vu("StoryLine__continue"),zu(Mo)]),d([ju("Continue...")]))]))])),wl=t((function(n,e){return i(qu,n,{$:"MayPreventDefault",a:e})})),Ll=function(n){return te(function(n){return"script"==n?"p":n}(n))},vl=ee("h1"),kl=function(n){switch(n.$){case"Red":return{id:"RED_LINE",name:"Red Line",number:1,stations:d(["WEST_MULBERRY","EAST_MULBERRY","CHURCH_STREET","BROADWAY_STREET","CONVENTION_CENTER","SPRING_HILL","TWIN_BROOKS"])};case"Yellow":return{id:"YELLOW_LINE",name:"Yellow Line",number:2,stations:d(["RIVERSIDE","ST_MARKS","BROADWAY_STREET","CONVENTION_CENTER","CAPITOL_HEIGHTS","MACARTHURS_PARK"])};case"Green":return{id:"GREEN_LINE",name:"Green Line",number:3,stations:d(["BURLINGTON","SAMUAL_STREET","CAPITOL_HEIGHTS","CONVENTION_CENTER"])};case"Orange":return{id:"ORANGE_LINE",name:"Orange Line",number:4,stations:d(["IRIS_LAKE","NORWOOD","ST_MARKS","UNIVERSITY","SPRING_HILL","CAPITOL_HEIGHTS","SEVENTY_THIRD_STREET","ONE_HUNDRED_FORTH_STREET"])};case"Blue":return{id:"BLUE_LINE",name:"Blue Line",number:5,stations:d(["ONE_HUNDRED_FORTH_STREET","SEVENTY_THIRD_STREET","FORTY_SECOND_STREET","MUSEUM","BROADWAY_STREET","ST_MARKS","PARK_AVE","WESTGATE"])};default:return{id:"PURPLE_LINE",name:"Purple Line",number:6,stations:d(["HIGHLAND","FAIRVIEW","EAST_MULBERRY","CHURCH_STREET","MUSEUM","CONVENTION_CENTER","UNIVERSITY","WALTER_HILL"])}}},Dl=i(Zr,(function(n){return y(n,kl(n).stations)}),d([yr,pr,Sr,Nr,Tr,Or])),Cl=function(n){return n.toLowerCase()},Ml=function(n){var e=i(Hs,"*.item.location=PLAYER",n),o=d(["pass","missing_dog_poster"]),r=i(gr,i(Vr,t((function(e,r){var a,u,l=e.a,c=r.a,h=r.b;return u=(a=s(st,t((function(e,t){var o=t.a,r=t.b;return i(Ps,l+"."+e,n)?i(ai,e,r)?y(o&&!1,r):y(o&&!0,i(Ns,e,r)):y(o&&!0,r)})),y(!0,h),o)).b,y(a.a?i(qe,e,c):c,u)})),y(c,As)),ht);return i(Wu,d([Vu("Sign Sign--inventory")]),d([i(Wu,d([Vu("Inventory")]),i(Zr,(function(e){var r=e.a;return i(Wu,d([Il(d([y("Inventory__item",!0),y("Inventory__item--new",i(Ps,r+".new",n))])),zu(Ho(r))]),d([i(nl,d([el(function(e){return"img/icons/"+Cl(i(po,e,s(st,t((function(t,o){return I(o,Ot)&&i(Ps,e+"."+t,n)?Nt(t):o})),Ot,o)))+".svg"}(r))]),c)]))}),r(e)))]))},Hl=t((function(n,e){return s(st,t((function(n,t){var o=n.a;return i(wi,e,n.b)?i(qe,o,t):t})),c,n)})),Pl=o((function(n,e,t){var o=n(e);return"Just"===o.$?i(qe,o.a,t):t})),Yl=t((function(n,e){return s(Vr,Pl(n),c,e)})),Fl=t((function(n,e){var t=kl(e);return i(Wu,i(Yl,So,d([Nt(Vu("Connection "+t.id)),n?Nt(zu(Ho(t.id))):Ot])),d([ju(Wt(t.number))]))})),Gl=t((function(n,e){return i(Wu,d([Vu("Connections")]),i(Zr,Fl(!0),i(Nu,i(gr,kl,(function(n){return n.number})),i(Hl,n,e))))})),Bl=o((function(n,e,t){var o=i(po,"ERRORR getting station: "+t,i(Wr,(function(n){return n.name+" Station"}),i(To,t,e))),r=i(Hs,"*.item.!hidden.location="+t,e),a={cycleIndex:0,propKeywords:uo,trigger:"",worldModel:e},s=i(Hs,"*.character.!hidden.location="+t,e),u=i(Wu,d([Vu("Sign Sign--station")]),d([i(Wu,d([Vu("Sign__header1")]),d([ju(o)])),i(Wu,d([Vu("Sign__split")]),d([i(Wu,d([Vu("Sign__left")]),d([i(Gl,n,t)])),i(Wu,d([Vu("Sign__right")]),i(Zr,i(gr,fs((function(n){return n.name})),(function(n){var e=n.a,t=n.b;return i(Wu,d([Vu("Sign__item Sign__item--interactable"),zu(Ho(e))]),d([ju(i(po,t,pu(i(os,a,t))))]))})),w(s,r)))]))]));return i(Wu,d([Vu("Scene Lobby")]),d([i(Wu,d([Vu("Lobby__scene")]),d([u,Ml(e)]))]))})),Ul=i(Wu,d([Vu("Scene Passageway")]),c),$l=t((function(n,e){return{$:"BoardTrain",a:n,b:e}})),Wl=r((function(n,e,o,r){var a,u=s(wr,"PLAYER","destination",r),l=kl(o),h=i(Wu,d([Vu("Line_map__info")]),d([i(Fl,!1,o),ju(l.name)])),_=t((function(t,a){return i(Wu,d([Vu("Stop"),zu(I(a,e)?Po:function(n){return i(Ps,n+".out_of_service",r)}(a)?Ho(a):I(u,Ot)?i($l,o,a):I(u,Nt(a))?i($l,o,a):Ho(a))]),d([i(Wu,d([Vu("Stop__connections")]),i(Zr,Fl(!1),i(qr,fu(t),function(e){return i(Nu,i(gr,kl,(function(n){return n.number})),i(Hl,n,e))}(a)))),i(Wu,d([Il(d([y("Stop__dot",!0),y(kl(o).id,!0),y("Stop__dot--current",I(a,e))]))]),c),i(Wu,d([Il(d([y("Stop__name",!0),y("Stop__name--current",I(a,e))]))]),d([ju(function(n){return i(po,"ERRORR getting station: "+e,i(Wr,(function(n){return n.name+" Station"}),i(To,n,r)))}(a))]))]))}));return i(Wu,d([Vu("Scene Platform")]),d([(a=Ho("LOBBY"),i(Wu,d([Vu("Exit"),zu(a)]),d([i(Wu,d([Vu("Arrow")]),d([ju(" ")])),i(Wu,d([Vu("Exit__text")]),d([ju("Exit")]))]))),i(Wu,d([Vu("Line_map")]),d([h,i(Wu,d([Vu("Line_map__stops")]),w(d([i(Wu,d([Vu("Line_map__line "+l.id)]),c)]),i(Zr,_(o),l.stations)))]))]))})),xl=t((function(n,e){var t=kl(e),o=!Uo(i(Hs,"*.valid_on="+t.id+".location=PLAYER",n));return i(Wu,d([Vu("Scene Turnstile")]),d([i(Wu,d([Vu("Turnstile__dialog")]),d(o?[i(Wu,d([Vu("Turnstile__status")]),d([i(nl,d([Vu("Turnstile__icon"),el("img/icons/enter.svg")]),c),i(Wu,c,d([i(Wu,d([Vu("Turnstile__status_text")]),d([ju("Ticket valid")])),i(Wu,d([Vu("Turnstile__status_sub_text")]),d([ju("Please proceed")]))]))])),i(Wu,d([Vu("Turnstile__buttons")]),d([i(Wu,d([Vu("Turnstile__button"),zu(Ho(t.id))]),d([ju("Continue")]))]))]:[i(Wu,d([Vu("Turnstile__status")]),d([i(nl,d([Vu("Turnstile__icon"),el("img/icons/no_entry.svg")]),c),i(Wu,c,d([i(Wu,d([Vu("Turnstile__status_text")]),d([ju("Invalid ticket")])),i(Wu,d([Vu("Turnstile__status_sub_text")]),d([ju("Do not enter")]))]))])),i(Wu,d([Vu("Turnstile__buttons")]),d([i(Wu,d([Vu("Turnstile__button"),zu(Ho("LOBBY"))]),d([ju("Go back")])),i(Wu,d([Vu("Turnstile__button"),zu(Ho(t.id))]),d([ju("Jump turnstile")]))]))]))]))})),jl=(Ks=d(["LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","MAP_POSTER","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","SECURITY_OFFICERS","RED_LINE","SECURITY_OFFICERS","RED_LINE","RED_LINE","SPRING_HILL","LOBBY","SECURITY_DEPOT_SPRING_HILL_STATION","SKATER_DUDE","ORANGE_LINE","ORANGE_LINE","CAPITOL_HEIGHTS","MARK","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","TICKET_INSPECTOR","INFRACTIONS_GREEN_BUTTON","INFRACTIONS_ROOM_DOOR","GRIZZLED_SECURITY_GUARD","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","BROOM_CLOSET","PAYPHONE_SEVENTY_THIRD_STREET","ORANGE_LINE","ORANGE_LINE","SPRING_HILL","RED_LINE","RED_LINE","TWIN_BROOKS","MAN_IN_HOT_DOG_SUIT","RED_LINE","RED_LINE","SPRING_HILL","ORANGE_LINE","ORANGE_LINE","UNIVERSITY","FRANKS_FRANKS","MAN_IN_HOT_DOG_SUIT","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","PAYPHONE_SEVENTY_THIRD_STREET","MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET","confront_repairman","BLUE_LINE"]),Vs=function(n){return i(hl,n,Ks)},qs=d(["LOBBY","BRIEFCASE","CELL_PHONE","CELL_PHONE","RED_LINE_PASS","RED_LINE","RED_LINE","WEST_MULBERRY","CHURCH_STREET","WEST_MULBERRY","WEST_MULBERRY","LOBBY","COFFEE_CART","COFFEE","COFFEE","COFFEE_CART","LOUD_PAYPHONE_LADY","LOUD_PAYPHONE_LADY","SODA_MACHINE","SODA_MACHINE","COMMUTER_1","COMMUTER_1","COMMUTER_1","GRAFFITI_EAST_MULBERRY","GRAFFITI_EAST_MULBERRY","PURPLE_LINE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","COFFEE_CART","COFFEE","CELL_PHONE","GRAFFITI_EAST_MULBERRY","COFFEE_CART","TRASH_DIGGER","TRASH_DIGGER","SODA_MACHINE","PURPLE_LINE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","TWIN_BROOKS","BROADWAY_STREET","LOBBY","SKATER_DUDE","COFFEE_CART","COFFEE","SODA_MACHINE","CELL_PHONE","COFFEE","PURPLE_LINE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","CONVENTION_CENTER","BROADWAY_STREET","LOBBY","BENCH_BUM","BENCH_BUM","BENCH_BUM","BENCH_BUM","TRASH_DIGGER","COFFEE_CART","COFFEE_CART","COFFEE","COFFEE","GRAFFITI_EAST_MULBERRY","SODA_MACHINE","CELL_PHONE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","NOTEBOOK","NOTEBOOK","COFFEE_CART","COFFEE_CART","COFFEE_CART","COFFEE_CART","COFFEE_CART","SODA_MACHINE","GRAFFITI_EAST_MULBERRY","CELL_PHONE","SODA_MACHINE","SODA_MACHINE","SODA_MACHINE","BRIEFCASE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","BROADWAY_STREET","RED_LINE","RED_LINE","WEST_MULBERRY","LOBBY","NOTEBOOK","MAINTENANCE_MAN","MAINTENANCE_MAN","MAP_POSTER","MAP","MAP","MAP","RED_LINE_PASS","RED_LINE","RED_LINE","BROADWAY_STREET","YELLOW_LINE","YELLOW_LINE","RED_LINE","NOTEBOOK","EXIT","EXIT","COMMUTER_1","COMMUTER_1","GIRL_IN_YELLOW","NOTEBOOK","EXIT","ANGRY_CROWD","ANGRY_CROWD","EXIT","SECURITY_OFFICERS","SECURITY_OFFICERS","ANGRY_CROWD","COMMUTER_1","NOTEBOOK","CELL_PHONE","YELLOW_LINE","SECURITY_OFFICERS","MAP","SECURITY_OFFICERS","SECURITY_OFFICERS","MAP","YELLOW_LINE","YELLOW_LINE","LOBBY","BLUE_LINE","BLUE_LINE","LOBBY","RED_LINE","RED_LINE","WEST_MULBERRY","BULLETIN_BOARD","BULLETIN_BOARD","BULLETIN_BOARD","BULLETIN_BOARD","SOGGY_JACKET","SOGGY_JACKET","DRINKING_FOUNTAIN","CELL_PHONE","BULLETIN_BOARD","TRASH_CAN_WEST_MULBERRY","RED_LINE","RED_LINE","EAST_MULBERRY","COFFEE_CART","SODA_MACHINE","PURPLE_LINE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","CHURCH_STREET","MISSIONARIES","MISSIONARIES","SCHOOL_CHILDREN","SCHOOL_CHILDREN","WOMAN_IN_ODD_HAT","WOMAN_IN_ODD_HAT","MOTHER","NOTEBOOK","MOTHER","CHANGE","MOTHER","MOTHER","MOTHER","RED_LINE","RED_LINE","BROADWAY_STREET","CONVENTION_CENTER","BUSTLING_CROWD","MUSICIAN","MUSICIAN","musicians_change","CHANGE","MUSICIAN","MUSICIAN","MUSICIAN","musicians_change","CHANGE","MARCYS_PIZZA","MAN_IN_RATTY_HAT","NOTEBOOK","PURPLE_LINE","PURPLE_LINE","LOBBY","RED_LINE","RED_LINE","WEST_MULBERRY","BULLETIN_BOARD","RED_LINE","RED_LINE","EAST_MULBERRY","RED_LINE","RED_LINE","CHURCH_STREET","RED_LINE","RED_LINE","EAST_MULBERRY","SODA_MACHINE","SODA","SODA_MACHINE","RED_LINE","RED_LINE","TWIN_BROOKS","MAINTENANCE_MAN","MAP_POSTER","MAN_IN_RATTY_HAT","MAP_POSTER","RED_LINE","RED_LINE","EAST_MULBERRY","RED_LINE","RED_LINE","WEST_MULBERRY","RED_LINE","RED_LINE","SPRING_HILL","RED_LINE","RED_LINE","LOBBY","CUSTODIAN","CUSTODIAN","CUSTODIAN","CUSTODIAN","OVERTURNED_TRASHCAN","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_0","NEWSPAPER_VENDING_MACHINE","OVERTURNED_TRASHCAN","OVERTURNED_TRASHCAN","CUSTODIAN","NEWSPAPER_VENDING_MACHINE","SECURITY_DEPOT_SPRING_HILL_STATION","ORANGE_LINE","ORANGE_LINE","LOBBY","SODA","CHANGE","SKATER_DUDE","SKATER_DUDE","SKATER_DUDE","ORANGE_LINE","LOBBY","SKATER_DUDE","ORANGE_LINE","ORANGE_LINE","LOBBY","ORANGE_LINE","ORANGE_LINE","NORWOOD","CAPITOL_HEIGHTS","GREEN_SUIT_MAN","GREEN_SUIT_MAN","ORANGE_LINE","ORANGE_LINE","LOBBY","SHIFTY_MAN","SHIFTY_MAN","SHIFTY_MAN","GREEN_SUIT_MAN","TROPICAL_T_SHIRT_MAN","TROPICAL_T_SHIRT_MAN","TRASH_CAN_CAPITOL_HEIGHTS","ODD_KEY","ODD_KEY","SPIKY_HAIR_GUY","SPIKY_HAIR_GUY","SPIKY_HAIR_GUY","MARK","MARK","ORANGE_LINE","ORANGE_LINE","LOBBY","YELLOW_LINE","YELLOW_LINE","LOBBY","GREEN_LINE","GREEN_LINE","LOBBY","ORANGE_LINE","ORANGE_LINE","IRIS_LAKE","SODA","ODD_KEY","NOTEBOOK","MAP","CHANGE","TICKET_INSPECTOR","SODA","INFRACTIONS_INSTRUCTIONS_POSTER","INFRACTIONS_ROOM_DOOR","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_ROOM_DOOR","INFRACTIONS_PRINTER","INFRACTIONS_PRINTER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_INSTRUCTIONS_POSTER","INFRACTIONS_ROOM_DOOR","SODA","GRIZZLED_SECURITY_GUARD","RED_LINE_PASS","CHANGE","SODA","MURAL","MURAL","BIRD","BIRD","CENTRAL_GUARD_OFFICE_ENTRANCE","COMMUTERS_ST_MARKS","BROKEN_PAYPHONE","BLUE_LINE","BLUE_LINE","LOBBY","ORANGE_LINE","ORANGE_LINE","IRIS_LAKE","GIRL_IN_YELLOW","NOTEBOOK","NOTEBOOK","CONCERT_POSTER","MAINTENANCE_DOOR_IRIS_LAKE_TO_WEST_MULBERRY","ODD_KEY","MAINTENANCE_DOOR_IRIS_LAKE_TO_WEST_MULBERRY","GRAFFITI_IRIS_LAKE","TRASHED_NEWSPAPERS","TRASHED_NEWSPAPERS","TRASHED_NEWSPAPERS","TRASHED_NEWSPAPERS","TRASHED_NEWSPAPERS","TRASHED_NEWSPAPERS","ORANGE_LINE","ORANGE_LINE","NORWOOD","LIVING_STATUE","CHANGE","LIVING_STATUE","CHANGE","OLD_LADIES","OLD_LADIES","OLD_LADIES","OLD_LADIES","TRASH_CAN_NORWOOD","MAN_IN_RATTY_HAT","NOTEBOOK","SLEEPING_MAN","CHANGE","SLEEPING_MAN","help_a_guy_out","CHANGE","SLEEPING_MAN","SLEEPING_MAN","SLEEPING_MAN","ORANGE_LINE","ORANGE_LINE","ST_MARKS","ORANGE_LINE","ORANGE_LINE","UNIVERSITY","FAKE_COP","FAKE_COP","SODA","ADVERTISEMENT","ADVERTISEMENT","MAGAZINE_STAND","MAGAZINE_STAND","MAGAZINE_STAND","MAGAZINE_STAND","MAGAZINE_STAND","SECRET_SERVICE_TYPE_GUY","SECRET_SERVICE_TYPE_GUY","SECRET_SERVICE_TYPE_GUY","FRANKS_FRANKS","FRANKS_FRANKS","ORANGE_LINE","ORANGE_LINE","SPRING_HILL","NEWSPAPER_VENDING_MACHINE","ORANGE_LINE","ORANGE_LINE","CAPITOL_HEIGHTS","MARK","TRASH_CAN_CAPITOL_HEIGHTS","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","DISTRESSED_WOMAN","MISSING_DOG_POSTER_5","PAYPHONE_SEVENTY_THIRD_STREET","ABANDONED_JACKET","ABANDONED_JACKET","TRASH_CAN_SEVENTY_THIRD_STREET","BUSINESS_MAN","BUSINESS_MAN","BROOM_CLOSET","PAYPHONE_SEVENTY_THIRD_STREET","CHANGE","SODA","ABANDONED_JACKET","BUSINESS_MAN","NOTEBOOK","ORANGE_LINE","ORANGE_LINE","ONE_HUNDRED_FORTH_STREET","MAINTENANCE_MAN","MAINTENANCE_MAN","FLUORESCENT_LIGHTS","FLUORESCENT_LIGHTS","FLUORESCENT_LIGHTS","FLUORESCENT_LIGHTS","VENDING_MACHINE","CHANGE","CONSTRUCTION_AREA","TRASH_CAN_ONE_HUNDRED_FOURTH_STREET","ORANGE_LINE","ORANGE_LINE","SPRING_HILL","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_5","RED_LINE","RED_LINE","TWIN_BROOKS","MISSING_DOG_POSTER_5","MISSING_DOG_POSTER_4","MISSING_DOG_POSTER_5","SAFETY_WARNING_POSTER","MAN_IN_HOT_DOG_SUIT","MASCOT_PAPERS","MASCOT_PAPERS","MAN_IN_HOT_DOG_SUIT","MAN_IN_HOT_DOG_SUIT","RED_LINE","RED_LINE","CONVENTION_CENTER","MISSING_DOG_POSTER_4","MUSICIAN","MUSICIAN","musicians_change","CHANGE","MARCYS_PIZZA","YELLOW_LINE","YELLOW_LINE","LOBBY","RED_LINE","RED_LINE","BROADWAY_STREET","CHURCH_STREET","RED_LINE","RED_LINE","EAST_MULBERRY","MISSING_DOG_POSTER_3","COFFEE_CART","RED_LINE","RED_LINE","WEST_MULBERRY","BULLETIN_BOARD","TRASH_CAN_WEST_MULBERRY","throw_away_mascot_papers","MISSING_DOG_POSTER_2","MISSING_DOG_POSTER_1","RED_LINE","RED_LINE","CHURCH_STREET","SODA","MISSING_DOG_POSTER_1","RED_LINE","RED_LINE","SPRING_HILL","ORANGE_LINE","ORANGE_LINE","LOBBY","RED_LINE","RED_LINE","TWIN_BROOKS","MAN_IN_HOT_DOG_SUIT","MAN_IN_HOT_DOG_SUIT","MAN_IN_HOT_DOG_SUIT","MAN_IN_HOT_DOG_SUIT","RED_LINE","RED_LINE","SPRING_HILL","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","TRASH_CAN_SEVENTY_THIRD_STREET","BROOM_CLOSET","BROOM_CLOSET","BROOM_CLOSET","BROOM_CLOSET","ODD_KEY","SODA","PAYPHONE_SEVENTY_THIRD_STREET","CHANGE","PAYPHONE_SEVENTY_THIRD_STREET","MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET","MAINTENANCE_DOOR_FORTY_SECOND_STREET_TO_SEVENTY_THIRD_STREET","BLUE_LINE","BLUE_LINE","LOBBY","SECURITY_CAMERA_FORTY_SECOND_STREET","GRIZZLED_REPAIRMAN","confront_repairman","ELECTRIC_PANEL","BLUE_LINE","BLUE_LINE","just_do_it"]),Js=d(["ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","BROOM_CLOSET","PAYPHONE_SEVENTY_THIRD_STREET","DISTRESSED_WOMAN","MISSING_DOG_POSTER_5","BUSINESS_MAN","ORANGE_LINE","ORANGE_LINE","SPRING_HILL","MISSING_DOG_POSTER_0","MISSING_DOG_POSTER_5","RED_LINE","RED_LINE","CONVENTION_CENTER","MISSING_DOG_POSTER_5","MISSING_DOG_POSTER_4","MISSING_DOG_POSTER_5","RED_LINE","RED_LINE","BROADWAY_STREET","CHURCH_STREET","MISSING_DOG_POSTER_4","MISSING_DOG_POSTER_4","RED_LINE","RED_LINE","EAST_MULBERRY","MISSING_DOG_POSTER_3","RED_LINE","RED_LINE","WEST_MULBERRY","MISSING_DOG_POSTER_2","RED_LINE","RED_LINE","TWIN_BROOKS","MISSING_DOG_POSTER_1","MISSING_DOG_POSTER_1","MAN_IN_HOT_DOG_SUIT","MASCOT_PAPERS","MAN_IN_HOT_DOG_SUIT","RED_LINE","RED_LINE","SPRING_HILL","ORANGE_LINE","ORANGE_LINE","UNIVERSITY","FRANKS_FRANKS","FRANKS_FRANKS","MAN_IN_HOT_DOG_SUIT","CHANGE","MAN_IN_HOT_DOG_SUIT","ORANGE_LINE","ORANGE_LINE","ST_MARKS","BROKEN_PAYPHONE","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","PAYPHONE_SEVENTY_THIRD_STREET","MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET","MAINTENANCE_DOOR_FORTY_SECOND_STREET_TO_SEVENTY_THIRD_STREET","BLUE_LINE","BLUE_LINE","LOBBY","SECURITY_CAMERA_FORTY_SECOND_STREET","GRIZZLED_REPAIRMAN","confront_repairman","ELECTRIC_PANEL","BLUE_LINE"]),zs=w(d(["LOBBY","BRIEFCASE","RED_LINE_PASS","RED_LINE_PASS","RED_LINE","CELL_PHONE","CELL_PHONE","CELL_PHONE","COFFEE_CART","COFFEE","COFFEE_CART","COMMUTER_1","COMMUTER_1","LOUD_PAYPHONE_LADY","COFFEE_CART","LOUD_PAYPHONE_LADY","GRAFFITI_EAST_MULBERRY","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","RED_LINE_PASS","COFFEE_CART","COFFEE_CART","TRASH_DIGGER","TRASH_DIGGER","GRAFFITI_EAST_MULBERRY","COFFEE","CELL_PHONE","CELL_PHONE","RED_LINE","RED_LINE","CONVENTION_CENTER","BROADWAY_STREET","LOBBY","RED_LINE","SKATER_DUDE","COFFEE_CART","COFFEE_CART","COFFEE","CELL_PHONE","CELL_PHONE","COFFEE","RED_LINE","RED_LINE","BROADWAY_STREET","LOBBY","CELL_PHONE","COFFEE_CART","COFFEE_CART","COFFEE_CART","COFFEE","RED_LINE","RED_LINE","CHURCH_STREET","BROADWAY_STREET","LOBBY","CELL_PHONE","COFFEE_CART","RED_LINE","RED_LINE","LOBBY","RED_LINE","RED_LINE","BROADWAY_STREET","MAP_POSTER","MAP","SAFETY_WARNING_POSTER","CONVENTION_CENTER","BROADWAY_STREET","LOBBY","EXIT","ANGRY_CROWD","YELLOW_LINE","RED_LINE","COMMUTER_1","COMMUTER_1","GIRL_IN_YELLOW","NOTEBOOK","SECURITY_OFFICERS","RED_LINE","ANGRY_CROWD","COMMUTER_1","SECURITY_OFFICERS","RED_LINE","RED_LINE","SPRING_HILL","LOBBY","SECURITY_DEPOT_SPRING_HILL_STATION","RED_LINE","RED_LINE","CHURCH_STREET","MOTHER","MOTHER","RED_LINE","RED_LINE","EAST_MULBERRY","SODA_MACHINE","RED_LINE","RED_LINE","CHURCH_STREET","MOTHER","RED_LINE","RED_LINE","SPRING_HILL","SECURITY_DEPOT_SPRING_HILL_STATION","SKATER_DUDE","SKATER_DUDE","RED_LINE","ORANGE_LINE","ORANGE_LINE","UNIVERSITY","ST_MARKS","CAPITOL_HEIGHTS","GREEN_SUIT_MAN","SHIFTY_MAN","TRASH_CAN_CAPITOL_HEIGHTS","ODD_KEY","SPIKY_HAIR_GUY","MARK","MARK","YELLOW_LINE","YELLOW_LINE","LOBBY","ORANGE_LINE","ORANGE_LINE","SEVENTY_THIRD_STREET","TICKET_INSPECTOR","INFRACTIONS_INSTRUCTIONS_POSTER","INFRACTIONS_ROOM_DOOR","INFRACTIONS_PRINTER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_CARD_READER","INFRACTIONS_PRINTER","INFRACTIONS_COMPUTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_PRINTER","INFRACTIONS_CARD_READER","INFRACTIONS_COMPUTER","INFRACTIONS_PRINTER","INFRACTIONS_ROOM_DOOR","GRIZZLED_SECURITY_GUARD","RED_LINE_PASS"]),Js),Zs=d([y("(Full playthrough)",qs),y("(Interact with everything)",zs),y("End",Vs(79)),y("Call boss",Vs(75)),y("Empty broom closet",Vs(55)),y("Recieved orange line pass",Vs(51)),y("Caught",Vs(47)),y("Orange line",Vs(43)),y("Run into skater dude again",Vs(39)),y("Briefcase stolen",Vs(33)),y("Arrive at Twin Brooks",Vs(26)),y("Friday",Vs(20)),y("Thursday",Vs(15)),y("Wednesday",Vs(10)),y("Tuesday",Vs(5)),y("Beginning",c)]),i(Wu,d([Vu("SelectScene")]),d([i(vl,c,d([ju("Select a scene to jump to:")])),i(gl,c,i(Zr,(function(n){var e=n.a;return i(El,d([zu(ko(n.b))]),d([ju(e)]))}),Zs))]))),Kl={$:"ToggleTranscript"},Vl=ee("textarea"),ql=gn,Jl=t((function(n,e){return i(ae,n,ql(e))}))("readOnly"),zl=re,Zl=ee("progress"),Xl=Ku("placeholder"),Ql=o((function(n,e,o){var r=o.a.lastInteractionId,a=o.a.lastMatchedRuleId,s=o.a.searchText,u=t((function(n,e){return i(du,Cl(n),Cl(e))})),l=i(Zr,(function(n){var e=n.a,t=n.b.tags,o=n.b.stats,r=n.b.links;return i(xt,".",i(qr,i(er,Bo,Jr),i(Zr,xt("."),d([d([e]),ze(t),i(Zr,(function(n){return i(xt,"=",d([n.a,Wt(n.b)]))}),Je(o)),i(Zr,(function(n){return i(xt,"=",d([n.a,n.b]))}),Je(r))]))))}),Je(e)),h=Jr(s)?c:i(Nu,(function(n){return i(_u,Cl(s),Cl(n))?-1:0}),i(qr,u(s),l));return i(Wu,d([i(zl,"color","yellow"),i(zl,"font-family","Courier"),i(zl,"background","black"),i(zl,"opacity","0.9"),i(zl,"lineHeight","1.5em")]),d([ju("Debug mode"),i(dl,d([Al(n),ml(s),Xl("Search world model"),i(zl,"margin","0 10px")]),c),i(xu,c,d([ju("Last triggered rule: "+r+" - "+a)])),i(gl,d([i(zl,"borderTop","1px solid #333")]),i(Zr,(function(n){return i(El,c,d([ju(n)]))}),h))]))})),nc=(Xs=mo,Qs={cycleIndex:0,propKeywords:uo,trigger:"",worldModel:uo},nu=o((function(n,e,t){return y("Narrative content: "+n+"\n"+e+" ",Gi(t))})),s(Io,o((function(n,e,t){var o=i(ta,ts(Qs),e);if("Ok"===o.$)return t;var r=o.a;if("Ok"===t.$)return yt(d([s(nu,n,e,r)]));var a=t.a;return yt(i(qe,s(nu,n,e,r),a))})),St(O),Xs)),ec=o((function(n,e,t){return s(io,n,y(e,{}),t)})),tc=s(ec,"meetConductorFirstTime","\n            ON: GRIZZLED_SECURITY_GUARD\n            DO: ORANGE_LINE_PASS.location=PLAYER\n                (*.pass).new\n                PLAYER.chapter=2\n                MAN_IN_HOT_DOG_SUIT.location=TWIN_BROOKS\n                MAINTENANCE_MAN.location=ONE_HUNDRED_FORTH_STREET\n            ",s(ec,"escapingInfractionRoom","\n            ON: INFRACTIONS_ROOM_DOOR.infraction_step=3\n            DO: INFRACTIONS_INSTRUCTIONS_POSTER.location=offscreen\n                INFRACTIONS_COMPUTER.location=offscreen\n                INFRACTIONS_PRINTER.location=offscreen\n                INFRACTIONS_ROOM_DOOR.location=offscreen\n                INFRACTIONS_CARD_READER.location=offscreen\n                GRIZZLED_SECURITY_GUARD.location=CENTRAL_GUARD_OFFICE\n            ",s(ec,"breakInfractionAutomationSystem","\n            ON: INFRACTIONS_GREEN_BUTTON\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=3\n                INFRACTIONS_GREEN_BUTTON.pressed\n            ",s(ec,"infractionAutomationStep3","\n            ON: INFRACTIONS_PRINTER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step>1\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=3\n            ",s(ec,"infractionAutomationStep2","\n            ON: INFRACTIONS_COMPUTER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step=1\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=2\n            ",s(ec,"infractionAutomationStep1","\n            ON: INFRACTIONS_CARD_READER\n            IF: INFRACTIONS_ROOM_DOOR.infraction_step=0\n            DO: INFRACTIONS_ROOM_DOOR.infraction_step=1\n            ",s(ec,"pourSodaOnInfractionsMachine","\n            ON: SODA\n            IF: INFRACTIONS_INSTRUCTIONS_POSTER.read\n                PLAYER.chapter=1\n            DO: SODA.location=offscreen\n                INFRACTIONS_ROOM_DOOR.infraction_step=3\n                PLAYER.good_will-10\n            ",s(ec,"readingInfrationsPoster","\n            ON: INFRACTIONS_INSTRUCTIONS_POSTER\n            DO: INFRACTIONS_INSTRUCTIONS_POSTER.read\n            ",s(ec,"TICKET_INSPECTOR","\n            ON: TICKET_INSPECTOR\n            DO: INFRACTIONS_INSTRUCTIONS_POSTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_COMPUTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_PRINTER.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_ROOM_DOOR.location=CENTRAL_GUARD_OFFICE\n                INFRACTIONS_CARD_READER.location=CENTRAL_GUARD_OFFICE\n                $.location=offscreen\n            ",s(ec,"caughtOnOrangeLineHeadingToOther","\n            ON: *.station\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3\n            DO: PLAYER.location=ST_MARKS\n            ",s(ec,"caughtOnOrangeLineHeadingTo73rd","\n            ON: SEVENTY_THIRD_STREET\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3\n            DO: PLAYER.location=ST_MARKS\n            ",s(ec,"jumpTurnstileAfterTaklingToMark","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=CAPITOL_HEIGHTS.find_briefcase=3.at_turnstile\n            DO: PLAYER.line=ORANGE_LINE.-at_turnstile\n            ",s(ec,"pleasantriesWithMark","\n            ON: MARK\n            IF: PLAYER.find_briefcase>2\n            ",s(ec,"markTellsAboutBroomCloset","\n            ON: MARK\n            IF: PLAYER.find_briefcase=2\n            DO: PLAYER.find_briefcase=3\n            ",s(ec,"findKeyInTrashCan","\n            ON: TRASH_CAN_CAPITOL_HEIGHTS.!empty\n            DO: ODD_KEY.location=PLAYER\n                TRASH_CAN_CAPITOL_HEIGHTS.empty\n            ",s(ec,"followSkaterDudeToCapitalHeights","\n            ON: CAPITOL_HEIGHTS\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.destination=xxx.location=CAPITOL_HEIGHTS.find_briefcase=2\n                SKATER_DUDE.location=offscreen.help_steve=2\n            ",s(ec,"jumpTurnstileWithSkaterDude","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL.at_turnstile\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.line=ORANGE_LINE.-at_turnstile\n            ",s(ec,"followSkaterDudeToOrangeLine","\n            ON: ORANGE_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            DO: PLAYER.line=ORANGE_LINE.at_turnstile\n            ",s(ec,"forcePlayerToFollowSkaterDudeToCapitolHeights","\n            ON: *.station\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            ",s(ec,"forcePlayerToFollowSkaterDudeOntoOrangeLine","\n            ON: RED_LINE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n                SKATER_DUDE.help_steve=1\n            ",s(ec,"helpFromSkaterDude","\n            ON: SKATER_DUDE\n            IF: PLAYER.chapter=1.location=SPRING_HILL\n            DO: SKATER_DUDE.help_steve=1\n                PLAYER.destination=CAPITOL_HEIGHTS\n            ",s(ec,"findingSecurityDepotClosed","\n            ON: SECURITY_DEPOT_SPRING_HILL_STATION\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<5\n                PLAYER.chapter=1\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=5\n                SKATER_DUDE.location=SPRING_HILL\n            ",s(ec,"panic","\n            ON: *.station\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=2\n                PLAYER.chapter=1\n            DO: PLAYER.location=$\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(ec,"ignoreGuardsAdvice","\n            ON: *.station\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n                PLAYER.chapter=1\n            DO: PLAYER.location=$\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(ec,"followGuardsAdvice","\n            ON: SPRING_HILL\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n                PLAYER.chapter=1\n            DO: PLAYER.location=SPRING_HILL\n                BROADWAY_STREET.leaving_broadway_street_station_plot=4\n            ",s(ec,"tellCommuter1AboutStolenBriefcase","\n            ON: COMMUTER_1\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot>1\n            ",s(ec,"tellOfficersAboutStolenBriefcase","\n            ON: SECURITY_OFFICERS\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot=2\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=3\n            ",s(ec,"briefcaseStolen","\n            ON: *.line\n            IF: PLAYER.chapter=1\n                BROADWAY_STREET.leaving_broadway_street_station_plot=1\n            DO: BRIEFCASE.location=THIEF\n                BROADWAY_STREET.leaving_broadway_street_station_plot=2\n                GIRL_IN_YELLOW.location=IRIS_LAKE\n                PLAYER.find_briefcase=1.present_proposal+1\n            ",s(ec,"noticeGirlInYellow","\n            ON: GIRL_IN_YELLOW\n            IF: PLAYER.chapter=1\n            DO: GIRL_IN_YELLOW.who_was_girl_in_yellow_quest+1\n                GIRL_IN_YELLOW.location=IRIS_LAKE\n            ",s(ec,"askCommuter1AboutDelay","\n            ON: COMMUTER_1\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<2\n                PLAYER.chapter=1\n            ",s(ec,"askOfficersAboutDelay","\n            ON: SECURITY_OFFICERS\n            IF: BROADWAY_STREET.leaving_broadway_street_station_plot<2\n            DO: BROADWAY_STREET.leaving_broadway_street_station_plot=1\n                PLAYER.present_proposal+1\n            ",s(ec,"leavingBroadwayStationPrematurely","\n            ON: *.line\n            IF: PLAYER.location=BROADWAY_STREET\n                BROADWAY_STREET.leaving_broadway_street_station_plot<1\n            ",s(ec,"notGoingToWorkAgain","\n            ON: *.station\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            ",s(ec,"delaysAtBroadwayStreetStation","\n            ON: BROADWAY_STREET\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            DO: PLAYER.location=BROADWAY_STREET.destination=xxx\n                BROADWAY_STREET.out_of_service\n                COMMUTER_1.location=BROADWAY_STREET\n            ",s(ec,"getMap","\n            ON: MAP_POSTER\n            IF: MAP.!location=PLAYER\n            DO: MAP.location=PLAYER\n            ",s(ec,"askMaintenanceManForDirections","\n            ON: MAINTENANCE_MAN\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=1\n            ",uo)))))))))))))))))))))))))))))))))))),oc=s(ec,"workersComplainingAboutClosuresOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.!heardAboutClosures.line=RED_LINE\n                ORANGE_LINE_PASS.location=PLAYER\n            DO: PLAYER.location=$.heardAboutClosures\n            ",s(ec,"womenTalkingAboutHotdogManOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.!heardOfHotdogMan\n                ORANGE_LINE_PASS.location=PLAYER\n            DO: PLAYER.location=$.heardOfHotdogMan\n            ",s(ec,"check_wet_jeans",'\n            ON: "check_wet_jeans"\n            DO: CHANGE.amount+25\n            ',s(ec,"wetPantsOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.call_boss=1.line=RED_LINE\n                CHANGE.amount=25\n            DO: PLAYER.location=$\n            ",s(ec,"persist_sitting_in_saved_seat",'\n            ON: "persist_sitting_in_saved_seat"\n            DO: PLAYER.good_will-3\n            ',s(ec,"attempt_to_sit_in_saved_seat",'\n            ON: "attempt_to_sit_in_saved_seat"\n            ',s(ec,"savedSeatOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.good_will<0.location=CONVENTION_CENTER.!seen_saved_seat\n            DO: PLAYER.location=$.seen_saved_seat\n            ",s(ec,"jumpTurnstileFortySecondStreet",'\n            ON: "just_do_it"\n            ',s(ec,"questionJumpingTurnstiles","\n            ON: BLUE_LINE\n            IF: PLAYER.at_turnstile.location=FORTY_SECOND_STREET\n            ",s(ec,"tryToJumpTurnstileWithRepairManWatching","\n            ON: BLUE_LINE\n            IF: PLAYER.at_turnstile.location=FORTY_SECOND_STREET\n                GRIZZLED_REPAIRMAN.location=FORTY_SECOND_STREET\n            ",s(ec,"maintenanceManAtOneHundredFourthStreet","\n            ON: MAINTENANCE_MAN.location=ONE_HUNDRED_FORTH_STREET\n            ",s(ec,"coffee_ruined",'\n            ON: "help_a_guy_out"\n            DO: SLEEPING_MAN.coffee_ruined\n                CHANGE.amount-25\n            ',s(ec,"confrontConductor",'\n            ON: "confront_repairman"\n            DO: GRIZZLED_REPAIRMAN.location=offscreen\n                ELECTRIC_PANEL.-hidden\n            ',s(ec,"catchConductorMessingWithPanel","\n            ON: GRIZZLED_REPAIRMAN.location=FORTY_SECOND_STREET\n            ",s(ec,"girlInYellowSecondEncounter","\n            ON: GIRL_IN_YELLOW\n            DO: GIRL_IN_YELLOW.who_was_girl_in_yellow_quest+1.location=WESTGATE\n            ",s(ec,"stealMusiciansChangeSecondTime",'\n            ON: "musicians_change"\n            IF: MUSICIAN.robbed\n            DO: PLAYER.good_will-5\n            ',s(ec,"stealMusiciansChange",'\n            ON: "musicians_change"\n            DO: MUSICIAN.robbed\n                CHANGE.amount+50.location=PLAYER\n                PLAYER.good_will-3\n            ',s(ec,"askBusinessmanForChange","\n            ON: BUSINESS_MAN\n            IF: PLAYER.call_boss=1\n            DO: BUSINESS_MAN.location=offscreen\n            ",s(ec,"tryingToCallBossWithCellphone","\n            ON: CELL_PHONE\n            IF: PLAYER.call_boss=1\n            ",s(ec,"ponderingCallingBossOnTrain","\n            ON: *.station.!out_of_service\n            IF: PLAYER.call_boss=1\n            DO: PLAYER.location=$\n            ",s(ec,"exitPassagewayAtFortySecondStreet",'\n            ON: "disembark"\n            IF: PLAYER.location=FORTY_SECOND_STREET.call_boss=3\n            DO: PLAYER.call_boss=4\n            ',s(ec,"passageLocked","\n            ON: MAINTENANCE_DOOR_FORTY_SECOND_STREET_TO_SEVENTY_THIRD_STREET\n            ",s(ec,"chaseThiefAgain","\n            ON: MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET\n            IF: PLAYER.call_boss=2\n            DO: PLAYER.call_boss=3.location=FORTY_SECOND_STREET.mapLevel=1\n            ",s(ec,"collectedEnoughChangeToCallBoss","\n            ON: PAYPHONE_SEVENTY_THIRD_STREET\n            IF: CHANGE.amount>49\n                PLAYER.call_boss=1\n            DO: CHANGE.amount-50\n                PLAYER.call_boss=2\n                MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET.-hidden\n            ",s(ec,"useChangeFromMotherToCallBoss","\n            ON: PAYPHONE_SEVENTY_THIRD_STREET\n            IF: CHANGE.amount=50\n                PLAYER.call_boss=1\n                MOTHER.screaming_child_quest=1\n            DO: CHANGE.amount-50\n                PLAYER.good_will-1\n                PLAYER.call_boss=2\n                MOTHER.location=offscreen.screaming_child_quest=100\n                MAINTENANCE_DOOR_SEVENTY_THIRD_STREET_TO_FORTY_SECOND_STREET.-hidden\n            ",s(ec,"needCoinsForPayphone","\n            ON: PAYPHONE_SEVENTY_THIRD_STREET\n            IF: PLAYER.call_boss=1\n            ",s(ec,"throwAwayPosters",'\n            ON: "throw_away_posters"\n            DO: (*.missing_dog_poster).location=offscreen\n                PLAYER.good_will-3\n                DISTRESSED_WOMAN.missing_dog_posters_quest=100\n            ',s(ec,"tryToHangRedundantDogPosters","\n            ON: *.missing_dog_poster.location=PLAYER\n            IF: *.missing_dog_poster.location=(link PLAYER.location)\n                DISTRESSED_WOMAN.missing_dog_posters_quest>0\n            ",s(ec,"tryToHangDogPosterOnWrongLine","\n            ON: *.missing_dog_poster.location=PLAYER\n            IF: PLAYER.!line=RED_LINE\n            ",s(ec,"putUpLastMissingDogPoster","\n            ON: *.missing_dog_poster.location=PLAYER\n            IF: DISTRESSED_WOMAN.missing_dog_posters_quest=5\n            DO: $.location=(link PLAYER.location)\n                DISTRESSED_WOMAN.missing_dog_posters_quest+1\n                PLAYER.good_will+5\n            ",s(ec,"putUpMissingDogPoster","\n            ON: *.missing_dog_poster.location=PLAYER\n            DO: $.location=(link PLAYER.location)\n                DISTRESSED_WOMAN.missing_dog_posters_quest+1\n            ",s(ec,"lookAtHangingDogPosters","\n            ON: *.missing_dog_poster\n            ",s(ec,"getDogPostersFromDistressedWoman","\n            ON: DISTRESSED_WOMAN\n            DO: MISSING_DOG_POSTER_1.location=PLAYER\n                MISSING_DOG_POSTER_2.location=PLAYER\n                MISSING_DOG_POSTER_3.location=PLAYER\n                MISSING_DOG_POSTER_4.location=PLAYER\n                MISSING_DOG_POSTER_5.location=PLAYER\n                DISTRESSED_WOMAN.location=offscreen.missing_dog_posters_quest=1\n            ",s(ec,"checkBroomClosetButNotBriefcase","\n            ON: BROOM_CLOSET\n            IF: PLAYER.find_briefcase=3\n            DO: PLAYER.find_briefcase=4.call_boss=1\n                VENDING_MACHINE.coin_in_coin_return\n                BROKEN_PAYPHONE.coin_in_coin_return\n            ",uo)))))))))))))))))))))))))))))))))),rc=s(ec,"use_secret_passage_way","\n            ON: *.passage_to=(*).!locked\n            DO: PLAYER.location=(link $.passage_to)\n            ",s(ec,"check_coin_return","\n            ON: *.coin_in_coin_return\n            DO: $.-coin_in_coin_return\n                CHANGE.amount+25.location=PLAYER\n            ",s(ec,"trashcan","\n            ON: *.trashcan\n            ",s(ec,"inspectPasses","\n            ON: *.pass\n            DO: (*.pass.new).-new\n            ",s(ec,"notebookInstructions","\n            ON: NOTEBOOK.new\n            DO: NOTEBOOK.-new.silent\n            ",s(ec,"checkMap","\n            ON: *.map\n            ",s(ec,"jumpTurnstileFail","\n            ON: *.line\n            DO: PLAYER\n            ",s(ec,"goToLinePlatform","\n            ON: *.line\n            IF: PLAYER.at_turnstile\n                *.valid_on=$.location=PLAYER\n            DO: PLAYER.-at_turnstile\n            ",s(ec,"goToLineTurnstile","\n            ON: *.line\n            IF: PLAYER.!at_turnstile\n            DO: PLAYER.line=$.at_turnstile\n            ",s(ec,"goToLobby","\n            ON: LOBBY\n            DO: PLAYER.-at_turnstile\n            ",s(ec,"nextDay",'\n            ON: "next_day"\n            ',s(ec,"outOfServiceStations","\n            ON: *.station.out_of_service\n            ",s(ec,"ridingTheTrain","\n            ON: *.station\n            DO: PLAYER.location=$\n            ",uo))))))))))))),ac=s(ec,"fallAsleep","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=5.chapter=0\n            DO: PLAYER.location=TWIN_BROOKS.chapter+1.present_proposal+1\n                COFFEE.location=offscreen\n            ",s(ec,"endThursday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=4\n            DO: PLAYER.location=EAST_MULBERRY.day+1.present_proposal=1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                TRASH_DIGGER.location=offscreen\n                BENCH_BUM.location=offscreen\n                SODA_MACHINE.-broken\n                NOTEBOOK.location=PLAYER\n            ",s(ec,"endWednesday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=3\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                SKATER_DUDE.location=offscreen\n                TRASH_DIGGER.location=EAST_MULBERRY\n                BENCH_BUM.location=EAST_MULBERRY\n            ",s(ec,"endTuesday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=2\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                TRASH_DIGGER.location=offscreen\n                SKATER_DUDE.location=EAST_MULBERRY\n            ",s(ec,"endMonday","\n            ON: BROADWAY_STREET\n            IF: PLAYER.day=1\n            DO: PLAYER.location=EAST_MULBERRY.day+1\n                CELL_PHONE.new\n                COFFEE.location=offscreen\n                COMMUTER_1.location=offscreen\n                LOUD_PAYPHONE_LADY.location=offscreen\n                TRASH_DIGGER.location=EAST_MULBERRY\n            ",s(ec,"firstInteractionWithCommuter1","\n            ON: COMMUTER_1\n            IF: PLAYER.chapter=0\n            DO: COMMUTER_1.friendliness=1\n            ",s(ec,"firstMeetSkaterDude","\n            ON: SKATER_DUDE\n            IF: PLAYER.chapter=0\n            DO: $.location=offscreen\n            ",s(ec,"get_caffeinated_quest_3","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=3\n            IF: PLAYER.chapter=0\n            ",s(ec,"drink_old_soda","\n            ON: SODA\n            IF: MOTHER.screaming_child_quest<1\n            DO: SODA.location=offscreen\n            ",s(ec,"get_caffeinated_quest_2","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=2\n            IF: PLAYER.chapter=0\n            DO: $.get_caffeinated_quest+1\n                PLAYER.persistent+1\n                SODA.location=PLAYER\n            ",s(ec,"get_caffeinated_quest_1","\n            ON: SODA_MACHINE.!broken.get_caffeinated_quest=1\n            IF: PLAYER.chapter=0\n            DO: $.get_caffeinated_quest+1\n            ",s(ec,"sodaMachineFixed","\n            ON: SODA_MACHINE.!broken\n            IF: PLAYER.chapter=0\n            ",s(ec,"sodaMachineBroken","\n            ON: SODA_MACHINE.broken\n            ",s(ec,"coffeeCartFriday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=5.chapter=0\n                SODA_MACHINE.get_caffeinated_quest<1\n            DO: SODA_MACHINE.get_caffeinated_quest=1\n            ",s(ec,"coffeeCartThursday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=4\n            DO: COFFEE.location=PLAYER\n            ",s(ec,"coffeeCartWednesday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=3\n            DO: COFFEE.location=PLAYER\n            ",s(ec,"coffeeCartTuesday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=2\n            DO: COFFEE.location=PLAYER\n            ",s(ec,"coffeeCartMonday","\n            ON: COFFEE_CART\n            IF: PLAYER.day=1\n            DO: COFFEE.location=PLAYER\n            ",s(ec,"forcePlayerToReadEmails","\n            ON: *.line\n            IF: CELL_PHONE.new\n                PLAYER.chapter=0\n            ",s(ec,"checkEmailsDay5","\n            ON: CELL_PHONE\n            IF: PLAYER.day=5\n            DO: CELL_PHONE.-new\n            ",s(ec,"checkEmailsDay4","\n            ON: CELL_PHONE\n            IF: PLAYER.day=4\n            DO: CELL_PHONE.-new\n            ",s(ec,"checkEmailsDay3","\n            ON: CELL_PHONE\n            IF: PLAYER.day=3\n            DO: CELL_PHONE.-new\n            ",s(ec,"checkEmailsDay2","\n            ON: CELL_PHONE\n            IF: PLAYER.day=2\n            DO: CELL_PHONE.-new\n            ",s(ec,"checkEmailsDay1","\n            ON: CELL_PHONE\n            IF: PLAYER.day=1\n            DO: CELL_PHONE.-new\n            ",s(ec,"notGoingToWork","\n            ON: *.station\n            IF: PLAYER.destination=BROADWAY_STREET.chapter=0\n            ",uo))))))))))))))))))))))))),ic=s(st,Ro,rc,d([s(ec,"man_in_hot_dog_suit_wants_more","\n            ON: MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=3\n            ",s(ec,"hot_dog_man_rebuffed","\n            ON: MAN_IN_HOT_DOG_SUIT.location=TWIN_BROOKS.job_hunt_quest_1=100\n            ",s(ec,"throw_away_mascot_papers",'\n            ON: "throw_away_mascot_papers"\n            DO: MASCOT_PAPERS.location=offscreen\n                PLAYER.good_will-1\n                MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=100\n            ',s(ec,"check_up_on_hot_dog_guy_at_franks_franks","\n            ON: MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=2\n            DO: MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=3\n                CHANGE.location=PLAYER.amount+50\n                PLAYER.good_will+3\n            ",s(ec,"give_mascot_papers_to_frank","\n            ON: FRANKS_FRANKS\n            IF: MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=1\n            DO: MASCOT_PAPERS.location=offscreen\n                MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=2.location=UNIVERSITY\n            ",s(ec,"meet_the_man_in_the_hot_dog_suit","\n            ON: MAN_IN_HOT_DOG_SUIT.location=TWIN_BROOKS\n            DO: MASCOT_PAPERS.location=PLAYER\n                MAN_IN_HOT_DOG_SUIT.job_hunt_quest_1=1\n            ",s(ec,"ratty_hat_man_advice_5","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=4\n            DO: $.location=offscreen.ratty_hat_man_advice+1\n            ",s(ec,"ratty_hat_man_advice_4","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=3\n            DO: $.location=HIGHLAND.ratty_hat_man_advice+1\n            ",s(ec,"ratty_hat_man_advice_3","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=2\n            DO: $.location=PARK_AVE.ratty_hat_man_advice+1\n            ",s(ec,"ratty_hat_man_advice_2","\n            ON: MAN_IN_RATTY_HAT.ratty_hat_man_advice=1\n            DO: $.location=NORWOOD.ratty_hat_man_advice+1\n            ",s(ec,"ratty_hat_man_advice_1","\n            ON: MAN_IN_RATTY_HAT\n            DO: $.location=TWIN_BROOKS.ratty_hat_man_advice+1\n            ",s(ec,"noMoreScreamingChild","\n            ON: MOTHER.screaming_child_quest=2\n            ",s(ec,"giveSodaToScreamingChild","\n            ON: MOTHER.screaming_child_quest=1\n            IF: SODA.location=PLAYER\n            DO: SODA.location=offscreen\n                MOTHER.screaming_child_quest=2\n                PLAYER.good_will+2\n            ",s(ec,"getSodaForScreamingChild","\n            ON: SODA_MACHINE\n            IF: MOTHER.screaming_child_quest=1\n                CHANGE.location=PLAYER.amount>49\n                SODA.!location=PLAYER\n            DO: CHANGE.amount-50\n                SODA.location=PLAYER\n            ",s(ec,"keepBotheringMother","\n            ON: MOTHER.met.screaming_child_quest=1\n            ",s(ec,"offerToHelpScreamingChild","\n            ON: MOTHER.met.screaming_child_quest=0\n            DO: CHANGE.location=PLAYER.amount+50\n                MOTHER.screaming_child_quest=1\n            ",s(ec,"offerYourSodaToScreamingChild","\n            ON: MOTHER.met.screaming_child_quest=0\n            IF: SODA.location=PLAYER\n            DO: MOTHER.screaming_child_quest=99\n                MOTHER.location=offscreen\n            ",s(ec,"offerYourSodaToScreamingChildFromSoda","\n            ON: SODA\n            IF: MOTHER.met.screaming_child_quest=0\n                SODA.location=PLAYER\n            DO: MOTHER.screaming_child_quest=99\n                MOTHER.location=offscreen\n            ",s(ec,"meetingScreamingChild","\n            ON: MOTHER.!met\n            DO: MOTHER.met\n            ",uo))))))))))))))))))),ac,tc,oc])),sc=t((function(n,e){return{$:"DecStat",a:n,b:e}})),uc=t((function(n,e){return{$:"IncStat",a:n,b:e}})),lc=t((function(n,e){return{$:"LookUpLinkTarget",a:n,b:e}})),cc=t((function(n,e){return{$:"SetLink",a:n,b:e}})),hc=t((function(n,e){return{$:"SetStat",a:n,b:e}})),_c=function(n){return{$:"SpecificLinkTarget",a:n}},dc=(eu=o((function(n,e,t){return ya(i(qe,t(e),n))})),i(Ua,c,(function(n){return xa(d([i(Ha,i(da,i(da,Ka(So),Ci(ct(A(" ")))),za(".")),xa(d([i(Ha,i(da,Ka((function(e){return ya(i(qe,{$:"RemoveTag",a:e},n))})),za("-")),Vi),i(Ha,i(Ha,Ka(eu(n)),Vi),xa(d([i(Ha,i(da,Ka(So),za("+")),i(Ya,(function(n){return function(e){return i(uc,e,n)}}),Ki)),i(Ha,i(da,Ka(So),za("-")),i(Ya,(function(n){return function(e){return i(sc,e,n)}}),Ki)),i(Ha,i(da,Ka(So),za("=")),xa(d([i(Ya,(function(n){return function(e){return i(hc,e,n)}}),Ki),i(Ya,(function(){return function(n){return i(cc,n,_c("$"))}}),za("$")),i(Ya,(function(n){return function(e){return i(cc,e,_c(n))}}),ji),(e=o((function(n,e,t){return i(cc,t,i(lc,n,e))})),i(Ha,i(Ha,i(da,i(da,Ka(e),Mi("(link")),Ci(ct(A(" ")))),i(da,xa(d([i(Ya,nr("$"),Bi("$")),ji])),za("."))),i(da,Vi,za(")"))))]))),Ka((function(n){return{$:"AddTag",a:n}}))])))]))),Ka(Oa(n))]));var e}))),Ec=t((function(n,e){return{$:"Update",a:n,b:e}})),fc=t((function(n,e){return{$:"UpdateAll",a:n,b:e}})),gc=xa(d([i(Ya,nr(Ec("$")),za("$")),i(Ya,Ec,ji),i(Ha,i(da,i(da,Ka(So),za("(")),za("*")),i(da,i(Ya,(function(n){return fc(n)}),Xi),za(")")))])),Ic=i(Ha,i(Ha,Ka(t((function(n,e){return n(e)}))),gc),dc),Rc=(tu=o((function(n,e,t){return{changes:t,conditions:e,trigger:n}})),ou=i(Ha,i(da,Ka(So),Bi('"')),i(da,Ma(ka('"')),za('"'))),ru=i(Ha,i(da,i(da,i(da,Ka(So),Ts),xa(d([Mi("ON:"),Mi("ON")]))),Ts),i(da,xa(d([i(Ya,(function(n){return{$:"SpecificTrigger",a:n}}),ou),i(Ya,(function(n){return{$:"EntityTrigger",a:n}}),Zi)])),Ts)),au=i(Ha,i(da,i(da,Ka(So),xa(d([Mi("IF:"),Mi("IF"),Ka(O)]))),Ts),i(Ua,c,(function(n){return xa(d([i(Ya,(function(){return Oa(ut(n))}),i(da,xa(d([Mi("DO:"),Mi("DO"),ha])),Ts)),i(Ya,(function(e){return ya(i(qe,e,n))}),i(da,Zi,Ts))]))}))),iu=i(Ua,c,(function(n){return xa(d([i(Ya,(function(){return Oa(ut(n))}),ha),i(Ya,(function(e){return ya(i(qe,e,n))}),i(da,Ic,Ts))]))})),i(Ha,i(Ha,i(Ha,Ka(tu),ru),au),iu)),mc=t((function(n,e){var t=e.a;return i(Yi,Gi,i(jr,n(e.b),i(ta,i(da,Rc,ha),t)))})),Tc=i(t((function(n,e){var t=o((function(n,e,t){return y("Rule: "+n+"\n"+e.a+" ",t)}));return s(Io,o((function(e,o,r){var a=i(mc,n,o);if("Ok"===a.$)return i(jr,i(io,e,a.a),r);var u=a.a;if("Ok"===r.$)return yt(d([s(t,e,o,u)]));var l=r.a;return yt(i(qe,s(t,e,o,u),l))})),St(uo),e)})),nr(So),ic),pc=we,Nc=r((function(n,e,t,o){if("Err"===e.$)return yt(e.a);var r=e.a;if("Err"===t.$)return yt(t.a);var a=t.a;return"Err"===o.$?yt(o.a):St(s(n,r,a,o.a))})),Oc=ee("code"),yc=ee("pre");!function(e){n.Elm?function n(e,t,o){for(var r in o)r in t?"init"==r?B(6,e):n(e+"."+r,t[r],o[r]):t[r]=o[r]}("Elm",n.Elm,e):n.Elm=e}({Main:{init:pc({init:wo(i(Ru,uo,i(jr,ht,su=u(Nc,o((function(n,e,t){return y(n,t)})),Cs,nc,Tc)))),subscriptions:function(n){return tr(d([Ko(nr(Do)),xo($o(n)),Xo(i(er,Co,Lo)),Qo(ko),Vo(nr(Co(vo)))]))},update:Bu(i(Ru,uo,i(jr,Ou,su))),view:function(n){return"Ok"===su.$?{body:d([function(n){return n.loaded?n.showSelectScene?jl:i(Wu,c,d([I(n.scene,$e)?(e=i(po,"ERROR: No story to show",pu(n.story)),i(Wu,d([Vu("Scene MainTitleScene")]),d([i(Wu,d([Vu("MainTitleContent")]),d([i(Xu,c,e),i(xu,d([Vu("StoryLine__continue"),zu(Mo)]),d([ju("Continue...")]))]))]))):function(n){var e,r,a,l,h,_=i(Ps,"PLAYER.caught",n.worldModel)?ar:n.scene,E=Dl,f=vr(n.worldModel);return s(Ll,"div",d([Vu("game")]),d([function(){switch(_.$){case"MainTitle":return y("mainTitle",ju(""));case"Splash":return y("splash",bl);case"Title":return y("title",(t=_.a,i(Wu,d([Vu("Scene TitleScene")]),d([i(Wu,d([Vu("TitleContent")]),d([i(vl,d([Vu("Title")]),d([ju(t)])),i(xu,d([Vu("StoryLine__continue"),zu(Ho("next_day"))]),d([ju("Continue...")]))]))]))));case"End":return y("end",Qu);case"CentralGuardOffice":return y("centralGuardOffice",(r=i(Hs,"*.item.location=CENTRAL_GUARD_OFFICE",o=n.worldModel),a=i(Hs,"*.character.location=CENTRAL_GUARD_OFFICE",o),i(Wu,d([Vu("Scene CentralGuardOffice")]),d([i(Wu,d([Vu("CentralGuardOffice--content Sign__right")]),i(Zr,i(gr,fs((function(n){return n.name})),(function(n){var e=n.a,t=n.b;return i(Wu,d([Vu("Sign__item Sign__item--interactable"),zu(Ho(e))]),d([ju(t)]))})),w(a,r))),Ml(o)]))));case"Lobby":return y("lobby",s(Bl,E,n.worldModel,f));case"Platform":return y("platform",u(Wl,E,f,e=_.a,n.worldModel));case"Passageway":return y("passageway",Ul);case"Turnstile":return y("turnstile",i(xl,n.worldModel,e=_.a));default:var e=_.a.line;return y("train",function(n){var e=n.arrivingAtStation,t=n.worldModel,o=i(po,kl(n.line).name,i(Wr,(function(n){return"Arriving at: "+function(n){return i(po,"ERRORR getting station: "+n,i(Wr,(function(n){return n.name+" Station"}),i(To,n,t)))}(n)}),e)),r=i(Wu,d([Vu("train__ticker")]),d([i(Wu,d([Vu("train__info")]),d([ju(o)]))]));return d([Vu("train__foreground")]),d([i(Wu,d([Vu("train__top")]),d([i(Wu,d([Vu("train__ticker")]),d([i(Wu,d([Vu("train__info")]),d([ju(o)]))]))])),i(Wu,d([Vu("train__doors")]),d([i(Wu,d([Vu("train__door train__door--left")]),c),i(Wu,d([Vu("train__door train__door--right")]),c)]))]),d([Vu("train__background")]),i(Wu,d([Vu("Scene train")]),d([r]))}({arrivingAtStation:I(_.a.status,rr)?Nt(f):Ot,line:e,worldModel:n.worldModel}))}var t,o,r,a}(),y("story",(r=i(po,"",pu(n.story)),Jr(r)?ju(""):(a=r,l=i(cu,(function(n){return y(Ho(i(po,e=n,pu(ut(i(jt,"/",e))))),!0);var e}),i(yl,d(["target","pathname"]),Wo)),h=i(wl,"click",i(cu,So,l)),s(Ll,"div",d([Vu("StoryLine")]),d([y(a,i(Wu,d([Vu("StoryLine__content")]),d([i(Xu,d([h]),a),i(xu,d([Vu("StoryLine__continue"),zu(Mo)]),d([ju("Continue...")]))])))]))))),y("notebook",n.showNotebook?function(n){return i(Wu,d([Vu("Notebook__scrim"),zu(Go)]),d([(e=n,r=e.worldModel,a=e.noteBookPage,u=e.persistKey,l=e.history,h=o((function(n,e,t){return i(El,d([Il(d([y("Notebook__item",!0),y("done",p(t,Yt(e))>-1)]))]),d([i(Wu,d([Vu("Notebook__subheading")]),d([ju(n)])),i(gl,d([Vu("Notebook__sublist")]),i(Zr,(function(n){return i(El,d([Vu("Notebook__subitem")]),d([ju(n)]))}),i(hl,t,e)))]))})),_=function(n){return i(gl,d([Vu("Notebook__content")]),ut(s(st,t((function(n,e){var t,o=n.b,a=n.c,u=(t=i(jt,".",n.a)).b&&t.b.b&&!t.b.b.b?s(Rr,t.a,t.b.a,r):Ot;if("Just"===u.$){var l=u.a;return l>0?i(qe,s(h,o,a,l),e):e}return e})),c,n)))},E=function(n){return i(Tl,"click",Zo({message:n,preventDefault:!0,stopPropagation:!0}))},f=function(n){return i(El,d([Vu("Notebook__item")]),d([i(xu,d([E(Co((e=n,{$:"Load",a:e}))),Vu("Notebook__item--savedGame")]),d([ju(n)])),i(xu,d([E(Co({$:"Delete",a:n})),Vu("Notebook__item-delete")]),d([ju("(delete)")]))]));var e},i(Wu,d([Vu("Notebook")]),w(d([i(Wu,d([Vu("Notebook__tabs")]),d([i(Wu,d([Vu("Notebook__tab Notebook__tab--goals"),E(al(Ue))]),d([ju("Goals")])),i(Wu,d([Vu("Notebook__tab Notebook__tab--distractions"),E(al(tl))]),d([ju("Distractions")])),i(Wu,d([Vu("Notebook__tab Notebook__tab--savedGames"),E(Co(vo))]),d([ju("Saved games")]))]))]),function(){switch(a.$){case"Goals":return d([i(_l,d([Vu("Notebook__header")]),d([ju("Goals")])),_(sl)]);case"Distractions":return d([i(_l,d([Vu("Notebook__header")]),d([ju("Distractions")])),_(il)]);default:var n=a.a;return d([i(_l,d([Vu("Notebook__header")]),d([ju("Saved games")])),i(dl,d([Vu("Notebook__persistKeyInput"),Rl("persistKeyInput"),E(Po),Al(i(er,Co,ol)),ml(u)]),c),i(fl,d([Vu("Notebook__save-new"),E(Co(i(rl,u,l)))]),d([ju("Save new")])),function(n){return i(gl,d([Vu("Notebook__content")]),i(Zr,f,n))}(n)])}}())))]));var e,r,a,u,l,h,_,E,f}(n):ju("")),y("map",n.showMap?(e=n.worldModel,i(Wu,d([zu(Fo),Vu("map")]),w(d([i(nl,d([Vu("map__image"),el("img/subway-map-full.jpg")]),c)]),i(Zr,(function(n){return i(nl,d([Vu("map__image"),el("img/map-passage-"+Wt(n)+".png")]),c)}),i(Bt,1,i(po,0,s(Rr,"PLAYER","mapLevel",e))))))):ju(""))]))}(n),i(Wu,d([Vu("Debug"),i(Nl,"keydown",Zo(y(Po,!0)))]),d([i(po,ju(""),i(Wr,i(Ql,$u,n.worldModel),n.debugState))])),I(n.debugState,Ot)?ju(""):function(n){return i(Wu,c,d([i(Wu,d([i(zl,"color","green"),i(zl,"display","block"),i(zl,"position","absolute"),i(zl,"z-index","99"),i(zl,"padding","2px"),i(zl,"bottom","0"),i(zl,"left","1em"),i(zl,"cursor","pointer"),zu(Kl)]),d([ju("transcript")])),n.showTranscript?i(Vl,d([i(zl,"color","green"),i(zl,"position","absolute"),i(zl,"z-index","99"),i(zl,"width","50%"),i(zl,"height","70%"),i(zl,"top","3em"),i(zl,"left","1em"),Jl(!0)]),d([ju(i(xt,"\n",n.transcript))])):ju("")]))}(n)])):i(Wu,d([Vu("Loading")]),d([i(fl,c,d([ju("Loading...")])),i(Zl,d([Rl("loading-progress"),ml("0")]),d([ju("0")]))]));var e}(n)]),title:"Deadline"}:{body:d([function(n){return i(Wu,d([i(zl,"background","black"),i(zl,"color","red"),i(zl,"padding","4em"),i(zl,"display","flex"),i(zl,"flex-direction","column"),i(zl,"align-items","center"),i(zl,"justify-content","center")]),d([i(vl,c,d([ju("Errors when parsing!  Please fix:")])),i(gl,d([i(zl,"width","100%")]),i(Zr,(function(n){var e=n.a,t=n.b;return i(El,d([i(zl,"margin-bottom","2em")]),d([i(yc,d([i(zl,"background","white"),i(zl,"padding","1em"),i(zl,"color","black"),i(zl,"overflow"," auto"),i(zl,"width","100%")]),d([i(Oc,c,d([ju(e)]))])),ju(t)]))}),n))]))}(su.a)]),title:"Errors found"}}})(i(qo,(function(n){return Zo({debug:n})}),i(Ol,"debug",jo)))(0)}})}(this)},function(n,e,t){var o={"./gurad-office.jpg":14,"./icons/briefcase.svg":15,"./icons/cell_phone.svg":16,"./icons/change.svg":17,"./icons/coffee.svg":18,"./icons/dollar_bill.svg":19,"./icons/enter.svg":20,"./icons/map.svg":21,"./icons/mascot_papers.svg":22,"./icons/missing_dog_poster.svg":23,"./icons/no_entry.svg":24,"./icons/notebook.svg":25,"./icons/odd_key.svg":26,"./icons/orange_line_pass.svg":27,"./icons/pass.svg":28,"./icons/soda.svg":29,"./map-passage-1.png":30,"./map-red-yellow-green.jpg":31,"./notebook.jpg":32,"./riding-train.jpg":33,"./subway-lobby.jpg":34,"./subway-map-full.jpg":35,"./subway-passageway.jpg":36,"./subway-turnstile.jpg":37,"./title.jpg":38,"./train.jpg":39};function r(n){var e=a(n);return t(e)}function a(n){if(!t.o(o,n)){var e=Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return o[n]}r.keys=function(){return Object.keys(o)},r.resolve=a,n.exports=r,r.id=13},function(n){n.exports="../../img/gurad-office.jpg"},function(n){n.exports="../../fonts/briefcase.svg"},function(n){n.exports="../../fonts/cell_phone.svg"},function(n){n.exports="../../fonts/change.svg"},function(n){n.exports="../../fonts/coffee.svg"},function(n){n.exports="../../fonts/dollar_bill.svg"},function(n){n.exports="../../fonts/enter.svg"},function(n){n.exports="../../fonts/map.svg"},function(n){n.exports="../../fonts/mascot_papers.svg"},function(n){n.exports="../../fonts/missing_dog_poster.svg"},function(n){n.exports="../../fonts/no_entry.svg"},function(n){n.exports="../../fonts/notebook.svg"},function(n){n.exports="../../fonts/odd_key.svg"},function(n){n.exports="../../fonts/orange_line_pass.svg"},function(n){n.exports="../../fonts/pass.svg"},function(n){n.exports="../../fonts/soda.svg"},function(n){n.exports="../../img/map-passage-1.png"},function(n){n.exports="../../img/map-red-yellow-green.jpg"},function(n){n.exports="../../img/notebook.jpg"},function(n){n.exports="../../img/riding-train.jpg"},function(n){n.exports="../../img/subway-lobby.jpg"},function(n){n.exports="../../img/subway-map-full.jpg"},function(n){n.exports="../../img/subway-passageway.jpg"},function(n){n.exports="../../img/subway-turnstile.jpg"},function(n){n.exports="../../img/title.jpg"},function(n){n.exports="../../img/train.jpg"}]);